<!DOCTYPE html>
<html class="no-js fonts-loaded" lang="ru"><head><script type="text/javascript" async="" src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/js"></script><script async="" src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/analytics.js"></script>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta content="width=1024" name="viewport">
<title>Размышления о стандартной библиотеке JavaScript. Core.js / Хабр</title>

  <meta name="description" content="Один пацан писал все на JavaScript, и клиент, и сервер, говорил что нравится, удобно, читабельно. Потом его в дурку забрали, конечно.
— С просторов интернета
К чему это я? Занятная штука —...">

  <meta name="keywords" content="Core.js, ECMAScript 5, ECMAScript 6, ECMAScript 7, Harmony, Strawman, Map, Set, WeakMap, WeakSet, Promise, Symbol, console, setImmediate, Dict, итераторы, iterators, стандартная библиотека, standard library">

  <meta property="fb:app_id" content="444736788986613">
<meta property="og:locale" content="ru_RU">
<meta property="og:type" content="article">
<meta property="fb:pages" content="472597926099084">
<meta property="og:url" content="https://habr.com/post/216997/">
<meta property="og:title" content="Размышления о стандартной библиотеке JavaScript. Core.js">

    <meta property="og:image" content="https://habrastorage.org/files/7b2/a07/b54/7b2a07b54f664478a8b7a25be220cbe2.png">
    <link rel="image_src" href="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7b2a07b54f664478a8b7a25be220cbe2.png">
    <meta name="twitter:image" content="https://habrastorage.org/files/7b2/a07/b54/7b2a07b54f664478a8b7a25be220cbe2.png">

<meta property="og:description" content="Один пацан писал все на JavaScript, и клиент, и сервер, говорил что нравится, удобно, читабельно. Потом его в дурку забрали, конечно. — С просторов интернета К...">
<meta name="twitter:description" content="Один пацан писал все на JavaScript, и клиент, и сервер, говорил что нравится, удобно, читабельно. Потом его в дурку забрали, конечно. — С просторов интернета К...">
<meta name="twitter:title" content="Размышления о стандартной библиотеке JavaScript. Core.js">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@habr_com">

  <meta property="al:android:url" content="habrahabr://post/216997">
<meta property="al:android:app_name" content="Habrahabr">
<meta property="al:android:package" content="ru.habrahabr">
<meta property="al:windows_phone:url" content="habrahabr://post/216997">
<meta property="al:windows_phone:app_name" content="Habrahabr">
<meta property="al:windows_phone:app_id" content="460a6bd6-8955-470f-935e-9ea1726a6060">
  <link rel="canonical" href="https://habr.com/post/216997/">
  <link rel="alternate" media="only screen and (max-width: 640px)" href="https://m.habr.com/post/216997/">

  <script type="text/javascript" async="" src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/watch.js"></script><script type="text/javascript" async="" defer="defer" src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/a" charset="UTF-8"></script><script type="application/ld+json">
    {
    "@context": "http:\/\/schema.org",
    "@type": "Article",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https:\/\/habr.com\/post\/216997\/"
    },
    "headline": "Размышления о стандартной библиотеке JavaScript. Core.js",
    "datePublished": "2014-11-18T14:57:02+03:00",
    "dateModified": "2015-05-05T15:18:05+03:00",
    "author": {
        "@type": "Person",
        "name": "Денис Пушкарев"
    },
    "publisher": {
        "@type": "Organization",
        "name": "Habr",
        "logo": {
            "@type": "ImageObject",
            "url": "https:\/\/dr.habracdn.net\/habrcom\/images\/habr_google.png"
        }
    },
    "description": "Один пацан писал все на JavaScript, и клиент, и сервер, говорил что нравится, удобно, читабельно. Потом его в дурку забрали, конечно. &mdash; С просторов интернета К...",
    "image": [
        "https:\/\/habrastorage.org\/files\/7b2\/a07\/b54\/7b2a07b54f664478a8b7a25be220cbe2.png"
    ]
}
  </script>


<meta name="yandex-verification" content="71593b225aeafc4e">
<meta name="referrer" content="unsafe-url">
<meta name="pocket-site-verification" content="ed24b2b9721edf0a282c5b4a3232c4">


<style type="text/css">
  @font-face{font-family:'Fira Sans';font-style:normal;font-weight:500;src:url(/fonts/0/FiraSans/firaSans-medium.eot);src:local("Fira Sans Medium"),local("FiraSans-Medium"),url(/fonts/0/FiraSans/firaSans-medium.eot?#iefix) format("embedded-opentype"),url(/fonts/0/FiraSans/firaSans-medium.woff2) format("woff2"),url(/fonts/0/FiraSans/firaSans-medium.woff) format("woff"),url(/fonts/0/FiraSans/firaSans-medium.ttf) format("truetype")}
</style>


<link href="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/global_main.css" rel="stylesheet" media="all">




<meta name="yandex-verification" content="67d46b975fa41645">

<link rel="apple-touch-icon" sizes="180x180" href="https://habr.com/images/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://habr.com/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://habr.com/images/favicon-16x16.png">
<link rel="manifest" href="https://habr.com/site.webmanifest">
<link rel="mask-icon" href="https://habr.com/images/safari-pinned-tab.svg" color="#77a2b6">
<meta name="application-name" content="Хабр">
<meta name="msapplication-TileColor" content="#77a2b6">
<meta name="theme-color" content="#77a2b6">


  <link title="Хабр / Комментарии к публикации «Размышления о стандартной библиотеке JavaScript. Core.js»" type="application/rss+xml" rel="alternate" href="https://habr.com/rss/post/216997/">

<script>/* Font Face Observer v2.0.13 - © Bram Stein. License: BSD-3-Clause */(function(){'use strict';var f,g=[];function l(a){g.push(a);1==g.length&&f()}function m(){for(;g.length;)g[0](),g.shift()}f=function(){setTimeout(m)};function n(a){this.a=p;this.b=void 0;this.f=[];var b=this;try{a(function(a){q(b,a)},function(a){r(b,a)})}catch(c){r(b,c)}}var p=2;function t(a){return new n(function(b,c){c(a)})}function u(a){return new n(function(b){b(a)})}function q(a,b){if(a.a==p){if(b==a)throw new TypeError;var c=!1;try{var d=b&&b.then;if(null!=b&&"object"==typeof b&&"function"==typeof d){d.call(b,function(b){c||q(a,b);c=!0},function(b){c||r(a,b);c=!0});return}}catch(e){c||r(a,e);return}a.a=0;a.b=b;v(a)}}
function r(a,b){if(a.a==p){if(b==a)throw new TypeError;a.a=1;a.b=b;v(a)}}function v(a){l(function(){if(a.a!=p)for(;a.f.length;){var b=a.f.shift(),c=b[0],d=b[1],e=b[2],b=b[3];try{0==a.a?"function"==typeof c?e(c.call(void 0,a.b)):e(a.b):1==a.a&&("function"==typeof d?e(d.call(void 0,a.b)):b(a.b))}catch(h){b(h)}}})}n.prototype.g=function(a){return this.c(void 0,a)};n.prototype.c=function(a,b){var c=this;return new n(function(d,e){c.f.push([a,b,d,e]);v(c)})};
function w(a){return new n(function(b,c){function d(c){return function(d){h[c]=d;e+=1;e==a.length&&b(h)}}var e=0,h=[];0==a.length&&b(h);for(var k=0;k<a.length;k+=1)u(a[k]).c(d(k),c)})}function x(a){return new n(function(b,c){for(var d=0;d<a.length;d+=1)u(a[d]).c(b,c)})};window.Promise||(window.Promise=n,window.Promise.resolve=u,window.Promise.reject=t,window.Promise.race=x,window.Promise.all=w,window.Promise.prototype.then=n.prototype.c,window.Promise.prototype["catch"]=n.prototype.g);}());

(function(){function l(a,b){document.addEventListener?a.addEventListener("scroll",b,!1):a.attachEvent("scroll",b)}function m(a){document.body?a():document.addEventListener?document.addEventListener("DOMContentLoaded",function c(){document.removeEventListener("DOMContentLoaded",c);a()}):document.attachEvent("onreadystatechange",function k(){if("interactive"==document.readyState||"complete"==document.readyState)document.detachEvent("onreadystatechange",k),a()})};function r(a){this.a=document.createElement("div");this.a.setAttribute("aria-hidden","true");this.a.appendChild(document.createTextNode(a));this.b=document.createElement("span");this.c=document.createElement("span");this.h=document.createElement("span");this.f=document.createElement("span");this.g=-1;this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";
this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;";this.b.appendChild(this.h);this.c.appendChild(this.f);this.a.appendChild(this.b);this.a.appendChild(this.c)}
function t(a,b){a.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+b+";"}function y(a){var b=a.a.offsetWidth,c=b+100;a.f.style.width=c+"px";a.c.scrollLeft=c;a.b.scrollLeft=a.b.scrollWidth+100;return a.g!==b?(a.g=b,!0):!1}function z(a,b){function c(){var a=k;y(a)&&a.a.parentNode&&b(a.g)}var k=a;l(a.b,c);l(a.c,c);y(a)};function A(a,b){var c=b||{};this.family=a;this.style=c.style||"normal";this.weight=c.weight||"normal";this.stretch=c.stretch||"normal"}var B=null,C=null,E=null,F=null;function G(){if(null===C)if(J()&&/Apple/.test(window.navigator.vendor)){var a=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);C=!!a&&603>parseInt(a[1],10)}else C=!1;return C}function J(){null===F&&(F=!!document.fonts);return F}
function K(){if(null===E){var a=document.createElement("div");try{a.style.font="condensed 100px sans-serif"}catch(b){}E=""!==a.style.font}return E}function L(a,b){return[a.style,a.weight,K()?a.stretch:"","100px",b].join(" ")}
A.prototype.load=function(a,b){var c=this,k=a||"BESbswy",q=0,D=b||3E3,H=(new Date).getTime();return new Promise(function(a,b){if(J()&&!G()){var M=new Promise(function(a,b){function e(){(new Date).getTime()-H>=D?b():document.fonts.load(L(c,'"'+c.family+'"'),k).then(function(c){1<=c.length?a():setTimeout(e,25)},function(){b()})}e()}),N=new Promise(function(a,c){q=setTimeout(c,D)});Promise.race([N,M]).then(function(){clearTimeout(q);a(c)},function(){b(c)})}else m(function(){function u(){var b;if(b=-1!=
f&&-1!=g||-1!=f&&-1!=h||-1!=g&&-1!=h)(b=f!=g&&f!=h&&g!=h)||(null===B&&(b=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),B=!!b&&(536>parseInt(b[1],10)||536===parseInt(b[1],10)&&11>=parseInt(b[2],10))),b=B&&(f==v&&g==v&&h==v||f==w&&g==w&&h==w||f==x&&g==x&&h==x)),b=!b;b&&(d.parentNode&&d.parentNode.removeChild(d),clearTimeout(q),a(c))}function I(){if((new Date).getTime()-H>=D)d.parentNode&&d.parentNode.removeChild(d),b(c);else{var a=document.hidden;if(!0===a||void 0===a)f=e.a.offsetWidth,
g=n.a.offsetWidth,h=p.a.offsetWidth,u();q=setTimeout(I,50)}}var e=new r(k),n=new r(k),p=new r(k),f=-1,g=-1,h=-1,v=-1,w=-1,x=-1,d=document.createElement("div");d.dir="ltr";t(e,L(c,"sans-serif"));t(n,L(c,"serif"));t(p,L(c,"monospace"));d.appendChild(e.a);d.appendChild(n.a);d.appendChild(p.a);document.body.appendChild(d);v=e.a.offsetWidth;w=n.a.offsetWidth;x=p.a.offsetWidth;I();z(e,function(a){f=a;u()});t(e,L(c,'"'+c.family+'",sans-serif'));z(n,function(a){g=a;u()});t(n,L(c,'"'+c.family+'",serif'));
z(p,function(a){h=a;u()});t(p,L(c,'"'+c.family+'",monospace'))})})};"object"===typeof module?module.exports=A:(window.FontFaceObserver=A,window.FontFaceObserver.prototype.load=A.prototype.load);}());

(function( w ){
if( w.document.documentElement.className.indexOf( "fonts-loaded" ) > -1 ){ return; }

var html = document.documentElement;
var FS500 = new w.FontFaceObserver("Fira Sans", { weight: 500 });

FS500.load().then(function() {
html.classList.add('fonts-loaded');
sessionStorage.fontsLoaded = true;
console.log('FS500-loaded');
}).catch(function () {
sessionStorage.fontsLoaded = false;
console.log('FS500-unloaded');
});

if (sessionStorage.fontsLoaded) {
html.classList.add('fonts-loaded');
}
}(this));
</script>
<script src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/jquery-1.js"></script>
<script>
  window.create_callback_for_blocked = function(key) {
    return function() {
      googletag.cmd.push(function () {
        googletag.display(key);
      });
    }
  }

  window.habr_blockers_checker = new function() {
    var result;
    var callbacksQueue = [];
    var calledOnce = false;

    function fireCallbacks() {
      callbacksQueue.forEach(function(callback) {
        callback(result);
      });
      callbacksQueue = [];
    }

    this.detect = function(imgUrl, callback) {
      var checksRemain = 2;
      var detected = false;
      var error1 = false;
      var error2 = false;

      if (typeof callback !== 'function') {
        return;
      };

      callbacksQueue.push(callback);

      if (typeof result !== 'undefined') {
        fireCallbacks();
      };

      if (calledOnce) {
        return;
      }
      calledOnce = true;

      imgUrl += '?ch=*&rn=*';

      function beforeCheck(timeout) {
        if (checksRemain === 0 || timeout > 1E3) {
          result = checksRemain === 0 && detected;
          fireCallbacks();
        } else {
          setTimeout(function() {
            beforeCheck(timeout * 2)
          }, timeout * 2);
        }
      }

      function checkImages() {
        if (--checksRemain) {
          return;
        };
        detected = !error1 && error2;
      }

      var random = Math.random() * 11;

      var img1 = new Image;
      img1.onload = checkImages;
      img1.onerror = function() {
        error1 = true;
        checkImages()
      };
      img1.src = imgUrl.replace(/\*/, 1).replace(/\*/, random);

      var img2 = new Image;
      img2.onload = checkImages;
      img2.onerror = function() {
        error2 = true;
        checkImages()
      };
      img2.src = imgUrl.replace(/\*/, 2).replace(/\*/, random);

      beforeCheck(250, callback)
    };

    this.detectWrapper = function(callback) {
      return this.detect('/images/px.gif', callback);
    };
  };

  window.display_dfp_slot = function(key) {
    if (window.habr_blockers_checker) {
      window.habr_blockers_checker.detectWrapper(window.create_callback_for_blocked(key));
    } else {
      window.create_callback_for_blocked(key)();
    }
  };
</script>


<script src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/raven.js"></script>
<script>Raven.config('https://a5835779b79f46bbb22add0cda1e4976@s.tmtm.ru/21').install()</script>

<script src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/advertise.js"></script>
<script src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/adriver.js"></script>
<script src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/gpt.js" async=""></script>
<script src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/publishertag.js" async=""></script>

<script>
  var googletag = googletag || {};
  googletag.cmd = googletag.cmd || [];
</script>

<script>
  // TODO: move this code to module
  //       move dot in chains to start of line and use one indent level:
  //               ```
  //                  start()
  //                    .chainEnd()
  //               ```
  function display_yandex_rtb(yandexId, divId) {
    $('#' + divId).show();
    (function(w, d, n, s, t) {
      w[n] = w[n] || [];
      w[n].push(function() {
        Ya.Context.AdvManager.render({
          blockId: yandexId,
          renderTo: divId,
          async: true
        });
      });
      t = d.getElementsByTagName('script')[0];
      s = d.createElement('script');
      s.type = 'text/javascript';
      s.src = '//an.yandex.ru/system/context.js';
      s.async = true;
      t.parentNode.insertBefore(s, t);
    })(this, this.document, 'yandexContextAsyncCallbacks');
  }

  function listen_googletag_and_render_yandex(yandexId, targetDivId) {
    if (!window.googletag || !window.googletag.cmd) {
      return;
    }
    window.googletag.cmd.push(function() {
      if (!window.googletag.pubads) {
        return;
      }

      window.googletag.pubads()
        .addEventListener('slotRenderEnded', function(event) {
          var divId = event.slot.getSlotElementId();
          if (divId === targetDivId && event.isEmpty) {
            window.display_yandex_rtb(yandexId, divId);
          }
        });
    });
  }

  function getRoxotGroupId() {
    try {
      var storageKey = 'roxot-gid';
      var groupId = localStorage.getItem(storageKey);
      if (groupId === null) {
        groupId = 1 + Math.floor(Math.random() * 10000);
        localStorage.setItem(storageKey, groupId);
      }
      return groupId;
    }
    catch (e) {
      return 10001;
    }
  }

  function getRoxotSectorId() {
    try {
      var storageKey = 'roxot-sid';
      var groupId = localStorage.getItem(storageKey);
      if (groupId === null) {
        groupId = 1 + Math.floor(Math.random() * 100);
        localStorage.setItem(storageKey, groupId);
      }
      return groupId;
    }
    catch (e) {
      return 101;
    }
  }

  function getRoxotDeep() {
    try {
      var storageKey = 'roxot-deep';
      var groupId = localStorage.getItem(storageKey);
      if (groupId === null) {
        groupId = 1 + Math.floor(Math.random() * 100);
        localStorage.setItem(storageKey, groupId);
      }
      return groupId;
    }
    catch (e) {
      return 101;
    }
  }
</script>

<script>
  function leftpad(str, len, ch) {
    str = String(str);

    var i = -1;

    if (!ch && ch !== 0) {
      ch = ' ';
    };

    len = len - str.length;

    while (++i < len) {
      str = ch + str;
    }

    return str;
  }

  var WEEK_DAYS = ['su', 'mo', 'tu', 'we', 'th', 'fr', 'sa'];

  function initializeDFP(usesABP) {
    var currentDate = new Date();
    var hours = currentDate.getHours();
    var hoursStr = leftpad(hours, 2, '0');
    var weekDayCode = WEEK_DAYS[currentDate.getDay()];
    googletag.cmd.push(function() {
      if (usesABP) {
  googletag.defineSlot('/235032688/HH/HH01_ATF_Poster', [[300, 500], [300, 250], [300, 300], [300, 400], [300, 200], [300, 100], [240, 400]], 'div-gpt-hh-atf').addService(googletag.pubads());
  window.listen_googletag_and_render_yandex('R-A-149298-31', 'div-gpt-hh-atf');
} else {
  googletag.defineSlot('/235032688/HH/HH01_ATF_Poster', [[300, 500], [300, 600], [300, 250], [300, 300], [300, 400], [300, 200], [300, 150], [300, 100], [240, 400]], 'div-gpt-hh-atf').addService(googletag.pubads());
  window.listen_googletag_and_render_yandex('R-A-149298-35', 'div-gpt-hh-atf');
}
      if (usesABP) {
  googletag.defineSlot('/235032688/HH/HH02_inpage_wide', [[780, 130], [780, 200], [780, 180], [780, 110], [728, 90]], 'div-gpt-hh-inpage-wide').addService(googletag.pubads());
  window.listen_googletag_and_render_yandex('R-A-149298-32', 'div-gpt-hh-inpage-wide');
} else {
  googletag.defineSlot('/235032688/HH/HH02_inpage_wide', [[780, 200], [780, 130], [780, 180], [780, 110], [728, 90], [780, 195], [780, 210], [780, 260]], 'div-gpt-hh-inpage-wide').addService(googletag.pubads());
  window.listen_googletag_and_render_yandex('R-A-149298-36', 'div-gpt-hh-inpage-wide');
}
      if (usesABP) {
  googletag.defineSlot('/235032688/HH/HH03_inpage_Vertical', [[300, 600], [300, 250], [300, 300], [300, 400], [300, 500], [300, 200], [240, 400]], 'div-gpt-hh-inpage-vertical').addService(googletag.pubads());
  //googletag.defineSlot('/235032688/HH/HH03_inpage_Vertical', [[300, 250], [300, 300], [300, 200]], 'div-gpt-hh-inpage-vertical').addService(googletag.pubads());
  window.listen_googletag_and_render_yandex('R-A-149298-33', 'div-gpt-hh-inpage-vertical');
} else {
  googletag.defineSlot('/235032688/HH/HH03_inpage_Vertical', [[300, 600], [300, 250], [300, 300], [300, 400], [300, 500], [300, 200], [240, 400], [160, 600]], 'div-gpt-hh-inpage-vertical').addService(googletag.pubads());
  //googletag.defineSlot('/235032688/HH/HH03_inpage_Vertical', [[300, 250], [300, 300], [300, 200]], 'div-gpt-hh-inpage-vertical').addService(googletag.pubads());
  window.listen_googletag_and_render_yandex('R-A-149298-37', 'div-gpt-hh-inpage-vertical');
}

      googletag.pubads().enableSingleRequest();
      if (!usesABP) {
        googletag.pubads().disableInitialLoad(); //We will wait for the Criteo Bidder Call before calling the adserver
      }
      googletag.pubads().collapseEmptyDivs();
      googletag.pubads().
      setTargeting('roxot-group-id', getRoxotGroupId()).
      setTargeting('roxot-sector-id', getRoxotSectorId()).
      setTargeting('roxot-deep', getRoxotDeep()).
      setTargeting('chr', hoursStr).
      setTargeting('cwd', weekDayCode).
      setTargeting('aa', (usesABP) ? 'yes' : 'no').
      setTargeting('path', window.location.pathname + window.location.search).
      setTargeting('cat', ["h_webdev","h_nodejs","h_javascript","f_develop","t_corejs","t_ecmascript_5","t_ecmascript_6","t_ecmascript_7","t_harmony","t_strawman","t_map","t_set","t_weakmap","t_weakset","t_promise","t_symbol","t_console","t_setimmediate","t_dict","t_итераторы","t_iterators","t_стандартная_библиотека","t_standard_library"]).
      setTargeting('dev', [0]).
      setTargeting('user', ["guest"]).
      setTargeting('pagetype', ["post"]).
      setTargeting('posttype', ["simple"]).
      setTargeting('postid', [216997]);
      googletag.enableServices();

      if (!usesABP) {
        window.Criteo = window.Criteo || {};
        window.Criteo.events = window.Criteo.events || [];
        var launchAdServer = function () {
          googletag.cmd.push(function () {
            Criteo.SetDFPKeyValueTargeting(); //This will append Criteo keywords to the adserver call
            googletag.pubads().refresh(); //This will trigger the adserver call
          });
        };
        Criteo.events.push(function () {
          var adUnits = {
            'placements': [
              {'slotid': 'div-gpt-hh-inpage-wide', 'zoneid': 1173491}, // TMTM - RU - CDB - SA - Habr - 780x180 
              {'slotid': 'div-gpt-hh-atf', 'zoneid': 1173489}, // TMTM - RU - CDB - SA - Habr - 300x600 
              {'slotid': 'div-gpt-hh-inpage-vertical', 'zoneid': 1174054}, // TMTM - RU - CDB - SA - Habr - 300x600 - Inpage 
              {'slotid': 'div-gpt-hh-btf', 'zoneid': 1173488}, // TMTM - RU - CDB - SA - Habr - 300x250 
            ]
          };
          // Define the price band range
          Criteo.SetLineItemRanges('0..599:1;600..1398:2;1400..3000:5');
          // Call Criteo and execute the callback function for a given timeout
          Criteo.RequestBids(adUnits, launchAdServer, 500);
        });
      }
    });
  }
  if (window.habr_blockers_checker) {
    window.habr_blockers_checker.detectWrapper(initializeDFP);
  } else {
    initializeDFP(false);
  }
</script>

<script type="text/javascript">
  function callGA(usesABP) {
    if (typeof window.adb1 === 'undefined') { window.adb1 = 'yes';}
    if (usesABP) { window.adb1 = 'aa'; }

    var user_type = 'guest';

    var page_type = "publish_ugc";

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-726094-1',  'auto');
    ga('create', 'UA-726094-24', 'auto', {'name': 'HGM'});

    ga('require', 'displayfeatures');
    ga('set', 'dimension1', user_type); // user type - guest/readonly/habrauser
    ga('set', 'dimension3', 'na');
    ga('set', 'dimension2', page_type);
    ga('set', 'dimension4', window.adb1);


    (function() {
      var win = window;
      var removeUtms = function(){
        var location = win.location;
        if (location.search.indexOf('utm_') != -1 && history.replaceState) {
          history.replaceState({}, '', window.location.toString().replace(/(\&|\?)utm([_a-z0-9=-]+)/g, ""));
        }
      };
      ga('require', 'GTM-559GVC8');
      ga('send', 'pageview', { 'hitCallback': removeUtms });
    })();

    ga('HGM.set', 'dimension1', user_type);
    ga('HGM.set', 'dimension2', "habrahabr");
    ga('HGM.set', 'dimension4', window.adb1);

    ga('HGM.send', 'pageview');
  }


  if (window.habr_blockers_checker) {
    window.habr_blockers_checker.detectWrapper(callGA);
  } else {
    callGA(false)
  }

</script>

<script>
  var adcm_config ={
    id:1034,
    platformId: 34,
    
    tags: ['hub_webdev', 'hub_nodejs', 'hub_javascript', 'g_programming', 'g_scripting_languages', 'g_development_tools'],
    init: function () {
      window.adcm.call();
    }
  };
</script>
<script src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/adcm.js" async=""></script>

<script async="" src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/AF1Hvaa7qZjZ"></script>
<script>
  window._io_config = window._io_config || {};
  window._io_config["0.2.0"] = window._io_config["0.2.0"] || [];
  window._io_config["0.2.0"].push({
    "page_url": "https:\/\/habr.com\/post\/216997\/",
    "page_url_canonical": "https:\/\/habr.com\/post\/216997\/",
    "page_title": "Размышления о стандартной библиотеке JavaScript. Core.js",
    "page_type": "article",
    "page_language": "ru",
    "article_authors": [
        "rock"
    ],
    "article_categories": [
        "h_webdev",
        "h_nodejs",
        "h_javascript",
        "f_develop"
    ],
    "article_type": "simple",
    "article_publication_date": "Tue, 18 Nov 14 14:57:02 +0300"
});
</script>


  <script src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/processor.js"></script><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1px; bottom: 2px; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><link rel="preload" href="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/integrator.js" as="script"><script type="text/javascript" src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/integrator.js"></script><link rel="preload" href="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/integrator_002.js" as="script"><script type="text/javascript" src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/integrator_002.js"></script><script src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/pubads_impl_233.js" async=""></script><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><style type="text/css">.MathJax_SVG_Display {text-align: center; margin: 1em 0em; position: relative; display: block!important; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%}
.MathJax_SVG .MJX-monospace {font-family: monospace}
.MathJax_SVG .MJX-sans-serif {font-family: sans-serif}
#MathJax_SVG_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; padding: 3px 4px; z-index: 401; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
.MathJax_SVG {display: inline; font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0}
.MathJax_SVG * {transition: none; -webkit-transition: none; -moz-transition: none; -ms-transition: none; -o-transition: none}
.mjx-svg-href {fill: blue; stroke: blue}
.MathJax_SVG_Processing {visibility: hidden; position: absolute; top: 0; left: 0; width: 0; height: 0; overflow: hidden; display: block!important}
.MathJax_SVG_Processed {display: none!important}
.MathJax_SVG_ExBox {display: block!important; overflow: hidden; width: 1px; height: 60ex; min-height: 0; max-height: none; padding: 0; border: 0; margin: 0}
.MathJax_SVG_LineBox {display: table!important}
.MathJax_SVG_LineBox span {display: table-cell!important; width: 10000em!important; min-width: 0; max-width: none; padding: 0; border: 0; margin: 0}
.MathJax_SVG .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><script src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/extension_1034.js"></script></head>

  <body class="nl"><div style="visibility: hidden; overflow: hidden; position: absolute; top: 0px; height: 1px; width: auto; padding: 0px; border: 0px none; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><div id="MathJax_SVG_Hidden"></div><svg><defs id="MathJax_SVG_glyphs"></defs></svg></div><div id="MathJax_Message" style="display: none;"></div>
    <div class="layout">
      <div class="layout__row layout__row_services">
        <div id="TMpanel">
  <div class="container">
    <div class="bmenu">
      <a href="https://tmfeed.ru/?utm_source=tm_habrahabr&amp;utm_medium=tm_top_panel&amp;utm_campaign=tm_promo">TM Feed</a>
      <a href="https://habr.com/?utm_source=tm_habrahabr&amp;utm_medium=tm_top_panel&amp;utm_campaign=tm_promo" class="current">Хабр</a>
      <a href="https://habr.com/flows/geektimes/">Geektimes</a>
      <a href="https://toster.ru/?utm_source=tm_habrahabr&amp;utm_medium=tm_top_panel&amp;utm_campaign=tm_promo">Тостер</a>
      <a href="https://moikrug.ru/?utm_source=tm_habrahabr&amp;utm_medium=tm_top_panel&amp;utm_campaign=tm_promo">Мой круг</a>
      <a href="https://freelansim.ru/?utm_source=tm_habrahabr&amp;utm_medium=tm_top_panel&amp;utm_campaign=tm_promo">Фрилансим</a>
    </div>
      <div class="bmenu_inner" style="display:inline-block!important;visibility:visible!important;">
        <span class="bmenu__label">Мегапосты:</span>
        <span class="bmenu slink"><a href="https://u.tmtm.ru/UmLF0" target="_blank" style="color: #3c86ee" rel=" noopener">Видеодоговор</a><a href="https://u.tmtm.ru/9GoTT" target="_blank" style="color: #31B007" rel=" noopener">Финтех в метро</a><a href="https://u.tmtm.ru/l69Wy" target="_blank" style="color: #00008B" rel=" noopener">Зарплаты в IT</a></span>
      </div>
  </div>
</div>

      </div>

      <div class="layout__row layout__row_navbar">
        <div class="layout__cell">
          <div class="main-navbar">
  <div class="main-navbar__section main-navbar__section_left">
    <span class="logo-wrapper">
      <a href="https://habr.com/" class="logo" title="">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon-svg icon-svg_logo-habrahabr" width="71" height="26" viewBox="0 0 92 32"><path d="M6.827 12.278c1.273-1.735 3.304-2.848 5.595-2.848l.521.019-.023-.001c4.272 0 7.587 2.988 7.587 7.941v14.047h-6.827v-11.636c0-2.529-1.31-3.931-3.381-3.931-1.9 0-3.473 1.31-3.473 4.062v11.505h-6.827v-31.45h6.827zM46.611 31.437h-6.552v-2.319c-1.357 1.764-3.468 2.89-5.843 2.89l-.332-.007.016.001c-5.713 0-9.946-4.98-9.946-11.296s4.233-11.256 9.972-11.256l.288-.006c2.378 0 4.491 1.131 5.832 2.884l.013.018v-2.306h6.552zm-15.725-10.72c0 2.533 2.053 4.586 4.586 4.586s4.586-2.053 4.586-4.586c0-2.533-2.053-4.586-4.586-4.586s-4.586 2.053-4.586 4.586zM73.959 20.704c0 6.316-4.246 11.296-9.959 11.296l-.342.008c-2.354 0-4.446-1.116-5.778-2.848l-.013-.017v2.293h-6.552v-31.45h6.814v12.095c1.343-1.61 3.351-2.628 5.596-2.628l.329.007-.016-.001c5.674-.013 9.92 4.94 9.92 11.243zm-16.157 0c0 2.533 2.053 4.586 4.586 4.586s4.586-2.053 4.586-4.586c0-2.533-2.053-4.586-4.586-4.586s-4.586 2.053-4.586 4.586zM92.318 9.776l-.59 6.801c-1.019-.342-2.193-.547-3.412-.563h-.008c-.15-.023-.323-.036-.498-.036-1.911 0-3.459 1.549-3.459 3.459 0 .151.01.3.029.447l-.002-.017v11.571h-6.84v-21.399h6.552v2.464c1.124-1.85 3.128-3.068 5.417-3.068l.448.016-.02-.001h.022c.842 0 1.655.12 2.425.343l-.061-.015z"></path></svg>

      </a>
      
    </span>
    <ul class="nav-links" id="navbar-links">
  <li class="nav-links__item">
    <a href="https://habr.com/" class="nav-links__item-link ">Публикации</a>
  </li>
  <li class="nav-links__item">
    <a href="https://habr.com/users/" class="nav-links__item-link ">Пользователи</a>
  </li>
  <li class="nav-links__item">
    <a href="https://habr.com/hubs/" class="nav-links__item-link ">Хабы</a>
  </li>
  <li class="nav-links__item">
    <a href="https://habr.com/companies/" class="nav-links__item-link ">Компании</a>
  </li>
  <li class="nav-links__item">
    <a href="https://habr.com/sandbox/" class="nav-links__item-link ">Песочница</a>
  </li>
</ul>
    <form action="/search/#h" method="get" class="search-form" id="search-form">
  <button type="button" class="btn btn_navbar_search icon-svg_search" id="search-form-btn" title="Поиск по сайту">
    <svg class="icon-svg" width="32" height="32" viewBox="0 0 32 32" aria-hidden="true" version="1.1" role="img"><path d="M21.416 13.21c0 4.6-3.65 8.34-8.14 8.34S5.11 17.81 5.11 13.21c0-4.632 3.65-8.373 8.167-8.373 4.488 0 8.14 3.772 8.14 8.372zm1.945 7.083c1.407-2.055 2.155-4.57 2.155-7.084C25.515 6.277 20.04.665 13.277.665S1.04 6.278 1.04 13.21c0 6.93 5.475 12.542 12.237 12.542 2.454 0 4.907-.797 6.942-2.208l7.6 7.79 3.14-3.22-7.6-7.82z"></path></svg>
  </button>
  <label class="search-form__field-wrapper">
    <input name="q" class="search-form__field" id="search-form-field" placeholder="Поиск" tabindex="-1" type="text">
    <button type="button" class="btn btn_search-close" id="search-form-clear" title="Закрыть">
      <svg class="icon-svg icon-svg_navbar-close-search" width="31" height="32" viewBox="0 0 31 32" aria-hidden="true" version="1.1" role="img"><path d="M26.67 0L15.217 11.448 3.77 0 0 3.77l11.447 11.45L0 26.666l3.77 3.77L15.218 18.99l11.45 11.448 3.772-3.77-11.448-11.45L30.44 3.772z"></path></svg>

    </button>
  </label>
</form>

  </div>

  <div class="main-navbar__section main-navbar__section_right">
      <a href="https://habr.com/auth/login/" id="login" class="btn btn_medium btn_navbar_login">Войти</a>
      <a href="https://habr.com/auth/register/" class="btn btn_medium btn_navbar_registration">Регистрация</a>


  </div>
</div>

        </div>
      </div>

      <div class="layout__row layout__row_body">
        <div class="layout__cell layout__cell_body">
          
          



<section class="column-wrapper column-wrapper_post js-sticky-wrapper">
  <div class="content_left js-content_left">
    
    <article class="post post_full" id="post_216997">
  <div class="post__wrapper">
    <header class="post__meta">
      <a href="https://habr.com/users/rock/" class="post__user-info user-info" title="Автор публикации">
          <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/4a0778fd67c81e90eae402d2ea40d49c.gif" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
        <span class="user-info__nickname user-info__nickname_small">rock</span>
      </a>

      <span class="post__time">18 ноября 2014 в 14:57</span>

      
    </header>

    <h1 class="post__title post__title_full">
      <span class="post__title-text">Размышления о стандартной библиотеке JavaScript. Core.js</span>
    </h1>


      <ul class="post__hubs post__hubs_full-post inline-list">
          <li class="inline-list__item inline-list__item_hub">
            <a href="https://habr.com/hub/webdev/" class="inline-list__item-link hub-link " title="Вы не подписаны на этот хаб" onclick="if (typeof ga === 'function') { ga('send', 'event', 'hub', 'post page', 'Разработка веб-сайтов'); }">Разработка веб-сайтов</a>, 
          </li>
          <li class="inline-list__item inline-list__item_hub">
            <a href="https://habr.com/hub/nodejs/" class="inline-list__item-link hub-link " title="Вы не подписаны на этот хаб" onclick="if (typeof ga === 'function') { ga('send', 'event', 'hub', 'post page', 'Node.JS'); }">Node.JS</a>, 
          </li>
          <li class="inline-list__item inline-list__item_hub">
            <a href="https://habr.com/hub/javascript/" class="inline-list__item-link hub-link " title="Вы не подписаны на этот хаб" onclick="if (typeof ga === 'function') { ga('send', 'event', 'hub', 'post page', 'JavaScript'); }">JavaScript</a>
          </li>
      </ul>

    <ul class="post__marks inline-list"></ul>


    <div class="post__body post__body_full">
      <div data-io-article-url="https://habr.com/post/216997/" class="post__text post__text-html js-mediator-article"><blockquote>Один
 пацан писал все на JavaScript, и клиент, и сервер, говорил что 
нравится, удобно, читабельно. Потом его в дурку забрали, конечно.<br>
<i><b>— С просторов интернета</b></i></blockquote><br>
К чему это я? Занятная штука — JavaScript. Основа современного web и на фронтэнде альтернатив как таковых не имеет.<br>
<br>
JavaScript это, в том числе, и <a href="http://ru.wikipedia.org/wiki/%D1%F2%E0%ED%E4%E0%F0%F2%ED%E0%FF_%E1%E8%E1%EB%E8%EE%F2%E5%EA%E0">стандартная библиотека</a>,
 о которой здесь и пойдёт речь. Под стандартной библиотекой я 
подразумеваю модули, конструкторы, методы, что должны присутствовать на 
любой платформе, будь то браузер или сервер, без лишних действий со 
стороны программиста, не включая API, специфичный для платформы. Даже 
если вы пишите не на JavaScript, а на языке в него компилируемом, скорее
 всего, вам придется иметь дело с его стандартной библиотекой.<br>
<br>
Ванильная стандартная библиотека JavaScript, в целом, неплоха. Это не 
только стандартная библиотека по спецификации языка ECMA-262 актуальных 
версий — от 3 до черновика 6. Часть API вынесена в отдельные 
спецификации, например, API интернационализации ECMA-402. Многие 
возможности, без которых сложно представить JavaScript, например, <code>setTimeout</code>, относятся к web-стандартам. Консоль не стандартизована вовсе — приходится полагаться на стандарт де-факто.<br>
<br>
Вот только не такая уж она и стандартная — везде разная. Есть старые IE,
 в которых из коробки мы получаем стандартную библиотеку ES3 
90-бородатого года даже без <code>Array#forEach, Function#bind, Object.create</code> и консоли, и есть, например, Node.js, на которой многие уже вовсю используют возможности грядущего ES6.<br>
<br>
Хочется иметь универсальную, действительно стандартную библиотеку, как 
на сервере, так и в любом браузере, максимально соответствующую 
современным стандартам, а также реализующую необходимый функционал, что 
(пока?) не стандартизован. Статья посвящена библиотеке <b><a href="https://github.com/zloirock/core-js">core.js</a></b>
 — реализация моих соображений по поводу стандартной библиотеки 
JavaScript. Кроме того, эта статья еще и шпаргалка по современной 
стандартизованной стандартной библиотеке JavaScript и заметки о её 
перспективах.<br>
<br>
<h4><b>Содержание, или что получим на выходе:</b></h4><br>
<ul>
<li><h5><a href="https://habr.com/post/216997/#approach">Подходы</a></h5></li>
<li> <h5><a href="https://habr.com/post/216997/#I">Часть первая: Костыли</a></h5><br>
 <ul>
<li><a href="https://habr.com/post/216997/#es5">ECMAScript 5</a></li>
<li><a href="https://habr.com/post/216997/#es6">ECMAScript 6</a></li>
<li><a href="https://habr.com/post/216997/#es6-symbol">ECMAScript 6: Символы</a></li>
<li><a href="https://habr.com/post/216997/#es6-collections">ECMAScript 6: Коллекции</a></li>
<li><a href="https://habr.com/post/216997/#es6-iterators">ECMAScript 6: Итераторы</a></li>
<li><a href="https://habr.com/post/216997/#es6-promise">ECMAScript 6: Обещания</a></li>
<li><a href="https://habr.com/post/216997/#array-generics">Mozilla JavaScript: Статические версии методов массива</a></li>
<li><a href="https://habr.com/post/216997/#schedule">Отложенное исполнение: setTimeout, setInterval, setImmediate</a></li>
<li><a href="https://habr.com/post/216997/#console">Консоль</a></li>
</ul><br>
 </li>
<li> <h5><a href="https://habr.com/post/216997/#II">Часть вторая: Велосипеды</a></h5><br>
 <ul>
<li><a href="https://habr.com/post/216997/#classify">Классификация данных</a></li>
<li><a href="https://habr.com/post/216997/#dict">Словари</a></li>
<li><a href="https://habr.com/post/216997/#partial-application">Частичное применение</a></li>
<li><a href="https://habr.com/post/216997/#date-format">Форматирование даты</a></li>
<li><a href="https://habr.com/post/216997/#object">Объектное API</a></li>
<li><a href="https://habr.com/post/216997/#array">Массивы</a></li>
<li><a href="https://habr.com/post/216997/#num">Числа</a></li>
<li><a href="https://habr.com/post/216997/#escape">Экранирование спецсимволов</a></li>
</ul><br>
 </li>
<li><h5><a href="https://habr.com/post/216997/#end">Заключение</a></h5></li>
</ul><a name="habracut"></a><br>
Предупреждаю, многабукф и первые главы довольно банальны, нет желания 
читать всё — оглавление выше, листайте до интересующего вас раздела.<br>
<br>
<a name="approach"></a><h2><b><a href="#approach">#</a> Подходы</b></h2><hr><br>
Основных подхода к созданию библиотек, что можно назвать стандартными, в JavaScript три:<br>
<br>
Первый — <b>использование только <a href="http://en.wikipedia.org/wiki/Polyfill">полифилов</a>, только стандартизованного функционала</b>.
 Железобетонная уверенность в том, что со временем API не сломается. Для
 работы с такой библиотекой её знание не нужно, нужно только знание 
соответствующего API языка. Обычно, полифилы ограничены одним стандартом
 или его частью. Например, <a href="https://github.com/es-shims/es5-shim"><b>es5-shim</b></a> или <a href="https://github.com/paulmillr/es6-shim"><b>es6-shim</b></a>.
 По этой причине, для обеспечения возможностей, что хотелось бы иметь по
 умолчанию, приходится подключать несколько полифилов. Их внутренние 
компоненты часто дублируют друг друга, так что такой набор часто 
разрастается до сотен килобайт. Да и не все возможности, что хотелось бы
 иметь, стандартизованы. Возможность конфликтов с другими библиотеками 
незначительна, но в качестве зависимости при написании библиотеки их 
использовать я бы не стал.<br>
<br>
Второй — <b>набор утилит в собственном пространстве имён</b>. Либо экспорт в модульной системе, либо создание одного глобального объекта. Например, <a href="http://underscorejs.org/"><b>Undescore</b></a> или её форк <a href="https://lodash.com/"><b>LoDash</b></a>.
 Обычно, довольно компактен, но возможности ограничиваются набором 
простых утилит. Так как не расширяет нативные объекты и часто 
присутствует метод <code>noConflict</code>, откатывающий изменения, 
возможность конфликтов с другими библиотеками минимальна, лучше других 
упомянутых здесь способов подходит как безопасная зависимость для других
 библиотек.<br>
<br>
Третий — <b>расширение нативних объектов не только стандартизованным функционалом</b>.
 Например, добавление собственных методов в прототип массива, что обычно
 удобнее передачи массива в функцию. Сейчас в этой категории рулит <a href="http://sugarjs.com/"><b>Sugar</b></a>, в своё время — <a href="http://mootools.net/"><b>MooTools</b></a> и <a href="http://prototypejs.org/"><b>Prototype</b></a>.
 Добавляют много полезного функционала, но часто методы почти полностью 
дублируют друг друга. Здесь бы развернуться полифилам — но из полифилов 
подобные библиотеки обычно ограничиваются методами прототипа массива, <code>Function#bind</code>
 и еще несколькими, игнорируя большую часть стандартов. Что же касается 
конфликтов, то здесь всё совсем плохо. Подобные библиотеки часто 
расширяют нативные объекты методами с одним именем, но разной 
сигнатурой. Во избежание конфликтов, при разработке конечного приложения
 не стоит применять больше одной библиотеки, расширяющей нативные 
объекты, не считая полифилов, а при написании библиотеки такие 
зависимости вообще недопустимы.<br>
<br>
Вместо одной универсальной стандартной библиотеки, для обеспечения 
возможностей, которые бы хотелось иметь без лишних заморочек, мы 
вынуждены тянуть солянку из <i>Undescore / LoDash / Sugar + es5-shim, es6-shim, es6-symbol, setImmediate.js / asap, Moment.js / Intl.js, заглушку консоли</i>… и так далее.<br>
<br>
<a name="concept"></a><b><a href="#concept">#</a></b> Попытаемся взять лучшее у каждого из данных подходов. <b>Концепция core.js такова</b>:<br>
<br>
<ul>
<li>В стандартной библиотеке должен быть весь необходимый для комфортной
 работы минимум возможностей, не включающий в себя возможности для 
работы с API конкретной платформы.</li>
<li>Стандарты — наше всё. Основная часть библиотеки — полифилы. Вот только не весь необходимый функционал стандартизован.</li>
<li>Если функционал, имеющийся в системе, реализован по спецификации или
 стандарту де-факто, оставляем нативный, но если функционал не 
стандартизован — во избежание конфликтов в будущем, замещаем 
принудительно.</li>
<li>Библиотека должна быть компактной и хорошо сжиматься.</li>
<li>Модульность, возможность собрать только необходимый функционал.</li>
<li>Пишите конечное приложение — вы здесь царь и бог и имеете полное 
право использовать библиотеку, расширяющую нативные объекты. Главное, 
что бы это делала только одна библиотека.</li>
<li>Пишите библиотеку или npm модуль — использовать библиотеку, 
расширяющую нативные объекты, нельзя ни в коем случае. Рискуете обречь 
на конфликты программиста, пишущего конечное приложение. На этот случай 
есть возможность сборки без их расширения.</li>
</ul><br>
<a name="example"></a><b><a href="#example">#</a></b> В случае обычной сборки, работа с <b>core.js</b> вполне очевидна:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.from(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Set</span></span>([<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]))); <span class="hljs-comment"><span class="hljs-comment">// =&gt; [1, 2, 3]</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'*'</span></span>.repeat(<span class="hljs-number"><span class="hljs-number">10</span></span>));                       <span class="hljs-comment"><span class="hljs-comment">// =&gt; '**********'</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.resolve(<span class="hljs-number"><span class="hljs-number">32</span></span>).then(<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log);             <span class="hljs-comment"><span class="hljs-comment">// =&gt; 32</span></span>
setImmediate(<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log, <span class="hljs-number"><span class="hljs-number">42</span></span>);                     <span class="hljs-comment"><span class="hljs-comment">// =&gt; 42</span></span>
</code></pre><br>
<a name="example-library"></a><b><a href="#example-library">#</a></b> В случае сборки без расширения нативных объектов, функционал экспортируется либо в глобальный объект <code>core</code>, либо в модульную систему. Например, конструктор <code>Promise</code> доступен как <code>core.Promise</code>, а метод <code>Array.from</code> как <code>core.Array.from</code>.
 Методы, предназначенные к добавлению в прототип уже существующих, а не 
добавляемых библиотекой, конструкторов становятся статическими, 
например, <code>core.String.repeat</code> это статическая версия метода <code>String.prototype.repeat</code>.<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> log  = core.console.log;
log(core.Array.from(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> core.Set([<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]))); <span class="hljs-comment"><span class="hljs-comment">// =&gt; [1, 2, 3]</span></span>
log(core.String.repeat(<span class="hljs-string"><span class="hljs-string">'*'</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>));                    <span class="hljs-comment"><span class="hljs-comment">// =&gt; '**********'</span></span>
core.Promise.resolve(<span class="hljs-number"><span class="hljs-number">32</span></span>).then(log);                  <span class="hljs-comment"><span class="hljs-comment">// =&gt; 32</span></span>
core.setImmediate(log, <span class="hljs-number"><span class="hljs-number">42</span></span>);                          <span class="hljs-comment"><span class="hljs-comment">// =&gt; 42</span></span>
</code></pre><br>
Сборка, содержащая только полифилы, соответственно, только их и 
добавляет. Собственно, в примере с обычной сборки только полифилы и 
используются.<br>
<br>
<a name="node"></a><b><a href="#node">#</a></b> Установка на Node.js:<br>
<br>
<pre><code class="javascript hljs">npm i core-js
</code></pre><br>
Подключить можно на выбор одну из сборок:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Максимальная сборка:</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'core-js'</span></span>);
<span class="hljs-comment"><span class="hljs-comment">// Сборка без расширения нативных объектов:</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> core = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'core-js/library'</span></span>);
<span class="hljs-comment"><span class="hljs-comment">// Сборка, содержащая только полифилы:</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'core-js/shim'</span></span>);
</code></pre><br>
<a name="browser-builds"></a><b><a href="#browser-builds">#</a></b> <a href="https://github.com/zloirock/core-js/tree/master/client">Сборки для браузера</a>:<br>
<br>
<ul>
<li>Максимальная: <a href="https://raw.githubusercontent.com/zloirock/core-js/master/client/core.js">development</a>, <a href="https://raw.githubusercontent.com/zloirock/core-js/master/client/core.min.js">production</a> (21.8 кб без учёта gzip)</li>
<li>Без расширения нативных объектов: <a href="https://raw.githubusercontent.com/zloirock/core-js/master/client/library.js">development</a>, <a href="https://raw.githubusercontent.com/zloirock/core-js/master/client/library.min.js">production</a> (21.8 кб без учёта gzip)</li>
<li>Только полифилы: <a href="https://raw.githubusercontent.com/zloirock/core-js/master/client/shim.js">development</a>, <a href="https://raw.githubusercontent.com/zloirock/core-js/master/client/shim.min.js">production</a> (16.7 кб без учёта gzip)</li>
</ul><br>
<a name="custom-builds"></a><b><a href="#custom-builds">#</a></b> Если 
же вас не устраивает ни одна из этих сборок, можно сделать свою 
собственную. Например, вам нужны только модуль консоли и простое 
форматирование даты, притом без расширения нативных объектов. Для этого 
ставим Node.js, после чего устанавливаем grunt-cli, core-js с 
необходимыми для сборки зависимостями и собираем:<br>
<br>
<pre><code class="javascript hljs">npm i -g grunt-cli
npm i core-js
cd node_modules/core-js &amp;&amp; npm i
grunt build:date,<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>,library --path=custom uglify
</code></pre><br>
В итоге, получим файлы <code>custom.js</code>, <code>custom.min.js</code> весом 4.8кб и <code>custom.min.map</code>. Флаг <code>library</code> указывает на сборку без расширения нативных объектов. Посмотреть, к какому модулю относится необходимый функционал, можно <a href="https://github.com/zloirock/core-js#api">здесь</a> (последний столбец).<br>
<br>
<a name="I"></a><h1><b><a href="#I">#</a> Часть первая: Костыли</b></h1><hr>Если
 кто не понял, под костылями, в контексте статьи, подразумеваются 
полифилы стандартизованного функционала, имеющиеся в библиотеке. Итак, 
поехали:<br>
<br>
<a name="es5"></a><h2><b><a href="#es5">#</a> ECMAScript 5</b></h2><hr><br>
Пожалуй, все знают, что добавляет ECMAScript 5 в стандартную библиотеку.
 Вымерли почти все браузеры, не поддерживающие ES5. За исключением 
старых IE. До сих пор, заказчики часто просят поддержку IE8, а в самых 
упоротых случаях даже IE6. Надеюсь, в ближайшее время ситуация 
изменится. Самым популярным полифилом ES5 является <a href="https://github.com/es-shims/es5-shim">этот es5-shim</a>,
 часть возможностей присутствует в Sugar, MooTools, Prototype, но только
 часть. Так как это далеко не новинка, обойдемся без лишних подробностей
 — краткое описание и, если нужно, некоторые особенности реализации. 
Само собой, важно помнить, что если код пишется с поддержкой IE8-, ни о 
какой работе с дескрипторами не может быть и речи.<br>
<br>
<a name="es5-array"></a><h4><b><a href="#es5-array">#</a> Методы массива</b></h4><br>
<a name="es5-array-proto"></a><b><a href="#es5-array-proto">#</a></b> Начнем с методов прототипа массива. Это всем известные:<br>
<br>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf">Array#indexOf</a> возвращает индекс первого элемента, равного указанному значению, или <code>-1</code>, если значение не найдено.<br>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/lastIndexOf">Array#lastIndexOf</a> аналогичен предыдущему, но возвращает индекс последнего элемента.<br>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach">Array#forEach</a> вызывает функцию для каждого элемента массива.<br>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map">Array#map</a> возвращает новый массив с результатом вызова функции для каждого элемента данного массива.<br>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter">Array#filter</a> возвращает новый массив со всеми элементами этого массива, удовлетворяющими условию проверяющей функции.<br>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/every">Array#every</a> проверяет, каждый ли элемент в массиве удовлетворяет условию проверяющей функции.<br>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some">Array#some</a> проверяет, есть ли хотя бы один элемент массива, удовлетворяющий условию проверяющей функции.<br>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce">Array#reduce</a> выполняет свертку массива с применением функции, слева — направо.<br>
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/ReduceRight">Array#reduceRight</a> выполняет свертку массива с применением функции, справа — налево.<br>
<br>
<pre><code class="javascript hljs">[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>].indexOf(<span class="hljs-number"><span class="hljs-number">2</span></span>);     <span class="hljs-comment"><span class="hljs-comment">// =&gt; 1</span></span>
[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>].lastIndexOf(<span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 3</span></span>
[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>].forEach(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">val, key</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(val);             <span class="hljs-comment"><span class="hljs-comment">// =&gt; 1, 2, 3</span></span>
  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(key);             <span class="hljs-comment"><span class="hljs-comment">// =&gt; 0, 1, 2</span></span>
});
[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>].map(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">it</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> it * it;
});                             <span class="hljs-comment"><span class="hljs-comment">// =&gt; [1, 4, 9]</span></span>
[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>].filter(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">it</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> it % <span class="hljs-number"><span class="hljs-number">2</span></span>;
});                             <span class="hljs-comment"><span class="hljs-comment">// =&gt; [1, 3]</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isNum</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">it</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> it == <span class="hljs-string"><span class="hljs-string">'number'</span></span>;
}
[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'2'</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>].every(isNum);       <span class="hljs-comment"><span class="hljs-comment">// =&gt; false</span></span>
[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'2'</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>].some(isNum);        <span class="hljs-comment"><span class="hljs-comment">// =&gt; true</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a + b;
}
[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>].reduce(add);          <span class="hljs-comment"><span class="hljs-comment">// =&gt; 6</span></span>
[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>].reduceRight(add, <span class="hljs-string"><span class="hljs-string">''</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; '321'</span></span>
</code></pre><br>
Данные методы реализуются элементарно, но есть одна особенность. Методы массива — <a href="https://ru.wikipedia.org/wiki/%CE%E1%EE%E1%F9%B8%ED%ED%EE%E5_%EF%F0%EE%E3%F0%E0%EC%EC%E8%F0%EE%E2%E0%ED%E8%E5">дженерики</a> и могут быть вызваны в контексте не только массива, но и любого array-like объекта, подробнее об этом <a href="#array-generics"># будет ниже</a>. Так вот, по спецификации ES5 строки являются array-like объектами, букву строки можно получить по индексу, например, <code>'string'[2] // =&gt; 'r'</code>,
 а в старых IE таковыми они не является. В случае применения данных 
методов в контексте строк, приводим строки к массиву. Для решения этой 
же проблемы, при необходимости подменяем в старых IE <code>Array#slice</code> и <code>Array#join</code>.<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.prototype.map.call(<span class="hljs-string"><span class="hljs-string">'123'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">it</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> it * it;
});                                    <span class="hljs-comment"><span class="hljs-comment">// =&gt; [1, 4, 9]</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.prototype.slice.call(<span class="hljs-string"><span class="hljs-string">'qwe'</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>);  <span class="hljs-comment"><span class="hljs-comment">// =&gt; ['w', 'e']</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.prototype.join.call(<span class="hljs-string"><span class="hljs-string">'qwe'</span></span>, <span class="hljs-string"><span class="hljs-string">'|'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'q|w|e'</span></span>
</code></pre><br>
Ну и не забывайте древнюю истину: <b>никогда не обходите массив циклом <code>for-in</code></b>.
 Это не только медленно, но и вынуждает, если нужна поддержка IE8-, 
проверять, является ли ключ собственным — иначе выполните обход не 
только элементов массива, но и методов его прототипа :)<br>
<br>
<a name="es5-is-array"></a><b><a href="#es5-is-array">#</a></b> К этой же категории относится статический метод <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray">Array.isArray</a>.
 Метод проверяет, является ли объект массивом не по цепочке прототипов, а
 по внутреннему классу. Полезно, но не универсально. О классификации 
объектов подробно мы поговорим <a href="#classof"># во второй, велосипедной, части статьи</a>.<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.isArray([<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>]);                      <span class="hljs-comment"><span class="hljs-comment">// =&gt; true</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.isArray(<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.create(<span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.prototype)); <span class="hljs-comment"><span class="hljs-comment">// =&gt; false</span></span>
</code></pre><br>
<a name="es5-object"></a><h4><b><a href="#es5-object">#</a> Объектное API</b></h4><br>
Полная эмуляция всех методов объектного API ECMAScript 5 на базе 
ECMAScript 3 невозможна, частичная — возможна для многих. ES5 добавляет в
 объектное API следующие категории методов: работа с прототипом 
(создание из / получение), получение ключей объекта, работа с 
дескрипторами.<br>
<br>
<a name="es5-create"></a><a href="#es5-create"><b>#</b></a> Метод <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create">Object.create</a> создает объект из прототипа. Передав <code>null</code>, можно создать объект без прототипа, что сделать на базе ECMAScript 3 невозможно. Приходится использовать лютый трэш на базе <code>iframe</code>. Зачем это нам будет раскрыто <a href="#dict"># во второй части</a>. Опционально принимает объект <a href="#es5-desc"># дескрипторов</a>, аналогично <code>Object.defineProperties</code>.<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Parent</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">/*...*/</span></span></span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">/*...*/</span></span> }
Parent.prototype = {<span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>: Parent /*, ... */}
function Child(/*...*/){
  Parent.call(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> <span class="hljs-comment"><span class="hljs-comment">/*, ...*/</span></span>);
  <span class="hljs-comment"><span class="hljs-comment">// ...</span></span>
}
<span class="hljs-comment"><span class="hljs-comment">// Было в ES3 (нутрянка всяких inherit и extend'ов):</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Tmp</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{}
Tmp.prototype = Parent.prototype;
Child.prototype = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Tmp;
Child.prototype.constructor = Child;
<span class="hljs-comment"><span class="hljs-comment">// Стало с ES5:</span></span>
Child.prototype = <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.create(Parent.prototype, {<span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>: {value: Child}});

<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dict = <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.create(<span class="hljs-literal"><span class="hljs-literal">null</span></span>);
dict.key = <span class="hljs-number"><span class="hljs-number">42</span></span>;
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(dict <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; false</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(dict.toString)           <span class="hljs-comment"><span class="hljs-comment">// =&gt; undefined</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(dict.key)                <span class="hljs-comment"><span class="hljs-comment">// =&gt; 42</span></span>
</code></pre><br>
<a name="es5-getPrototypeOf"></a><a href="#es5-getPrototypeOf"><b>#</b></a> Метод <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getPrototypeOf">Object.getPrototypeOf</a>
 возвращает прототип объекта. В ECMAScript 3 нет гарантированного 
способа получения прототипа объекта. Если объект содержит свойство <code>constructor</code>, возможно прототипом будет <code>constructor.prototype</code>. Для объектов, созданных через <code>Object.create</code>, добавим <a href="#es6-symbol"># символ</a>, содержащий прототип, и будем игнорировать его при <a href="#es5-keys"># получении ключей</a>. Но на инстансе конструктора, прототип которого был переопределен без указания «правильного» свойства <code>constructor</code>, <code>Object.getPrototypeOf</code> будет работать некорректно.<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> parent = {foo: <span class="hljs-string"><span class="hljs-string">'bar'</span></span>}
  , child  = <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.create(parent);
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.getPrototypeOf(child) === parent);      <span class="hljs-comment"><span class="hljs-comment">// =&gt; true</span></span>

<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">F</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{}
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.getPrototypeOf(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> F) === F.prototype); <span class="hljs-comment"><span class="hljs-comment">// =&gt; true</span></span>

F.prototype = {<span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>: F /*, ...*/};
console.log(Object.getPrototypeOf(new F) === F.prototype); // =&gt; true

F.prototype = {};
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.getPrototypeOf(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> F) === F.prototype); <span class="hljs-comment"><span class="hljs-comment">// В IE8- будет работать некорректно</span></span>
</code></pre><br>
<a name="es5-keys"></a><a href="#es5-keys"><b>#</b></a> Метод <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys">Object.keys</a> возвращает массив собственных перечисляемых ключей объекта. <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyNames">Object.getOwnPropertyNames</a> возвращает массив собственных ключей объекта, в т.ч. и неперечисляемых. С <code>Object.keys</code>, вроде, всё просто — перебираем объект через <code>for-in</code> и проверяем, являются ли свойства собственными. Если бы не <a href="https://developer.mozilla.org/en-US/docs/ECMAScript_DontEnum_attribute#JScript_DontEnum_Bug">баг с «неперечисляемыми перечисляемыми» свойствами</a>
 в IE. Так что приходится проверять наличие таковых свойств отдельно. 
Аналогично, с дополнительной проверкой по списку имеющихся скрытых 
свойств, работает и <code>Object.getOwnPropertyNames</code>.<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.keys({q: <span class="hljs-number"><span class="hljs-number">1</span></span>, w: <span class="hljs-number"><span class="hljs-number">2</span></span>, e: <span class="hljs-number"><span class="hljs-number">3</span></span>}));       <span class="hljs-comment"><span class="hljs-comment">// =&gt; ['q', 'w', 'e']</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.keys([<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>]));                <span class="hljs-comment"><span class="hljs-comment">// =&gt; ['0', '1', '2']</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.getOwnPropertyNames([<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>])); <span class="hljs-comment"><span class="hljs-comment">// =&gt; ['0', '1', '2', 'length']</span></span>
</code></pre><br>
<a name="es5-desc"></a><a href="#es5-desc"><b>#</b></a> С дескрипторами всё плохо, ECMAScript 3 их не поддерживает. Задать геттеры / сеттеры нет возможности. Браузеры, где есть <code>Object#__define[GS]etter__</code>, но отсутствует <code>Object.defineProperty</code>, давно вымерли. В старых IE есть возможность создать объект с геттерами / сеттерами через <a href="http://habrahabr.ru/post/75158/">извращения с VBScript</a>, но это отдельная тема. <code>enumerable: false</code> свойства есть, их не задать, но есть возможность проверить является ли оно таковым, через <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/propertyIsEnumerable">Object#propertyIsEnumerable</a>.
 В IE8 есть методы для работы с дескрипторами, но лучше бы их не было 
(работают только с DOM объектами). Итого, всё, что мы можем сделать для 
IE8- — заглушки. Установка значения свойства по <code>value</code> дескриптора в <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty">Object.defineProperty</a> и <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperties">Object.defineProperties</a> да честное получение <code>value</code> и <code>enumerable</code> в <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor">Object.getOwnPropertyDescriptor</a>.<br>
<br>
<a name="es5-freeze"></a><a href="#es5-freeze"><b>#</b></a> А что насчет <code>Object.freeze, Object.preventExtensions, Object.seal</code>? Мало того, что их эмуляция невозможна, можно сделать разве что заглушки, но есть и такая точка зрения:<br>
<blockquote><b>Object.freeze, Object.preventExtensions, Object.seal, with, eval</b><br>
Crazy shit that you will probably never need. Stay away from it.<br>
<i><b><a href="http://nodeguide.com/style.html#object.freeze-object.preventextensions-object.seal-with-eval">— Felix Geisendörfer</a></b></i><br>
</blockquote>И я с ней полностью согласен, так что обойдемся без них.<br>
<br>
<a name="es5-other"></a><h4><b><a href="#es5-other">#</a> Прочее</b></h4><br>
<a name="es5-bind"></a><a href="#es5-bind"><b>#</b></a> В ECMAScript 5 добавлены привязка контекста и базовые возможности частичного применения через <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind">Function#bind</a>.
 Метод замечательный, но для раскрытия потенциала частичного применения и
 привязки контекста в JavaScript одного его мало, подробно тема 
раскрывается в <a href="#partial-application"># соответствующем разделе</a>.<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fn = <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log.bind(<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>, <span class="hljs-number"><span class="hljs-number">42</span></span>);
fn(<span class="hljs-number"><span class="hljs-number">43</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 42 43</span></span>
</code></pre><br>
<a name="es5-now"></a><a href="#es5-now"><b>#</b></a> Метод <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/now">Date.now</a> возвращает текущее время в числовом представлении, результат выполнения аналогичен <code>+new Date</code>.<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>.now(); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 1400263401642</span></span>
</code></pre><br>
<a name="es5-trim"></a><a href="#es5-trim"><b>#</b></a> Метод <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/Trim">String#trim</a> удаляет пробельные символы из начала и конца строки.<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">'\n   строка   \n'</span></span>.trim(); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'строка'</span></span>
</code></pre><br>
Что же касается модуля <code>JSON</code>, то он поддерживается IE8 и, в 
рамках данной библиотеки, реализовывать его я не вижу смысла. Если он 
вам понадобится в совсем уж доисторических IE — никто не мешает 
использовать, например, <a href="https://github.com/douglascrockford/JSON-js">этот</a> полифил.<br>
<br>
<a name="es6"></a><h2><b><a href="#es6">#</a> ECMAScript 6</b></h2><hr><br>
Спецификация ECMAScript 5 была написана наспех вместо так и не принятой 
спецификации ECMAScript 4 и мало расширяла принятую ещё в прошлом 
тысячелетии ECMAScript 3. Сейчас уже почти завершена куда более серьёзно
 расширяющая язык, в т.ч. и стандартную библиотеку, спецификация 
ECMAScript 6. Добавление новых фич в неё заморожено, все серьёзные 
изменения идут в предложения по ECMAScript 7, в последнее время 
большинство изменений черновика спецификации это исправления ошибок. Так
 что в нашей стандартной библиотеке будем ориентироваться, в основном, 
на ES6.<br>
<br>
Что с её поддержкой в актуальных движках хорошо видно по <a href="http://kangax.github.io/compat-table/es6/">данной таблице</a>.<br>
<br>
<ul>
<li>Лучше всех с её поддержкой у <b>Firefox</b> — уже доступно очень многое.</li>
<li><a name="v8-harmony-mode"></a><a href="#v8-harmony-mode"><b>#</b></a> В <b>v8 (Chrome, Opera, Node.js)</b>
 тоже доступно довольно многое, но значительная часть возможностей по 
умолчанию заблокирована, для их активации в браузере необходимо 
поставить флажок «Включить экспериментальный JavaScript» (парсер съедает
 ссылку <code>chrome://flags/#enable-javascript-harmony</code>), а Node.js запустить с флажком <code>--harmony</code>. Что-то доступно и без флажка, например, <code>Promise</code>, <code>WeakMap</code> и <code>WeakSet</code>, а начиная с Chrome 38 доступны и <code>Symbol</code>, <code>Map</code>, <code>Set</code>,
 итераторы. Node.js в этом плане сильно отстаёт, так как, особенно в 
стабильной ветке, v8 там обновляется редко. Зато её, в отличии от 
браузера пользователя, вам никто не помешает запустить с флажком.</li>
<li>У <b>IE</b>, как обычно, всё плохо, но в 11ой версии были добавлены коллекции и еще пара возможностей. В ближайшем будущем обещают <a href="http://habrahabr.ru/company/microsoft/blog/243215/">очень многое</a>.</li>
<li>Добавить функционал ES6 попытались и в <b>Safari</b>. Вот только 
почти всё, что они добавили, не соответствует стандарту и порождает 
лишние проблемы, так что лучше бы и не добавляли. По <a href="https://esdiscuss.org/topic/safari-8-es6-ish-implementation">ссылке</a> только небольшая часть проблем.</li>
</ul><br>
Самым популярным полифилом ES6 является <a href="https://github.com/paulmillr/es6-shim/">es6-shim</a> от <a href="https://habrahabr.ru/users/paulmillr/" class="user_link">paulmillr</a>.<br>
<br>
Часть стандартной библиотеки ECMAScript 6, например, <code>Proxy</code> 
(а это одна из самых вкусных возможностей), на базе ECMAScript 5 и уж 
тем более ECMAScript 3 реализовать невозможно, но большую часть можно 
реализовать если не полностью, то хотя бы частично и «нечестно».<br>
<br>
<a name="preprocessors"></a><h4><b><a href="#preprocessors">#</a> Немного про препроцессоры ECMAScript 6+</b></h4><br>
Что касается синтаксиса, то, в рамках этой библиотеки, его поддержку мы 
добавить не можем. Однако на помощь тут приходят препроцессоры, 
преобразующие синтаксис ECMAScript 6+ в ECMAScript 3 или 5. Их огромное 
количество, рассмотрим только пару популярных.<br>
<br>
Есть такой старый и мощный проект — <b><a href="https://github.com/google/traceur-compiler">Google Traceur</a></b>. Он генерирует нечитаемый код и использует довольно тяжелый runtime, так что от его использования я отказался.<br>
<br>
Другой проект мне кажется куда более привлекательным — <b><a href="https://github.com/6to5/6to5">6to5</a></b>. Проект свежий и развивается <b>потрясающе</b> быстро. Он генерирует легко читаемый код и не использует собственный runtime, исключение — runtime <b><a href="http://facebook.github.io/regenerator/">regenerator</a></b>, который он использует для компиляции генераторов. Зато вместо него активно использует стандартную библиотеку ES6 — например, <a href="#es6-iterable-interface"># <code>Symbol.iterator</code></a>. По умолчанию — <a href="https://github.com/paulmillr/es6-shim">es6-shim</a> и <a href="https://github.com/medikoo/es6-symbol">es6-symbol</a>.
 Их легко заменяет наша библиотека, что делает данный препроцессор 
идеальной её парой. Преобразует код в ECMAScript 5, но, главным образом,
 это касается стандартной библиотеки — с заглушками методов вроде <a href="#es5-desc"># <code>Object.defineProperties</code></a> почти всё будет работать и в старых IE.<br>
<br>
<b>С использованием препроцессора и полифила стандартной библиотеки, 
начинать использовать ECMAScript 6 на полную катушку можно уже сейчас.</b> За исключением, разве что, некоторых мелочей.<br>
<br>
Набросал совсем <b>простенькую <a href="http://es6.zloirock.ru/">песочницу</a></b> с возможностью компиляции ES6 через <b>6to5</b> и подключенной библиотекой <b>core.js</b>,
 примеры будут со ссылками на неё. Однако, так как наша библиотека никак
 не привязана к синтаксису ECMAScript 6, большая часть примеров будет с 
использованием синтаксиса ECMAScript 5.<br>
<br>
<hr><br>
Ну а теперь перейдём к стандартной библиотеке по ECMAScript 6. Новые 
конструкторы и концепции мы рассмотрим в отдельных главах, это <a href="#es6-symbol"># символы</a>, <a href="#es6-collections"># коллекции</a>, <a href="#es6-iterators"># итераторы</a> и <a href="#es6-promise"># обещания</a>, остальное рассмотрим здесь.<br>
<br>
<a name="es6-object-assign"></a><h4><b><a href="#es6-object-assign">#</a> Object.assign</b></h4><br>
Этого метода ждали многие. <a href="http://people.mozilla.org/~jorendorff/es6-draft.html#sec-object.assign">Object.assign</a> банально копирует все собственные перечисляемые свойства объекта (объектов) источника в целевой объект. <a href="http://goo.gl/H3zj4b">Пример</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> foo = {q: <span class="hljs-number"><span class="hljs-number">1</span></span>, w: <span class="hljs-number"><span class="hljs-number">2</span></span>}
  , bar = {e: <span class="hljs-number"><span class="hljs-number">3</span></span>, r: <span class="hljs-number"><span class="hljs-number">4</span></span>}
  , baz = {t: <span class="hljs-number"><span class="hljs-number">5</span></span>, y: <span class="hljs-number"><span class="hljs-number">6</span></span>};
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.assign(foo, bar, baz); <span class="hljs-comment"><span class="hljs-comment">// =&gt; foo = {q: 1, w: 2, e: 3, r: 4, t: 5, y: 6}</span></span>
</code></pre><br>
Планировалось также добавить метод <code>Object.mixin</code>, который 
копировал еще и неперечисляемые свойства, учитывал дескрипторы и 
переназначал родителя, получаемого через ключевое слово <code>super</code>. Однако, его добавление решили отложить. Его аналог есть в <a href="#object-define"># велосипедной части</a> библиотеки.<br>
<br>
<a name="es6-object-is"></a><h4><b><a href="#es6-object-is">#</a> Object.is</b></h4><br>
Операторы сравнения в JavaScript вообще довольно странно себя ведут. Забудем даже такой оператор, как <code>==</code> с его приведениями, посмотрим на <code>===</code>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-literal"><span class="hljs-literal">NaN</span></span> === <span class="hljs-literal"><span class="hljs-literal">NaN</span></span>  <span class="hljs-comment"><span class="hljs-comment">// =&gt; false</span></span>
<span class="hljs-number"><span class="hljs-number">0</span></span> === <span class="hljs-number"><span class="hljs-number">-0</span></span>     <span class="hljs-comment"><span class="hljs-comment">// =&gt; true, но при этом:</span></span>
<span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">0</span></span> === <span class="hljs-number"><span class="hljs-number">1</span></span>/<span class="hljs-number"><span class="hljs-number">-0</span></span> <span class="hljs-comment"><span class="hljs-comment">// =&gt; false</span></span>
</code></pre><br>
Как раз для этого случая, в языке есть внутренний алгоритм сравнения <a href="http://es5.javascript.ru/x9.html#x9.12">SameValue</a>. Для него <code>NaN</code> равен <code>NaN</code>, а <code>+0</code> и <code>-0</code> различны. В ECMAScript 6 его хотели вынести наружу как операторы <code>is</code> и <code>isnt</code>, но, похоже, поняв, что операторов сравнения в языке уже и так не мало, да и для обратной совместимости, вынесли как метод <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is">Object.is</a>. <a href="http://goo.gl/XMplwh">Пример</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.is(<span class="hljs-literal"><span class="hljs-literal">NaN</span></span>, <span class="hljs-literal"><span class="hljs-literal">NaN</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; true</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.is(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">-0</span></span>);    <span class="hljs-comment"><span class="hljs-comment">// =&gt; false</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.is(<span class="hljs-number"><span class="hljs-number">42</span></span>, <span class="hljs-number"><span class="hljs-number">42</span></span>);   <span class="hljs-comment"><span class="hljs-comment">// =&gt; true, аналогично '==='</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.is(<span class="hljs-number"><span class="hljs-number">42</span></span>, <span class="hljs-string"><span class="hljs-string">'42'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; false, аналогично '==='</span></span>
</code></pre><br>
<a name="same-value-zero"></a><a href="#same-value-zero">#</a> Также в ES6 и далее активно используется другой алгоритм сравнения — <a href="http://people.mozilla.org/~jorendorff/es6-draft.html#sec-samevaluezero">SameValueZero</a>, для которого <code>NaN</code> равен <code>NaN</code>, и, в отличии от предыдущего, <code>-0</code> равен <code>+0</code>. Им обеспечивается уникальность ключа <a href="#es6-collections"># коллекций</a>, он применяется при проверке вхождения элемента в коллекцию через <a href="#array-contains"># <code>Array#includes</code></a>.<br>
<br>
<a name="es6-object-setPrototypeOf"></a><h4><b><a href="#es6-object-setPrototypeOf">#</a> Object.setPrototypeOf</b></h4><br>
В ES6 для установки прототипа существующего объекта появляется метод <code>Object.setPrototypeOf</code>. <a href="http://goo.gl/t4wJ4K">Пример</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Parent</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{}
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Child</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{}
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.setPrototypeOf(Child.prototype, Parent.prototype);
<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Child <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> Child;  <span class="hljs-comment"><span class="hljs-comment">// =&gt; true</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Child <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> Parent; <span class="hljs-comment"><span class="hljs-comment">// =&gt; true</span></span>

<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fn</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{}
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.setPrototypeOf(fn, []);
<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> fn == <span class="hljs-string"><span class="hljs-string">'function'</span></span>;     <span class="hljs-comment"><span class="hljs-comment">// =&gt; true </span></span>
fn <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>;         <span class="hljs-comment"><span class="hljs-comment">// =&gt; true</span></span>

<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> object = {};
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.setPrototypeOf(object, <span class="hljs-literal"><span class="hljs-literal">null</span></span>);
object <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>;    <span class="hljs-comment"><span class="hljs-comment">// =&gt; false</span></span>
</code></pre><br>
Странно, что такая, казалось бы, необходимая, учитывая прототипную 
ориентированность языка, возможность — посмотрите, хотя бы, первый 
пример — простое и очевидное прототипное наследование, отсутствует в 
ECMAScript 5. Единственный способ изменить прототип уже существующего 
объекта без данного метода — нестандартное свойство <code>__proto__</code>.
 На текущий момент, оно поддерживается всеми актуальными браузерами, 
кроме IE10-, в текущей реализации — геттер / сеттер в прототипе <code>Object</code>.<br>
<br>
Примитивная, без лишних проверок и возврата объекта, версия <code>Object.setPrototypeOf</code> выглядела бы просто — выдернем сеттер <code>__proto__</code> и сделаем из него функцию:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> setPrototypeOf = <span class="hljs-built_in"><span class="hljs-built_in">Function</span></span>.call.bind(<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.getOwnPropertyDescriptor(<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.prototype, <span class="hljs-string"><span class="hljs-string">'__proto__'</span></span>).set);
</code></pre><br>
Однако, тут появляется еще одна проблема — в старых, но где-то еще актуальных, версиях v8, сеттер <code>__proto__</code> нельзя использовать как функцию. Для реализации <code>Object.setPrototypeOf</code> в них остается только установка значения по ключу <code>__proto__</code>.<br>
<br>
<h5>Так и живем:</h5><br>
<ul>
<li><b>Для IE10- эмуляция <code>Object.setPrototypeOf</code> отсутствует полностью, так как невозможна.</b></li>
<li>В старых версиях v8 <code>Object.setPrototypeOf</code> не работает, если в цепочке прототипов цели отсутствует <code>Object.prototype</code> или свойство <code>__proto__</code> переопределено через, например, <code>Object.defineProperty</code>.</li>
</ul><br>
Также, ECMAScript 6 и наша библиотека изменяет логику работы <code>Object#toString</code>. Тема серьёзная, но о ней мы поговорим <a href="#classof"># во второй части статьи</a>.<br>
<br>
<a name="es6-array"></a><h4><b><a href="#es6-array">#</a> Методы массива</b></h4><br>
Статические методы <code>Array.from</code> и <code>Array.of</code> — дженерики, если они запущены в контексте функции, отличной от <code>Array</code>, они создают её инстансы. Если есть желание ознакомиться с этим подробней — хорошо описано в <a href="http://www.2ality.com/2014/05/es6-array-methods.html">этой статье по новым методам массива</a>.<br>
<br>
<a name="es6-array-from"></a><a href="#es6-array-from"><b>#</b></a> ECMAScript 6 добавляет очень полезный метод — <code>Array.from</code>. Это универсальное приведение к массиву <a href="#es6-iterators"># итерируемых</a> и array-like объектов. Во большинстве случаев он заменит <code>Array.prototype.slice.call</code>
 без указания начальной и конечной позиций. Дополнительно, метод 
принимает опциональный map-коллбэк и контекст его исполнения. В случае 
передачи итерируемого объекта и без map-коллбэка, результат аналогичен 
использованию оператора <a href="#es6-spread"># spread</a> в литерале массива — <code>[...iterable]</code>. <a href="http://goo.gl/h1F9dN">Пример</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.from(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Set</span></span>([<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]));      <span class="hljs-comment"><span class="hljs-comment">// =&gt; [1, 2, 3]</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.from({<span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span>, length: <span class="hljs-number"><span class="hljs-number">3</span></span>}); <span class="hljs-comment"><span class="hljs-comment">// =&gt; [1, 2, 3]</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.from(<span class="hljs-string"><span class="hljs-string">'123'</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>);                 <span class="hljs-comment"><span class="hljs-comment">// =&gt; [1, 2, 3]</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.from(<span class="hljs-string"><span class="hljs-string">'123'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">it</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> it * it;
});                                        <span class="hljs-comment"><span class="hljs-comment">// =&gt; [1, 4, 9]</span></span>
</code></pre><br>
<a name="es6-array-of"></a><a href="#es6-array-of"><b>#</b></a> В отличие от предыдущего, метод <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/of">Array.of</a> на текущий момент практически бесполезен. Он нужен, в первую очередь, для подклассов <code>Array</code>, как аналог литерала массива <code>[]</code>. <a href="http://goo.gl/BV1EDC">Пример</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.of(<span class="hljs-number"><span class="hljs-number">1</span></span>);       <span class="hljs-comment"><span class="hljs-comment">// =&gt; [1]</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.of(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; [1, 2, 3]</span></span>
</code></pre><br>
<a name="es6-array-find"></a><a href="#es6-array-find"><b>#</b></a> Методы <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find">Array#find</a> и <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex">Array#findIndex</a> осуществляют поиск по массиву через вызов коллбэка. <a href="http://goo.gl/Gb8ILU">Пример</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isOdd</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">val</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> val % <span class="hljs-number"><span class="hljs-number">2</span></span>;
}
[<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>, <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">23</span></span>, <span class="hljs-number"><span class="hljs-number">42</span></span>].find(isOdd);      <span class="hljs-comment"><span class="hljs-comment">// =&gt; 15</span></span>
[<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>, <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">23</span></span>, <span class="hljs-number"><span class="hljs-number">42</span></span>].findIndex(isOdd); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 2</span></span>
[<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>, <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">23</span></span>, <span class="hljs-number"><span class="hljs-number">42</span></span>].find(<span class="hljs-built_in"><span class="hljs-built_in">isNaN</span></span>);      <span class="hljs-comment"><span class="hljs-comment">// =&gt; undefined</span></span>
[<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>, <span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">23</span></span>, <span class="hljs-number"><span class="hljs-number">42</span></span>].findIndex(<span class="hljs-built_in"><span class="hljs-built_in">isNaN</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; -1</span></span>
</code></pre><br>
<a name="es6-array-fill"></a><a href="#es6-array-fill"><b>#</b></a> Метод массива <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/fill">Array#fill</a> заполняет массив переданным значением. Опциональные аргументы — стартовая и конечная позиции. <a href="http://goo.gl/34utph">Пример</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>).map(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">42</span></span>;
});                <span class="hljs-comment"><span class="hljs-comment">// =&gt; [undefined × 5], потому как .map пропускает "дырки" в массиве</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>).fill(<span class="hljs-number"><span class="hljs-number">42</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; [42, 42, 42, 42, 42]</span></span>
</code></pre><br>
<a name="es6-string"></a><h4><b><a href="#es6-string">#</a> Методы строки</b></h4><br>
Тут всё просто. <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes">String#includes</a> (до недавнего времени — <code>String#contains</code>, но <a href="#array-contains"># <code>Array#includes</code></a> утянул его за собой, пока доступен и по старому имени) проверяет вхождение подстроки в строку. <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith">String#startsWith</a> и <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith">String#endsWith</a>
 проверяют, начинается ли или заканчивается ли строка на заданную 
подстроку. Эти 3 метода принимают дополнительный аргумент — стартовую 
позицию. <a href="http://goo.gl/B5uMrt">Пример</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">'foobarbaz'</span></span>.includes(<span class="hljs-string"><span class="hljs-string">'bar'</span></span>);      <span class="hljs-comment"><span class="hljs-comment">// =&gt; true</span></span>
<span class="hljs-string"><span class="hljs-string">'foobarbaz'</span></span>.includes(<span class="hljs-string"><span class="hljs-string">'bar'</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>);   <span class="hljs-comment"><span class="hljs-comment">// =&gt; false</span></span>
<span class="hljs-string"><span class="hljs-string">'foobarbaz'</span></span>.startsWith(<span class="hljs-string"><span class="hljs-string">'foo'</span></span>);    <span class="hljs-comment"><span class="hljs-comment">// =&gt; true</span></span>
<span class="hljs-string"><span class="hljs-string">'foobarbaz'</span></span>.startsWith(<span class="hljs-string"><span class="hljs-string">'bar'</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; true</span></span>
<span class="hljs-string"><span class="hljs-string">'foobarbaz'</span></span>.endsWith(<span class="hljs-string"><span class="hljs-string">'baz'</span></span>);      <span class="hljs-comment"><span class="hljs-comment">// =&gt; true</span></span>
<span class="hljs-string"><span class="hljs-string">'foobarbaz'</span></span>.endsWith(<span class="hljs-string"><span class="hljs-string">'bar'</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>);   <span class="hljs-comment"><span class="hljs-comment">// =&gt; true</span></span>
</code></pre><br>
Метод <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/repeat">String#repeat</a> возвращает строку, повторенную заданное число раз. <a href="http://goo.gl/UBdYnv">Пример</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">'string'</span></span>.repeat(<span class="hljs-number"><span class="hljs-number">3</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'stringstringstring'</span></span>
</code></pre><br>
Библиотека пока не добавляет методы ECMAScript 6 / 7 <a href="https://github.com/lukehoban/es6features#unicode">для лучшей поддержки многобайтовых символов</a> и честный <a href="#es6-iterators"># итератор</a>
 строки, для строк используется итератор массива. Сейчас их нет только 
потому, что они лично мне просто не нужны. Было бы неплохо добавить их в
 ближайшем будущем.<br>
<br>
<a name="es6-math"></a><h4><b><a href="#es6-math">#</a> Работа с числами</b></h4><br>
В ECMAScript 6 добавлено огромное количество математических функций и 
констант. Обойдемся без их описания и примеров, только ссылки: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/EPSILON">Number.EPSILON</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/parseFloat">Number.parseFloat</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/parseInt">Number.parseInt</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isFinite">Number.isFinite</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isInteger">Number.isInteger</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isNaN">Number.isNaN</a>, <a href="http://www.2ality.com/2013/10/safe-integers.html">Number.MAX_SAFE_INTEGER, Number.MIN_SAFE_INTEGER, Number.isSafeInteger</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/acosh">Math.acosh</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/asinh">Math.asinh</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/atanh">Math.atanh</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/cbrt">Math.cbrt</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/clz32">Math.clz32</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/cosh">Math.cosh</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/expm1">Math.expm1</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/hypot">Math.hypot</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/imul">Math.imul</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/log1p">Math.log1p</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/log10">Math.log10</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/log2">Math.log2</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign">Math.sign</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sinh">Math.sinh</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/tanh">Math.tanh</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/trunc">Math.trunc</a>.<br>
<br>
<a name="es6-symbol"></a><h2><b><a href="#es6-symbol">#</a> ECMAScript 6: Символы</b></h2><hr><br>
В JavaScript с сокрытием свойств объектов дела обстоят довольно плохо. 
Приватные данные можно хранить в замыканиях, что вынуждает объявлять 
методы для работы с ними внутри конструктора, а не в прототипе объекта. 
Начиная с ECMAScript 5, можно объявлять <code>enumerable: false</code> свойства, что скроет свойства объекта от перечисления в <code>for-in</code> и от <code>Object.keys</code>,
 но это не обеспечит надежного сокрытия — ключ не уникален, его можно 
легко подобрать, могут возникнуть конфликты имен и, из-за необходимости 
использования <code>Object.defineProperty</code> с объектом-дескриптором, это довольно громоздко.<br>
<br>
В ECMAScript 6 для упрощения инкапсуляции появляется новый тип данных — <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Symbol">Symbol</a>, ранее известный как <a href="http://wiki.ecmascript.org/doku.php?id=harmony:private_name_objects">Name</a>. Символы предназначены для использования в качестве уникальных ключей объектов. <a href="http://goo.gl/EUsvAf">Пример</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Person = (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> NAME = <span class="hljs-built_in"><span class="hljs-built_in">Symbol</span></span>(<span class="hljs-string"><span class="hljs-string">'name'</span></span>);
  <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Person</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">)</span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[NAME] = name;
  }
  Person.prototype.getName = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[NAME];
  };
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Person;
})();

<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> person = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Person(<span class="hljs-string"><span class="hljs-string">'Вася'</span></span>);
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(person.getName());          <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'Вася'</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(person[<span class="hljs-string"><span class="hljs-string">'name'</span></span>]);            <span class="hljs-comment"><span class="hljs-comment">// =&gt; undefined</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(person[<span class="hljs-built_in"><span class="hljs-built_in">Symbol</span></span>(<span class="hljs-string"><span class="hljs-string">'name'</span></span>)]);    <span class="hljs-comment"><span class="hljs-comment">// =&gt; undefined, каждый вызов Symbol возвращает уникальный ключ</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> key <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> person)<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(key); <span class="hljs-comment"><span class="hljs-comment">// =&gt; только 'getName', символы не участвуют в обходе объекта</span></span>

<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Symbol</span></span>());           <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'symbol'</span></span>
</code></pre><br>
Символы не являются полностью приватными — метод <code>Object.getOwnPropertySymbols</code>
 возвращает собственные символы объекта, что даёт возможность отладки и 
низкоуровневых операций вроде клонирования. Хранение по настоящему 
приватных данных можно реализовать на базе <a href="#es6-weakmap"># WeakMap</a>. Хотя, ИМХО, более удачным решением проблемы было бы добавление полностью приватной версии символов.<br>
<br>
На текущий момент символы доступны в v8, начиная с Chrome 38 (в более ранних версиях — <a href="#v8-harmony-mode"># с флажком экспериментальных возможностей</a>)
 и в ночных сборках Firefox, начиная с 33. Скоро обещают и в IE, так что
 в самом ближайшем будущем будет доступен во всех основных современных 
браузерах.<br>
<br>
<a name="es6-symbol-polyfill"></a><a href="#es6-symbol-polyfill"><b>#</b></a>
 Конечно, полноценный полифил символов на базе ES5 невозможен, но 
базовые возможности — создание уникальных не участвующих в обходе 
объекта через <code>for-in</code> и не возвращаемых <code>Object.keys</code> ключей — реализуется довольно просто, например, так:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.Symbol || (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> id = <span class="hljs-number"><span class="hljs-number">0</span></span>;
  <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.Symbol = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">description</span></span></span><span class="hljs-function">)</span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Symbol</span></span>)<span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">TypeError</span></span>(<span class="hljs-string"><span class="hljs-string">'Symbol is not a constructor'</span></span>);
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> symbol = <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.create(<span class="hljs-built_in"><span class="hljs-built_in">Symbol</span></span>.prototype)
      , tag    = <span class="hljs-string"><span class="hljs-string">'Symbol('</span></span> + description + <span class="hljs-string"><span class="hljs-string">')_'</span></span> + (++id + <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random()).toString(<span class="hljs-number"><span class="hljs-number">36</span></span>);
    symbol.tag = tag;
    <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.defineProperty(<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.prototype, tag, {
      configurable: <span class="hljs-literal"><span class="hljs-literal">true</span></span>,
      set: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">it</span></span></span><span class="hljs-function">)</span></span>{
        <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.defineProperty(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, tag, {
          enumerable  : <span class="hljs-literal"><span class="hljs-literal">false</span></span>,
          configurable: <span class="hljs-literal"><span class="hljs-literal">true</span></span>,
          writable    : <span class="hljs-literal"><span class="hljs-literal">true</span></span>,
          value       : it
        });
      }
    });
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> symbol;
  }
  <span class="hljs-built_in"><span class="hljs-built_in">Symbol</span></span>.prototype.toString = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.tag;
  }
})();
</code></pre><br>
При вызове <code>Symbol</code> мы генерируем уникальный ключ-строку, например, <code>"Symbol(description)_m.y9oth2pcqaypsyvi"</code>, и по этому ключу в <code>Object.prototype</code> устанавливаем сеттер. При попытке установить значение по строке-ключу, к которой приведется наш «символ», сеттер устанавливает <code>enumerable: false</code> свойство в текущий объект. Однако, у подобных «символов» есть огромное количество минусов, вот только часть:<br>
<br>
<ul>
<li>Пишет сеттер в <code>Object.prototype</code>: не стоит особо злоупотреблять, может повлиять на производительность.</li>
<li>Работает на базе дескрипторов: в IE8- работает (за счет <a href="#es5-desc"># заглушки</a> <code>Object.defineProperty</code>), не будет сеттеров в <code>Object.prototype</code>, «символы» будут перечисляемы.</li>
<li>В объектах, не содержащих под собой <code>Object.prototype</code> (например, <code>Object.create(null)</code>), «символы» будут перечисляемы.</li>
<li><code>Symbol() in {}</code> вернет <code>true</code> — нужно проверять наличие символов в объекте иным способом.</li>
<li><code>typeof Symbol()</code> будет равен <code>'object'</code> — средствами JavaScript мы не можем добавить новый тип данных.</li>
<li>Не добавляем <code>Object.getOwnPropertySymbols</code> — лишняя обертка для <code>Object.getOwnPropertyNames</code> плохо скажется на производительности, соответственно, <code>Object.getOwnPropertyNames</code> будет возвращать, в том числе, и «символы».</li>
</ul><br>
<a name="es6-symbol-pure"></a><a href="#es6-symbol-pure"><b>#</b></a> 
Если решение настолько сомнительно, что оно тут делает? Если в проекте 
нужно незначительное количество символов и не планируется их 
использовать с объектами, не содержащими под собой <code>Object.prototype</code>, данное решение вполне сойдет. Для остальных случаев добавим в библиотеку пару хелперов. <code>Symbol.pure</code>, если доступны нативные символы, возвращающий символ, нет — возвращающий уникальную строку-ключ без добавления сеттера в <code>Object.prototype</code>, и <code>Symbol.set</code>, если доступны нативные символы — просто устанавливающий в объект значение по ключу, нет — устанавливающий значение, используя <code>Object.defineProperty</code> с <code>enumerable: false</code>.
 Таким примитивным образом, избавляемся от половины описанных выше 
проблем. Использованный выше пример с использованием данных хелперов 
вместо вызова <code>Symbol</code> выглядит <a href="http://goo.gl/DmPIbT">так</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Person = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> NAME = <span class="hljs-built_in"><span class="hljs-built_in">Symbol</span></span>.pure(<span class="hljs-string"><span class="hljs-string">'name'</span></span>);
  <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Person</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">)</span></span>{
    <span class="hljs-built_in"><span class="hljs-built_in">Symbol</span></span>.set(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, NAME, name);
  }
  Person.prototype.getName = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[NAME];
  };
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Person;
}();
</code></pre><br>
<a name="es6-reflect-own-keys"></a><a href="#es6-reflect-own-keys"><b>#</b></a> Как уже было отмечено выше, метод <code>Object.getOwnPropertySymbols</code>
 мы не добавляем. А хочется иметь более или менее универсальный, притом 
стандартизованный, способ для обхода всех ключей, как строк, так и 
символов. ECMAScript 6 добавляет <a href="http://people.mozilla.org/~jorendorff/es6-draft.html#sec-reflect-object">модуль <code>Reflect</code></a> — в первую очередь, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy#Handler_API">набор заглушек</a> для <code>Proxy</code>. Так как мы не имеем возможность эмулировать <code>Proxy</code>, модуль <code>Reflect</code> нам особо и не нужен. Однако в нём есть метод <code>Reflect.ownKeys</code>, возвращающий все собственные ключи объекта — как строки, так и символы, т.е. <code>Object.getOwnPropertyNames + Object.getOwnPropertySymbols</code>. Добавим этот метод. <a href="http://goo.gl/fyu6pn">Пример</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> O = {a: <span class="hljs-number"><span class="hljs-number">1</span></span>};
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.defineProperty(O, <span class="hljs-string"><span class="hljs-string">'b'</span></span>, {value: <span class="hljs-number"><span class="hljs-number">2</span></span>});
O[<span class="hljs-built_in"><span class="hljs-built_in">Symbol</span></span>(<span class="hljs-string"><span class="hljs-string">'c'</span></span>)] = <span class="hljs-number"><span class="hljs-number">3</span></span>;
<span class="hljs-built_in"><span class="hljs-built_in">Reflect</span></span>.ownKeys(O); <span class="hljs-comment"><span class="hljs-comment">// =&gt; ['a', 'b', Symbol(c)]</span></span>
</code></pre><br>
<a name="es6-symbol-registry"></a><a href="#es6-symbol-registry"><b>#</b></a> Также ES6 добавляет такую сомнительную штуку, как глобальный регистр символов. Для работы с ним есть пара методов — <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/for">Symbol.for</a> и <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol/keyFor">Symbol.keyFor</a>. <code>Symbol.for</code> ищет в регистре и возвращает символ по ключу-строке, не находит — создаёт новый, добавляет в регистр и возвращает его. <code>Symbol.keyFor</code> возвращает строку, которой в регистре соответствует переданный символ. <a href="http://goo.gl/0pdJjX">Пример</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> symbol = <span class="hljs-built_in"><span class="hljs-built_in">Symbol</span></span>.for(<span class="hljs-string"><span class="hljs-string">'key'</span></span>);
symbol === <span class="hljs-built_in"><span class="hljs-built_in">Symbol</span></span>.for(<span class="hljs-string"><span class="hljs-string">'key'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// true</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">Symbol</span></span>.keyFor(symbol);        <span class="hljs-comment"><span class="hljs-comment">// 'key'</span></span>
</code></pre><br>
Ко всему прочему, библиотека активно использует символы <a href="#es6-iterable-interface"># <code>Symbol.iterator</code></a> и <a href="#classof"># <code>Symbol.toStringTag</code></a>.<br>
<br>
<a name="es6-collections"></a><h2><b><a href="#es6-collections">#</a> ECMAScript 6: Коллекции</b></h2><hr><br>
В ECMAScript 6 появляются 4 новых вида коллекций: <code>Map, Set, WeakMap</code> и <code>WeakSet</code>. Есть еще <a href="http://habrahabr.ru/post/119694/">типизированные массивы</a>, но пока обойдёмся без них.<br>
<br>
<ul>
<li><a href="#es6-collections-overview"># Описание коллекций</a></li>
<li><a href="#es6-collections-support"># Поддержка движками</a></li>
<li><a href="#es6-map-set"># Реализация <code>Map</code> и <code>Set</code></a></li>
<li><a href="#es6-weak"># Реализация слабосвязанных коллекций</a></li>
</ul><br>
<a name="es6-collections-overview"></a><a href="#es6-collections-overview"><b>#</b></a> Итак, что собой представляют данные коллекции?<br>
<br>
<a name="es6-map"></a><a href="#es6-map"><b>#</b></a> <b><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map">Map</a></b>
 — коллекция ключ — значение, в качестве ключей могут выступать любые 
сущности JavaScript — как примитивы, так и объекты. Есть возможность 
обхода — имеют <a href="#es6-iterators"># итераторы</a> и метод <code>.forEach</code>, количество элементов доступно через свойство <code>.size</code>. <a href="http://goo.gl/RDbROF">Пример</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> a = [<span class="hljs-number"><span class="hljs-number">1</span></span>];

<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> map = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Map</span></span>([[<span class="hljs-string"><span class="hljs-string">'a'</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>], [<span class="hljs-number"><span class="hljs-number">42</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>]]);
map.set(a, <span class="hljs-number"><span class="hljs-number">3</span></span>).set(<span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>);

<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(map.size);        <span class="hljs-comment"><span class="hljs-comment">// =&gt; 4</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(map.has(a));      <span class="hljs-comment"><span class="hljs-comment">// =&gt; true</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(map.has([<span class="hljs-number"><span class="hljs-number">1</span></span>]));    <span class="hljs-comment"><span class="hljs-comment">// =&gt; false</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(map.get(a));      <span class="hljs-comment"><span class="hljs-comment">// =&gt; 3</span></span>
map.forEach(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">val, key</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(val);           <span class="hljs-comment"><span class="hljs-comment">// =&gt; 1, 2, 3, 4</span></span>
  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(key);           <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'a', 42, [1], true</span></span>
});
map.delete(a);
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(map.size);        <span class="hljs-comment"><span class="hljs-comment">// =&gt; 3</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(map.get(a));      <span class="hljs-comment"><span class="hljs-comment">// =&gt; undefined</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.from(map)); <span class="hljs-comment"><span class="hljs-comment">// =&gt; [['a', 1], [42, 2], [true, 4]]</span></span>
</code></pre><br>
<a name="es6-set"></a><a href="#es6-set"><b>#</b></a> <b><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set">Set</a></b> — коллекция уникальных значений. Как и у <code>Map</code>, есть возможность обхода. <a href="http://goo.gl/7XYya3">Пример</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> set = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Set</span></span>([<span class="hljs-string"><span class="hljs-string">'a'</span></span>, <span class="hljs-string"><span class="hljs-string">'b'</span></span>, <span class="hljs-string"><span class="hljs-string">'a'</span></span>, <span class="hljs-string"><span class="hljs-string">'c'</span></span>]);
set.add(<span class="hljs-string"><span class="hljs-string">'d'</span></span>).add(<span class="hljs-string"><span class="hljs-string">'b'</span></span>).add(<span class="hljs-string"><span class="hljs-string">'e'</span></span>);
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(set.size);        <span class="hljs-comment"><span class="hljs-comment">// =&gt; 5</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(set.has(<span class="hljs-string"><span class="hljs-string">'b'</span></span>));    <span class="hljs-comment"><span class="hljs-comment">// =&gt; true</span></span>
set.forEach(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">it</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(it);            <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'a', 'b', 'c', 'd', 'e'</span></span>
});
set.delete(<span class="hljs-string"><span class="hljs-string">'b'</span></span>);
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(set.size);        <span class="hljs-comment"><span class="hljs-comment">// =&gt; 4</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(set.has(<span class="hljs-string"><span class="hljs-string">'b'</span></span>));    <span class="hljs-comment"><span class="hljs-comment">// =&gt; false</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.from(set)); <span class="hljs-comment"><span class="hljs-comment">// =&gt; ['a', 'c', 'd', 'e']</span></span>
</code></pre><br>
<a name="es6-weakmap"></a><a href="#es6-weakmap"><b>#</b></a> <b><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap">WeakMap</a></b> — коллекция ключ-значение, в качестве ключей могут выступать <b>только объекты</b>.
 Использует слабую связь — когда объект-ключ удаляется (сборщиком 
мусора), удаляется и пара ключ-значение из коллекции. Нет возможности 
обойти — нет итераторов и метода <code>.forEach</code>, нет свойства <code>.size</code>. Это еще один способ хранения приватных данных, более «честный», но и <a href="https://esdiscuss.org/topic/weakmap-better-than-private-symbols-was-direct-proxies-problem#content-8">более ресурсоёмкий</a>, по сравнению с использованием <a href="#es6-symbol"># символов</a>. Если в будущем в JavaScript таки добавят <a href="https://github.com/zenparsing/es-abstract-refs#examples">abstract references</a>, для подобных приватных полей появится удобный синтаксис. <a href="http://goo.gl/wCvuq3">Пример</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> a = [<span class="hljs-number"><span class="hljs-number">1</span></span>]
  , b = [<span class="hljs-number"><span class="hljs-number">2</span></span>]
  , c = [<span class="hljs-number"><span class="hljs-number">3</span></span>];

<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> wmap = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">WeakMap</span></span>([[a, <span class="hljs-number"><span class="hljs-number">1</span></span>], [b, <span class="hljs-number"><span class="hljs-number">2</span></span>]]);
wmap.set(c, <span class="hljs-number"><span class="hljs-number">3</span></span>).set(b, <span class="hljs-number"><span class="hljs-number">4</span></span>);
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(wmap.has(a));   <span class="hljs-comment"><span class="hljs-comment">// =&gt; true</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(wmap.has([<span class="hljs-number"><span class="hljs-number">1</span></span>])); <span class="hljs-comment"><span class="hljs-comment">// =&gt; false</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(wmap.get(a));   <span class="hljs-comment"><span class="hljs-comment">// =&gt; 1</span></span>
wmap.delete(a);
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(wmap.get(a));   <span class="hljs-comment"><span class="hljs-comment">// =&gt; undefined</span></span>

<span class="hljs-comment"><span class="hljs-comment">// Так можно хранить приватные данные</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Person = (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> names = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">WeakMap</span></span>;
  <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Person</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">)</span></span>{
    names.set(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, name);
  }
  Person.prototype.getName = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> names.get(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>);
  };
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Person;
})();

<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> person = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Person(<span class="hljs-string"><span class="hljs-string">'Вася'</span></span>);
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(person.getName());          <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'Вася'</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> key <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> person)<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(key); <span class="hljs-comment"><span class="hljs-comment">// =&gt; только 'getName'</span></span>
</code></pre><br>
<a name="es6-weakset"></a><a href="#es6-weakset"><b>#</b></a> <b><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet">WeakSet</a></b> — ну вы поняли. Появился в черновике спецификации относительно недавно, так что имеет довольно слабую поддержку браузерами. <a href="http://goo.gl/TdFbEx">Пример</a>:<br>
 <br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> a = [<span class="hljs-number"><span class="hljs-number">1</span></span>]
  , b = [<span class="hljs-number"><span class="hljs-number">2</span></span>]
  , c = [<span class="hljs-number"><span class="hljs-number">3</span></span>];

<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> wset = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">WeakSet</span></span>([a, b, a]);
wset.add(c).add(b).add(c);
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(wset.has(b));   <span class="hljs-comment"><span class="hljs-comment">// =&gt; true</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(wset.has([<span class="hljs-number"><span class="hljs-number">2</span></span>])); <span class="hljs-comment"><span class="hljs-comment">// =&gt; false</span></span>
wset.delete(b);
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(wset.has(b));   <span class="hljs-comment"><span class="hljs-comment">// =&gt; false</span></span>
</code></pre><br>
Все эти коллекции <b>должны</b> обеспечивать сублинейное время поиска. Уникальность ключа обеспечивается алгоритмом сравнения <a href="#same-value-zero"># SameValueZero</a>.<br>
<br>
<a name="es6-collections-support"></a><b><a href="#es6-collections-support">#</a></b> Что с поддержкой этих коллекций у современных движков js? Очень даже неплохо.<br>
<br>
<ul>
<li>В <b>Firefox</b> есть полноценные <code>Map, Set</code> и <code>WeakMap</code>. В ночных сборках появился и <code>WeakSet</code>. <code>Map</code> и <code>Set</code> принимают итерируемый объект. <code>Map</code> и <code>Set</code> имеют итераторы и метод <code>.forEach</code>.</li>
<li>В <b>v8</b> — читай <b>Chrome, Opera и Node.js</b>, есть все 4 новых вида коллекций. Начиная с Chrome 38, все они доступны без каких либо манипуляций. Чуть раньше были открыты <code>WeakMap</code> и <code>WeakSet</code>. В более ранних версиях коллекции доступны <a href="#v8-harmony-mode"># с флажком экспериментальных возможностей</a>. До самых последних версий v8 конструкторы не принимали итерируемый объект, а у <code>Map</code> и <code>Set</code> отсутствовали итераторы и метод <code>.forEach</code>, что делало нативные <code>Map</code> и <code>Set</code> чуть менее, чем полностью бесполезными.</li>
<li>В <b>IE11</b> появились те же <code>Map, Set</code> и <code>WeakMap</code>. Конструкторы не принимают итерируемый объект. <code>Map</code> и <code>Set</code> не имеют итераторов, но у них есть метод <code>.forEach</code>.</li>
<li>В <b>Safari</b> всё просто замечательно, лучше бы вообще никак. Есть <code>Map, Set</code> и <code>WeakMap</code>.
 Инициализация итератором отсутствует. Вроде бы, есть методы, 
возвращающие итераторы, но, внезапно, у некоторых итераторов отсутствует
 метод <code>next</code>. Есть <code>forEach</code>, но метод передаёт в коллбэк не 3 аргумента, как должно быть, а только 1 для <code>Set</code> и 2 для <code>Map</code>.</li>
</ul><br>
Почти во всех текущих реализациях методы коллекций <code>.add</code> и <code>.set</code> не возвращают <code>this</code> — заполнить коллекцию цепочкой этих методов не получится. Но это легко лечится.<br>
<br>
Для инициализации коллекции итератором также достаточно обертки для 
конструктора, которая создаст коллекцию и добавит элементы. Про сами 
итераторы поговорим в <a href="#es6-iterators"># следующей главе</a>.<br>
<br>
Ну а полифилы самих коллекций рассмотрим дальше. Полноценная реализация 
данных коллекций — быстрых, при этом чистых и без утечек памяти (для 
WeakMap), на базе ECMAScript 5 невозможна, однако, можно найти разумный 
компромисс.<br>
<br>
<a name="es6-map-set"></a><h4><b><a href="#es6-map-set">#</a> Реализация Map и Set</b></h4><br>
Что в большинстве полифилов представляют собой реализации <code>Map</code>? В инстансе <code>Map</code>
 — 2 массива, ключи и значения. При получении элемента, ищем совпадение в
 массиве ключей и возвращаем элемент из массива значений по полученному 
индексу. Или, для оптимизации удаления, альтернативный вариант — цепочка
 объектов-вхождений. Что не так и в том, и в другом случае? Это очень 
медленно, сложность поиска элемента — O(n), сложность операции uniq — 
O(n<sup>2</sup>). Чем это нам грозит? Вот небольшой тест:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> array = [];
<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">100000</span></span>; i++)array.push([{}, {}]);
array = array.concat(array);
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.time(<span class="hljs-string"><span class="hljs-string">'Map test'</span></span>);
<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> map = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Map</span></span>(array);
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.timeEnd(<span class="hljs-string"><span class="hljs-string">'Map test'</span></span>);
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Map size: '</span></span> + map.size);
</code></pre><br>
Создаём массив из 200000 тысяч пар объектов (будущие ключ-значение), 
100000 из которых уникальны, после чего создаём из этого массива 
коллекцию <code>Map</code>.<br>
<br>
Испытаем нативный <code>Map</code>, например, в Firefox:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Map</span></span> test: таймер запущен
<span class="hljs-built_in"><span class="hljs-built_in">Map</span></span> test: <span class="hljs-number"><span class="hljs-number">46.25</span></span>мс
<span class="hljs-built_in"><span class="hljs-built_in">Map</span></span> size: <span class="hljs-number"><span class="hljs-number">100000</span></span>
</code></pre><br>
А теперь в нём же <code>Map</code> из <a href="https://github.com/paulmillr/es6-shim">самого популярного</a> полифила ECMAScript 6:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Map</span></span> test: таймер запущен
<span class="hljs-built_in"><span class="hljs-built_in">Map</span></span> test: <span class="hljs-number"><span class="hljs-number">506823.31</span></span>мс
<span class="hljs-built_in"><span class="hljs-built_in">Map</span></span> size: <span class="hljs-number"><span class="hljs-number">100000</span></span>
</code></pre><br>
Примерно 8.5 минут. При попытке добавления каждого нового элемента 
приходится перебирать до 100000 уже добавленных. Отсюда можно сделать 
вывод, что данный подход годится только для очень маленьких коллекций.<br>
<br>
Сублинейной скорости полифила можно добиться используя хэш-таблицы. В ECMAScript 5 это только <code>Object</code>,
 принимающий в качестве ключа исключительно строки. В протестированном 
выше полифиле есть небольшая оптимизация — поисковый индекс для 
ключа-строки или числа через простую функцию, уменьшающий среднюю 
сложность поиска элемента коллекции до O(1):<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fastKey</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">key</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> key === <span class="hljs-string"><span class="hljs-string">'string'</span></span>)<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'$'</span></span> + key;
  <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> key === <span class="hljs-string"><span class="hljs-string">'number'</span></span>)<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> key;
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>;
};
</code></pre><br>
Точно так же можно реализовать быстрый доступ и для остальных примитивов. Вот только зачем нужен <code>Map</code>, в качестве ключей которого можно эффективно использовать только примитивы? <code>Object.create(null)</code> с этим <a href="#dict"># вполне справляется</a>.<br>
<br>
Просто взять и получить уникальную строку-идентификатор для 
ключа-объекта не получится. Поэтому придется слегка нарушить правила. 
Давайте будем добавлять при необходимости объектам-ключам символ с 
идентификатором. Примерно так:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> STOREID = <span class="hljs-built_in"><span class="hljs-built_in">Symbol</span></span>(<span class="hljs-string"><span class="hljs-string">'storeId'</span></span>)
  , id      = <span class="hljs-number"><span class="hljs-number">0</span></span>;
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fastKey</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">it</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-comment"><span class="hljs-comment">// Возвращаем с префиксом 'S' если строка и с префиксом 'P' если другой примитив</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(it !== <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>(it))<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> it == <span class="hljs-string"><span class="hljs-string">'string'</span></span> ? <span class="hljs-string"><span class="hljs-string">'S'</span></span> : <span class="hljs-string"><span class="hljs-string">'P'</span></span>) + it;
  <span class="hljs-comment"><span class="hljs-comment">// Если у объекта отсутствует идентификатор - добавляем</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.hasOwnProperty.call(it, STOREID))it[STOREID] = ++id;
  <span class="hljs-comment"><span class="hljs-comment">// Возвращаем идентификатор с префиксом 'O'</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'O'</span></span> + it[STOREID];
}
</code></pre><br>
Реализуем <code>Map</code> не на 2 массивах или цепочке объектов-элементов, а на 2 хэшах <code>Object</code>,
 так же для ключей и значений. Другого хранилища ключей / значений для 
обхода коллекции в порядке добавления нам не нужно: во всех движках 
ключи объектов хранятся в порядке добавления, за исключением 
ключей-чисел, но так как здесь у всех ключей префикс-буква, таковые 
отсутствуют. Итого, получаем:<br>
<br>
<pre><code class="hljs mathematica"><span class="hljs-keyword"><span class="hljs-keyword">Map</span></span> test: таймер запущен
<span class="hljs-keyword"><span class="hljs-keyword">Map</span></span> test: <span class="hljs-number"><span class="hljs-number">669.93</span></span>мс
<span class="hljs-keyword"><span class="hljs-keyword">Map</span></span> size: <span class="hljs-number"><span class="hljs-number">100000</span></span>
</code></pre><br>
Конечно, медленнее нативных, но, думаю, вполне сойдет. Да, мы пишем 
скрытое свойство в ключ-объект — невозможно использовать в качестве 
ключей <a href="#es5-freeze"># frozen-объекты</a>, но зато получаем приемлемую скорость работы. <code>Set</code> реализуется аналогично, на 1 хэше.<br>
<br>
<a name="es6-weak"></a><h4><b><a href="#es6-weak">#</a> Реализация слабосвязанных коллекций</b></h4><br>
Слабосвязанные коллекции реализуем еще проще. У них нет итераторов, метода <code>.forEach</code>, свойства <code>.size</code>.
 В случае хранения ключей и значений в объекте коллекции, она уже не 
будет слабосвязанной — ключи / значения не будут удаляться, получим 
просто урезанную версию <code>Set</code> и <code>Map</code>. 
Единственное более или менее разумное решение давно известно — хранить 
значения на ключе, а в объекте коллекции — только её идентификатор. Так 
как значения хранятся на ключе, в полифиле теряется полная приватность 
хранимых данных.<br>
<br>
<div class="spoiler"><b class="spoiler_title">Сильно упрощённая их реализация выглядит так:</b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.WeakMap || (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> id       = <span class="hljs-number"><span class="hljs-number">0</span></span>
    , has      = <span class="hljs-built_in"><span class="hljs-built_in">Function</span></span>.call.bind(<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.prototype.hasOwnProperty)
    , WEAKDATA = <span class="hljs-built_in"><span class="hljs-built_in">Symbol</span></span>(<span class="hljs-string"><span class="hljs-string">'WeakData'</span></span>)
    , ID       = <span class="hljs-built_in"><span class="hljs-built_in">Symbol</span></span>(<span class="hljs-string"><span class="hljs-string">'ID'</span></span>);
  <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.WeakMap = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> <span class="hljs-built_in"><span class="hljs-built_in">WeakMap</span></span>))<span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-built_in"><span class="hljs-built_in">TypeError</span></span>();
    <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[ID] = id++;
  }
  <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.assign(<span class="hljs-built_in"><span class="hljs-built_in">WeakMap</span></span>.prototype, {
    <span class="hljs-string"><span class="hljs-string">'delete'</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">key</span></span></span><span class="hljs-function">)</span></span>{
      <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.has(key) &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> key[WEAKDATA][<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[ID]];
    },
    has: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">key</span></span></span><span class="hljs-function">)</span></span>{
      <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> key === <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>(key) &amp;&amp; has(key, WEAKDATA) &amp;&amp; has(key[WEAKDATA], <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[ID]);
    },
    get: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">key</span></span></span><span class="hljs-function">)</span></span>{
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(key === <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>(key) &amp;&amp; has(key, WEAKDATA))<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> key[WEAKDATA][<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[ID]];
    },
    set: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">key, value</span></span></span><span class="hljs-function">)</span></span>{
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(key !== <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>(key))<span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-built_in"><span class="hljs-built_in">TypeError</span></span>();
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!has(key, WEAKDATA))key[WEAKDATA] = {};
      key[WEAKDATA][<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[ID]] = value;
      <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>;
    }
  });
})();
</code></pre></div></div><br>
Давайте убедимся, что при удалении ссылки на ключ он не остаётся в коллекции и, соответственно, память не утекает:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// &lt;- тут делаем snapshot 1</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> array = [];
<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">100000</span></span>; i++)array[i] = {};
<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> wm = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">WeakMap</span></span>();
<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">100000</span></span>; i++)wm.set(array[i], {});
<span class="hljs-comment"><span class="hljs-comment">// &lt;- тут делаем snapshot 2</span></span>
array = <span class="hljs-literal"><span class="hljs-literal">null</span></span>;
<span class="hljs-comment"><span class="hljs-comment">// &lt;- тут делаем snapshot 3</span></span>
</code></pre><br>
<img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/7b2a07b54f664478a8b7a25be220cbe2.png"><br>
<br>
<b>Но в некоторых случаях проблема утечки памяти остаётся.</b> После 
удаления объекта коллекции, значение останется связанным с ключом, что 
приведет к утечке памяти до момента удаления объекта, бывшего ключом. 
Так что по-хорошему систему проектировать стоит так, что бы коллекции <code>WeakMap</code> жили дольше, чем их ключи. Кто-то <a href="https://habr.com/company/uprock/blog/200644/">пытается</a> обойти проблему утечки памяти, но это из разряда эзотерики — <a href="https://habr.com/company/uprock/blog/200644/#comment_6941924">память утекает точно в тех же случаях</a>.<br>
<br>
У реализации <code>WeakSet</code> эта проблема остается, но сведена к 
минимуму — вместо значения, что может быть тяжелым объектом, на ключе 
хранится только флаг наличия в коллекции.<br>
<br>
<a name="es6-iterators"></a><h2><b><a href="#es6-iterators">#</a> ECMAScript 6: Итераторы</b></h2><hr><br>
В ECMAScript 6 появился протокол итераторов — универсальный способ 
обхода коллекций, и не только. Так как к нему относятся и синтаксические
 конструкции, рассмотрим и их. Но, в первую очередь, это не часть 
стандартной библиотеки или синтаксиса, а концепция. К протоколу 
итераторов можно отнести:<br>
<br>
<ul>
<li><a href="#es6-iter-interface"># Интерфейс итератора</a></li>
<li><a href="#es6-iterable-interface"># Интерфейс итерируемого объекта, символ <code>Symbol.iterator</code></a></li>
<li><a href="#es6-generators"># Генераторы</a></li>
<li><a href="#es6-for-of"># Цикл <code>for-of</code></a></li>
<li><a href="#es6-native-iterables"># Итераторы инстансов встроенных конструкторов и методы, их возвращающие</a></li>
<li><a href="#es6-use-iter"># Методы и конструкторы, принимающие итерируемые объекты</a></li>
<li><a href="#es6-spread"># Оператор spread</a></li>
<li><a href="#es6-comprehensions"># Array / generator comprehensions</a></li>
</ul><br>
Так как часть этого — синтаксис, в этой главе также рассмотрим модуль <code>$for</code>, что реализует часть возможностей этих синтаксических конструкций. Если собираетесь использовать библиотеку с <a href="#preprocessors"># препроцессором ES6+</a>, можете спокойно собирать её без данного модуля.<br>
<br>
<a name="es6-iter-interface"></a><a href="#es6-iter-interface"><b>#</b></a> <b>Итератор</b> — объект, имеющий метод <code>.next</code>, который должен возвращать объект с полями <code>.done</code> — завершен ли обход итератора, и <code>.value</code>
 — значение текущего шага. Пример — метод, создающий итератор для 
положительного числа, позволяющий обойти все целые от 0 до заданного (<a href="http://goo.gl/j9evDY">песочница</a>):<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">NumberIterator</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">number</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>;
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {
    next: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
      <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> i &lt; number
        ? {done: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, value: i++}
        : {done: <span class="hljs-literal"><span class="hljs-literal">true</span></span>};
    }
  }
}

<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> iter = NumberIterator(<span class="hljs-number"><span class="hljs-number">3</span></span>);
iter.next(); <span class="hljs-comment"><span class="hljs-comment">// =&gt; {done: false, value: 0}</span></span>
iter.next(); <span class="hljs-comment"><span class="hljs-comment">// =&gt; {done: false, value: 1}</span></span>
iter.next(); <span class="hljs-comment"><span class="hljs-comment">// =&gt; {done: false, value: 2}</span></span>
iter.next(); <span class="hljs-comment"><span class="hljs-comment">// =&gt; {done: true}</span></span>
</code></pre><br>
<a name="es6-iterable-interface"></a><a href="#es6-iterable-interface"><b>#</b></a> <b>Итерируемый объект</b> (Iterable) — объект, у которого по ключу <code>Symbol.iterator</code> содержится метод, возвращающий для него итератор. Соответственно, что бы и итератор был итерируемым, по ключу <code>Symbol.iterator</code> у него должен быть метод, возвращающий <code>this</code>. Для примера, сделаем числа итерируемыми (<a href="http://goo.gl/598H0u">песочница</a>):<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>.prototype[<span class="hljs-built_in"><span class="hljs-built_in">Symbol</span></span>.iterator] = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> NumberIterator(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>);
}

<span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.from(<span class="hljs-number"><span class="hljs-number">10</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span></span>
</code></pre><br>
Обратите внимание на <code>Symbol.iterator</code>. В Firefox поддерживается протокол итераторов, но в нём, в стабильных сборках, пока нет <a href="#es6-symbol"># символов</a> и вместо <code>Symbol.iterator</code> используется строка <code>"@@iterator"</code>. В ночных сборках появились символы и даже <code>Symbol.iterator</code>, но в протоколе итераторов пока продолжает использоваться строка <code>"@@iterator"</code>.
 Чтобы не сломать протокол итераторов в Firefox, в нем в нашей 
библиотеке мы будем дублировать методы для получения итератора и по 
ключу <code>Symbol.iterator</code> (создаём, если отсутствует), и по ключу <code>"@@iterator"</code>. В v8 полноценная поддержка протокола итераторов появилась с Chrome 38.<br>
<br>
<a name="es6-generators"></a><a href="#es6-generators"><b>#</b></a> <b>Генератор</b>
 — функция, выполнение которой можно приостановить. Возвращает объект с 
расширенным интерфейсом итератора. Подробно их мы рассматривать не будем
 — синтаксис — смотрите, например, в <a href="http://habrahabr.ru/post/210330/">этой</a>
 статье. Для препроцессора, пожалуй, самая страшная часть ECMAScript 6. 
Пример с итерируемыми числами при использовании генератора выглядит 
совсем просто (<a href="http://goo.gl/L6IE5S">песочница</a>):<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>.prototype[<span class="hljs-built_in"><span class="hljs-built_in">Symbol</span></span>.iterator] = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">*(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>;)<span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> i++;
}

<span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.from(<span class="hljs-number"><span class="hljs-number">10</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span></span>
</code></pre><br>
<a name="es6-for-of"></a><a href="#es6-for-of"><b>#</b></a> <b>Цикл <code>for-of</code></b> предназначен для обхода итерируемых объектов. На нашем примере с итерируемыми числами он работает так (<a href="http://goo.gl/Hcnp3z">песочница</a>):<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> num <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span>)<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(num); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 0, 1, 2, 3, 4</span></span>
</code></pre><br>
<a name="es6-native-iterables"></a><a href="#es6-native-iterables"><b>#</b></a> В ECMAScript 6 искаропки итерируемы <code>String, Array, Map, Set</code> и <code>Arguments</code>. Кроме того, <code>Array, Map</code> и <code>Set</code> имеют методы <code>.keys, .values</code> и <code>.entries</code>, которые возвращают итераторы соответственно по ключам, значениям и паре ключ-значение. <b>Core.js добавляет данные итераторы и методы.</b> Вместе с циклом <code>for-of</code> это выглядит так (<a href="http://goo.gl/ArArLq">песочница</a>):<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> string = <span class="hljs-string"><span class="hljs-string">'abc'</span></span>;

<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> val <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> string)<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(val);         <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'a', 'b', 'c'</span></span>

<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> array = [<span class="hljs-string"><span class="hljs-string">'a'</span></span>, <span class="hljs-string"><span class="hljs-string">'b'</span></span>, <span class="hljs-string"><span class="hljs-string">'c'</span></span>];

<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> val <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> array)<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(val);          <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'a', 'b', 'c'. Итератор по умолчанию - .values</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> val <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> array.values())<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(val); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'a', 'b', 'c'</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> key <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> array.keys())<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(key);   <span class="hljs-comment"><span class="hljs-comment">// =&gt; 0, 1, 2</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> [key, val] <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> array.entries()){
  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(key);                             <span class="hljs-comment"><span class="hljs-comment">// =&gt; 0, 1, 2</span></span>
  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(val);                             <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'a', 'b', 'c'</span></span>
}

<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> map = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Map</span></span>([[<span class="hljs-string"><span class="hljs-string">'a'</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>], [<span class="hljs-string"><span class="hljs-string">'b'</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>], [<span class="hljs-string"><span class="hljs-string">'c'</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>]]);

<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> [key, val] <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> map){                     <span class="hljs-comment"><span class="hljs-comment">// Итератор по умолчанию - .entries</span></span>
  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(key);                             <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'a', 'b', 'c'</span></span>
  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(val);                             <span class="hljs-comment"><span class="hljs-comment">// =&gt; 1, 2, 3</span></span>
}
<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> val <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> map.values())<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(val);   <span class="hljs-comment"><span class="hljs-comment">// =&gt; 1, 2, 3</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> key <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> map.keys())<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(key);     <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'a', 'b', 'c'</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> [key, val] <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> map.entries()){
  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(key);                             <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'a', 'b', 'c'</span></span>
  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(val);                             <span class="hljs-comment"><span class="hljs-comment">// =&gt; 1, 2, 3</span></span>
}

<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> set = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Set</span></span>([<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]);

<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> val <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> set)<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(val);            <span class="hljs-comment"><span class="hljs-comment">// =&gt; 1, 2, 3. Итератор по умолчанию - .values</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> val <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> set.values())<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(val);   <span class="hljs-comment"><span class="hljs-comment">// =&gt; 1, 2, 3</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> key <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> set.keys())<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(key);     <span class="hljs-comment"><span class="hljs-comment">// =&gt; 1, 2, 3. Итератор .keys аналогичен .values</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> [key, val] <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> set.entries()){           <span class="hljs-comment"><span class="hljs-comment">// У Set в итераторе .entries ключ и значение равны</span></span>
  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(key);                             <span class="hljs-comment"><span class="hljs-comment">// =&gt; 1, 2, 3</span></span>
  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(val);                             <span class="hljs-comment"><span class="hljs-comment">// =&gt; 1, 2, 3</span></span>
}

<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> list = (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>})(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>);

<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> val <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> list)<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(val);           <span class="hljs-comment"><span class="hljs-comment">// =&gt; 1, 2, 3</span></span>
</code></pre><br>
<ul>
<li>В актуальном Firefox есть все данные итераторы, кроме итератора <code>arguments</code>. Цикл работает, но на базе собственного, устаревшего, протокола.</li>
<li>В v8, цикл <code>for-of</code>, начиная с Chrome 38, работает корректно (не считая деструкции массива) и доступны все данные итераторы, кроме <code>arguments</code>. В старых версиях (с флажком) ожидал итератор, а не итерируемый объект.</li>
<li>В IE, само собой, данный цикл пока не работает и итераторы отсутствуют.</li>
</ul><br>
<a name="for-of-helper"></a><a href="#for-of-helper"><b>#</b></a> Раз 
всё так плохо с поддержкой синтаксиса данного цикла, для тех, кто не 
использует препроцессоры ES6+, добавим в библиотеку хелпер, реализующий 
функционал, аналогичный <code>for-of</code> (<a href="http://goo.gl/B1QWlf">песочница</a>):<br>
<br>
<pre><code class="javascript hljs">$<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Set</span></span>([<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>])).of(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">it</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(it); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 1, 2, 3</span></span>
});

<span class="hljs-comment"><span class="hljs-comment">// 2й аргумент $for - флаг entries - в коллбэк передаётся 2 аргумента</span></span>
$<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>([<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>].entries(), <span class="hljs-literal"><span class="hljs-literal">true</span></span>).of(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">key, value</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(key);   <span class="hljs-comment"><span class="hljs-comment">// =&gt; 0, 1, 2</span></span>
  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(value); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 1, 2, 3</span></span>
});

<span class="hljs-comment"><span class="hljs-comment">// 2й аргумент .of - контекст исполнения коллбэка</span></span>
$<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-string"><span class="hljs-string">'abc'</span></span>).of(<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log, <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'a', 'b', 'c'</span></span>

<span class="hljs-comment"><span class="hljs-comment">// Можно прервать обход итератора, вернув из коллбэка false</span></span>
$<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>([<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>]).of(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">it</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(it); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 1, 2, 3</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(it == <span class="hljs-number"><span class="hljs-number">3</span></span>)<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>;
});
</code></pre><br>
<a name="iter-helpers"></a><a href="#iter-helpers"><b>#</b></a> Прототип объекта <code>arguments</code> — <code>Object.prototype</code>, так что положить метод для получения его итератора в прототип мы не можем. Также есть вариант сборки <b>core.js</b>
 как библиотеки, без расширения нативных объектов. По этим причинам, 
вынесем наружу пару хелперов, для проверки, является ли объект 
итерируемым и для получения итератора объекта — <code>$for.isIterable(foo)</code>, как аналог <code>Symbol.iterator in foo</code> и <code>$for.getIterator(foo)</code>, как аналог <code>foo[Symbol.iterator]()</code>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> list = (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>})(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>);

<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log($<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>.isIterable(list)); <span class="hljs-comment"><span class="hljs-comment">// =&gt; true</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log($<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>.isIterable({}));   <span class="hljs-comment"><span class="hljs-comment">// =&gt; false</span></span>

<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> iter = $<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>.getIterator(list);
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(iter.next());           <span class="hljs-comment"><span class="hljs-comment">// =&gt; {value: 1, done: false}</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(iter.next());           <span class="hljs-comment"><span class="hljs-comment">// =&gt; {value: 2, done: false}</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(iter.next());           <span class="hljs-comment"><span class="hljs-comment">// =&gt; {value: 3, done: false}</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(iter.next());           <span class="hljs-comment"><span class="hljs-comment">// =&gt; {value: undefined, done: true}</span></span>
</code></pre><br>
<a name="es6-use-iter"></a><a href="#es6-use-iter"><b>#</b></a> В ECMAScript 6 итераторы используются для инициализации <a href="#es6-collections"># коллекций</a> <code>Map, Set, WeakMap, WeakSet</code>, массивов <a href="#es6-array-from"># через <code>Array.from</code></a>, их ожидают методы <code>Promise.all, Promise.race</code> для работы с <a href="#es6-promise"># обещаниями</a>.<br>
<br>
<a name="es6-spread"></a><a href="#es6-spread"><b>#</b></a> Оператор <a href="http://www.2ality.com/2011/08/spreading.html">spread</a>,
 применимый при вызове функций, конструкторов и в литерале массива, 
также ожидает итерируемый объект, но это уже совсем далекая от 
стандартной библиотеки тема. Есть желание пользоваться уже сейчас — 
препроцессоры в зубы. <a href="http://goo.gl/sf7BPy">Пример</a>:<br>
<br>
<pre><code class="javascript hljs">[...new <span class="hljs-built_in"><span class="hljs-built_in">Set</span></span>([<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>])]; <span class="hljs-comment"><span class="hljs-comment">// =&gt; [1, 2, 3]</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-number"><span class="hljs-number">1</span></span>, ...[<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>]);  <span class="hljs-comment"><span class="hljs-comment">// =&gt; 1, 2, 3, 4</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> map = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Map</span></span>([[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'a'</span></span>], [<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">'b'</span></span>]]);
<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(...map.keys(), <span class="hljs-number"><span class="hljs-number">3</span></span>);   <span class="hljs-comment"><span class="hljs-comment">// =&gt; [1, 2, 3]</span></span>
</code></pre><br>
<a name="es6-comprehensions"></a><a href="#es6-comprehensions"><b>#</b></a> Ко всему прочему, к протоколу итераторов относятся и <a href="http://www.2ality.com/2013/01/comprehensions.html">array / generator comprehensions</a> (<a href="https://ru.wikipedia.org/wiki/%D0%A1%D0%BF%D0%B8%D1%81%D0%BA%D0%BE%D0%B2%D0%BE%D0%B5_%D0%B2%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5">абстракция массива / генератора?</a>). Раньше они присутствовали в черновике ECMAScript 6, но отложены до ECMAScript 7, хотя давно поддерживаются в <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Array_comprehensions">Firefox</a>. Это возможность генерации массива или итератора из итерируемого объекта с фильтрацией и преобразованием. Т.е. <b>синтаксис <code>filter</code> и <code>map</code> для любых итерируемух объектов</b>. Примеры, кроме последнего — не поддерживается деструкция массива, работают в <b>FF</b>. В <b>6to5</b> и <b>Traceur</b> работает всё. <a href="http://goo.gl/mz9zv2">Пример</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ar1 = [<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(i <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>])i * i];    <span class="hljs-comment"><span class="hljs-comment">// =&gt; [1, 4, 9]</span></span>

<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> set = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Set</span></span>([<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]);
<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ar2 = [<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(i <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> set)<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(i % <span class="hljs-number"><span class="hljs-number">2</span></span>)i * i]; <span class="hljs-comment"><span class="hljs-comment">// =&gt; [1, 9]</span></span>

<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> iter = (<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(i <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> set)<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(i % <span class="hljs-number"><span class="hljs-number">2</span></span>)i * i);
iter.next(); <span class="hljs-comment"><span class="hljs-comment">// =&gt; {value: 1, done: false}</span></span>
iter.next(); <span class="hljs-comment"><span class="hljs-comment">// =&gt; {value: 9, done: false}</span></span>
iter.next(); <span class="hljs-comment"><span class="hljs-comment">// =&gt; {value: undefined, done: true}</span></span>

<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> map1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Map</span></span>([[<span class="hljs-string"><span class="hljs-string">'a'</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>], [<span class="hljs-string"><span class="hljs-string">'b'</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>], [<span class="hljs-string"><span class="hljs-string">'c'</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>]]);
<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> map2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Map</span></span>((<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>([k, v] <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> map1)<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(v % <span class="hljs-number"><span class="hljs-number">2</span></span>)[k + k, v * v])); <span class="hljs-comment"><span class="hljs-comment">// =&gt; Map {aa: 1, cc: 9}</span></span>
</code></pre><br>
Как по мне — штука потрясающая. Вот только это тоже синтаксис.<br>
<br>
<a name="for"></a><a href="#for"><b>#</b></a> Для тех, кто не намерен пользоваться препроцессором ES6, добавим подобное, совсем уж велосипед, в рамках модуля <code>$for</code>. Вызов <code>$for</code> возвращает итератор, расширенный методами <code>of</code>, о котором выше, <code>filter, map</code> и <code>array</code>. Методы <code>filter</code> и <code>map</code>
 возвращают итератор, что, соответственно, фильтрует или преобразует 
значения предыдущего итератора. Этот итератор расширен теми же методами,
 что и итератор <code>$for</code>. Метод <code>array</code> преобразует 
текущий итератор в массиву, он принимает опциональный map-коллбэк. У 
всех этих методов второй, опциональный, аргумент — контекст исполнения. 
Если <code>$for</code> принимает флаг <code>entries</code>, все коллбэки цепочки запускаются с парой аргументов.<br>
<br>
<a href="http://goo.gl/JHecXL">Пример</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ar1 = $<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>([<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>]).array(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">v</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> v * v;
}); <span class="hljs-comment"><span class="hljs-comment">// =&gt; [1, 4, 9]</span></span>

<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> set = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Set</span></span>([<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>]);
<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ar1 = $<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(set).filter(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">v</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> v % <span class="hljs-number"><span class="hljs-number">2</span></span>;
}).array(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">v</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> v * v;
}); <span class="hljs-comment"><span class="hljs-comment">// =&gt; [1, 9]</span></span>

<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> iter = $<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(set).filter(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">v</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> v % <span class="hljs-number"><span class="hljs-number">2</span></span>;
}).map(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">v</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> v * v;
});
iter.next(); <span class="hljs-comment"><span class="hljs-comment">// =&gt; {value: 1, done: false}</span></span>
iter.next(); <span class="hljs-comment"><span class="hljs-comment">// =&gt; {value: 9, done: false}</span></span>
iter.next(); <span class="hljs-comment"><span class="hljs-comment">// =&gt; {value: undefined, done: true}</span></span>

<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> map1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Map</span></span>([[<span class="hljs-string"><span class="hljs-string">'a'</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>], [<span class="hljs-string"><span class="hljs-string">'b'</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>], [<span class="hljs-string"><span class="hljs-string">'c'</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>]]);
<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> map2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Map</span></span>($<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(map1, <span class="hljs-literal"><span class="hljs-literal">true</span></span>).filter(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">k, v</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> v % <span class="hljs-number"><span class="hljs-number">2</span></span>;
}).map(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">k, v</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [k + k, v * v];
})); <span class="hljs-comment"><span class="hljs-comment">// =&gt; Map {aa: 1, cc: 9}</span></span>
</code></pre><br>
С литералом функции из ES5 выходит довольно громоздко, но со стрелочными
 функциями будет почти так же, как и с использованием синтаксиса 
comprehensions.<br>
<br>
Можно было бы добавить и другие операций над итераторами в модуль <code>$for</code>,
 что дало бы универсальный и ленивый (таков протокол итераторов) способ 
обхода и преобразования итерируемых объектов. Но отложим это на будущее.
 А может и к чёрту.<br>
<br>
Библиотека добавляет еще пару итераторов (<a href="#dict-iter"># раз</a>, <a href="#num-iter"># два</a>), конструктор <a href="#dict-module"># <code>Dict</code></a> ожидает итерируемый объект, но не будем в эту главу перетаскивать совсем уж все велосипеды, связанные с итераторами.<br>
<br>
<a name="es6-promise"></a><h2><b><a href="#es6-promise">#</a> ECMAScript 6: Обещания</b></h2><hr><br>
Асинхронность и JavaScript для многих уже практически синонимы. Вот 
только про асинхронность в стандарте ECMAScript 5 нет вообще ничего. 
Даже такие базовые методы, как <code>setTimeout</code> и <code>setInterval</code>, обеспечиваются web-стандартами W3C и WHATWG, <a href="#timeout-interval"># о них поговорим чуть дальше</a>. Разве что функции как объекты первого класса — удобная передача коллбэков. Это порождает <a href="http://callbackhell.com/">коллбэк-ад</a>. Один из способов упрощения параллельного и последовательного исполнения асинхронных функций — библиотеки вроде <a href="https://github.com/caolan/async">async.js</a>.<br>
<br>
Другой подход к упрощению асинхронного программирования — шаблон Promise
 (Обещание). С помощью объекта-обещания, что может вернуть асинхронная 
функция, можно подписаться на её результат. Методы, с помощью которых 
можно подписаться на результат, возвращают новые обещания, что помогает 
лучше структурировать код, выстраивая обещания в цепочки. Также обещания
 решают проблему обработки ошибок: в асинхронном коде <code>try-catch</code>
 не работает, приходится передавать ошибки аргументами коллбэка, что 
иногда еще больше запутывает код. В конце цепочки обещаний можно 
подписаться на любую ошибку, что может в ней возникнуть — как брошенную 
методом <code>reject</code>, так и через <code>throw</code>.<br>
<br>
Популярны такие библиотеки обещаний, как <a href="https://github.com/kriskowal/q">Q</a> или <a href="https://github.com/tildeio/rsvp.js">RSVP</a>. Со временем появился стандарт <a href="http://promisesaplus.com/">Promises/A+</a>, согласно которому все обещания разрешаются асинхронно, а на результат можно подписаться при помощи метода <code>.then</code> (первый аргумент — функция, что выполнится при успешном завершении, второй — при возникновении ошибки).<br>
<br>
И вот, дабы окончательно стандартизовать работу с асинхронным кодом, в ECMAScript 6 была <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">добавлена реализация обещаний</a>,
 совместимая со стандартом Promises/A+ и с минимальным, но покрывающим 
большую часть потребностей, функционалом. Особо их расписывать не буду, 
подробно ознакомиться с ними можно <a href="http://www.html5rocks.com/en/tutorials/es6/promises/">здесь</a> (<a href="http://habrahabr.ru/post/209662/">перевод, но слегка устарел</a>), <a href="http://www.2ality.com/2014/10/es6-promises-api.html">здесь</a> или <a href="http://habrahabr.ru/post/242767/">здесь</a>. ES6 Promise уже доступны в v8 и Firefox, есть полифилы — <a href="https://github.com/jakearchibald/es6-promise">es6-promise</a> и <a href="https://github.com/getify/native-promise-only">native-promise-only</a>.<br>
<br>
<a name="es6-promise-constructor"></a><a href="#es6-promise-constructor"><b>#</b></a> Реализация обещаний из ECMAScript 6 представляет из себя конструктор <code>Promise</code>, принимающий функцию, в которую передается 2 коллбэка — первый разрешает обещание, второй завершает с ошибкой. Кроме <code>then</code>, обещания ES6 содержат метод <code>catch</code> — сокращение для <code>then</code> с пропущенным первым аргументом, с помощью него можно подписаться на ошибку. <a href="http://goo.gl/z3bXC8">Пример</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> log = <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log.bind(<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>);
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sleepRandom</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">time</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">)</span></span>{
    <span class="hljs-comment"><span class="hljs-comment">// resolve разрешает обещание успешно, reject - с ошибкой</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// разрешим обещание через заданное время</span></span>
    setTimeout(resolve, time * <span class="hljs-number"><span class="hljs-number">1e3</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> | <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random() * <span class="hljs-number"><span class="hljs-number">1e3</span></span>);
  });
}

log(<span class="hljs-string"><span class="hljs-string">'Поехали'</span></span>);                <span class="hljs-comment"><span class="hljs-comment">// =&gt; Поехали</span></span>
sleepRandom(<span class="hljs-number"><span class="hljs-number">5</span></span>).then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">result</span></span></span><span class="hljs-function">)</span></span>{
  log(result);                 <span class="hljs-comment"><span class="hljs-comment">// =&gt; 869, через 5 сек.</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sleepRandom(<span class="hljs-number"><span class="hljs-number">10</span></span>);
}).then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">result</span></span></span><span class="hljs-function">)</span></span>{
  log(result);                 <span class="hljs-comment"><span class="hljs-comment">// =&gt; 202, через 10 сек. </span></span>
}).then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
  log(<span class="hljs-string"><span class="hljs-string">'Сразу после прошлого'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; Сразу после прошлого</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'Ашыпка!'</span></span>);
}).then(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
  log(<span class="hljs-string"><span class="hljs-string">'не будет выведено - ошибка'</span></span>);
}).catch(log);                 <span class="hljs-comment"><span class="hljs-comment">// =&gt; Error: 'Ашыпка!'</span></span>
</code></pre><br>
Так как мне было лень полностью адаптировать свой движок обещаний под стандарт, ядро обещаний <b>core.js</b> базируется на библиотеке native-promise-only, от кода которой мало что осталось. Для обеспечения асинхронности используется <code>process.nextTick</code> и способы из полифила <a href="#immediate"># setImmediate</a>.<br>
<br>
<a name="es6-promise-resolve-reject"></a><a href="#es6-promise-resolve-reject"><b>#</b></a> Пара хелперов <code>Promise.resolve</code> и <code>Promise.reject</code> возвращают завершенное, соответственно, успешно или с ошибкой обещание с переданным им значением. Если <code>Promise.resolve</code>
 принимает обещание — его и возвращает. Также его можно использовать для
 преобразования других thenable (например, jQuery Deferred) в обещания, в
 старой версии стандарта для этого был отдельный метод — <code>Promise.cast</code>. <a href="http://goo.gl/vr8TN3">Пример</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.resolve(<span class="hljs-number"><span class="hljs-number">42</span></span>).then(log); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 42</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.reject(<span class="hljs-number"><span class="hljs-number">42</span></span>).catch(log); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 42</span></span>

<span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.resolve($.getJSON(<span class="hljs-string"><span class="hljs-string">'/data.json'</span></span>)); <span class="hljs-comment"><span class="hljs-comment">// =&gt; ES6 promise</span></span>
</code></pre><br>
<a name="es6-promise-all"></a><a href="#es6-promise-all"><b>#</b></a> Хелпер <code>Promise.all</code> возвращает обещание, которое разрешится, когда разрешатся все обещания из переданной ему <a href="#es6-iterators"># итерируемой</a>
 коллекции (в v8 сейчас работает только с массивами, исправлять в рамках
 библиотеки пока не стал — не вижу особого смысла использовать его с 
чем-то ещё). Элементы коллекции, не являющиеся обещаниями, приводятся к 
обещаниям через <code>Promise.resolve</code>. <a href="http://goo.gl/62OcTx">Пример</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.all([
  <span class="hljs-string"><span class="hljs-string">'foo'</span></span>,
  sleepRandom(<span class="hljs-number"><span class="hljs-number">5</span></span>),
  sleepRandom(<span class="hljs-number"><span class="hljs-number">15</span></span>),
  sleepRandom(<span class="hljs-number"><span class="hljs-number">10</span></span>)  <span class="hljs-comment"><span class="hljs-comment">// через 15 секунд выведет что-то вроде</span></span>
]).then(log);      <span class="hljs-comment"><span class="hljs-comment">// =&gt; ['foo', 956, 85, 382]</span></span>
</code></pre><br>
<a name="es6-promise-race"></a><a href="#es6-promise-race"><b>#</b></a> Хелпер <code>Promise.race</code>
 похож на предыдущий, но возвращает обещание, которое разрешится, когда 
разрешится хотя бы одно обещание из переданной ему коллекции. По моему 
скромному мнению, в отличие от <code>Promise.all</code>, чуть менее, чем
 полностью, бесполезен. Разве что с его помощью становится чуть проще 
повесить ограничение на время разрешения обещания. <a href="http://goo.gl/L8ovkJ">Пример</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">timeLimit</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">promise, time</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.race([promise, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">)</span></span>{
    setTimeout(reject, time * <span class="hljs-number"><span class="hljs-number">1e3</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'Await &gt; '</span></span> + time + <span class="hljs-string"><span class="hljs-string">' sec'</span></span>));
  })]);
}

timeLimit(sleepRandom(<span class="hljs-number"><span class="hljs-number">5</span></span>), <span class="hljs-number"><span class="hljs-number">10</span></span>).then(log);   <span class="hljs-comment"><span class="hljs-comment">// =&gt; через 5 секунд получили результат 853</span></span>
timeLimit(sleepRandom(<span class="hljs-number"><span class="hljs-number">15</span></span>), <span class="hljs-number"><span class="hljs-number">10</span></span>).catch(log); <span class="hljs-comment"><span class="hljs-comment">// Error: Await &gt; 10 sec</span></span>
</code></pre><br>
<a name="async-await"></a><a href="#async-await"><b>#</b></a> Даже с 
обещаниями, асинхронному JavaScript есть еще куда стремиться в плане 
удобства, потому к добавлению в ECMAScript 7 предложены <a href="https://github.com/lukehoban/ecmascript-asyncawait">асинхронные функции</a>, расширяющие синтаксис ключевыми словами <code>async / await</code> и базирующиеся на <a href="#es6-generators"># генераторах</a>, обещаниях и генераторах, возвращающих обещания :) Данный синтаксис уже поддерживается и <b>Traceur</b>, и <b>6to5</b>. <a href="http://goo.gl/v5JRT8">Пример</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> delay = time =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(resolve =&gt; setTimeout(resolve, time));

<span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sleepRandom</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">time</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> delay(time * <span class="hljs-number"><span class="hljs-number">1e3</span></span>);
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> | <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random() * <span class="hljs-number"><span class="hljs-number">1e3</span></span>;
}
<span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sleepError</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">time, msg</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> delay(time * <span class="hljs-number"><span class="hljs-number">1e3</span></span>);
  <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(msg);
}

(<span class="hljs-keyword"><span class="hljs-keyword">async</span></span> () =&gt; {
  <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> {
    log(<span class="hljs-string"><span class="hljs-string">'Поехали'</span></span>);            <span class="hljs-comment"><span class="hljs-comment">// =&gt; Поехали</span></span>
    log(<span class="hljs-keyword"><span class="hljs-keyword">await</span></span> sleepRandom(<span class="hljs-number"><span class="hljs-number">5</span></span>)); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 936, через 5 сек.</span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> [a, b, c] = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.all([
      sleepRandom(<span class="hljs-number"><span class="hljs-number">5</span></span>),
      sleepRandom(<span class="hljs-number"><span class="hljs-number">15</span></span>),
      sleepRandom(<span class="hljs-number"><span class="hljs-number">10</span></span>)
    ]);
    log(a, b, c);              <span class="hljs-comment"><span class="hljs-comment">// =&gt; 210 445 71, через 15 сек.</span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> sleepError(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-string"><span class="hljs-string">'Ашыпка!'</span></span>);
    log(<span class="hljs-string"><span class="hljs-string">'Не будет выведено'</span></span>);
  } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span>(e){
    log(e);                    <span class="hljs-comment"><span class="hljs-comment">// =&gt; Error: 'Ашыпка!', через 5 сек.</span></span>
  }
})();
</code></pre><br>
Со временем, обещания изменят значительную часть стандартного асинхронного API JavaScript. Уже <a href="https://fetch.spec.whatwg.org/#fetch-api">стандартизована</a> (<a href="https://github.com/github/fetch">полифил</a>) глобальная функция <code>fetch</code> — простая и удобная обертка над <code>XMLHttpRequest</code>, возвращающая обещание. <a href="https://esdiscuss.org/topic/promise-returning-delay-function">Предлагают</a> добавить, и, думаю, добавят, простую, но часто необходимую, функцию <code>delay</code>, аналогичную функции из предыдущего примера, возвращающую обещание, что разрешится через заданное время — прощай, <code>setTimeout</code>. Пожалуй, <code>delay</code> было бы неплохо добавить и в данную библиотеку.<br>
<br>
<a name="array-generics"></a><h2><b><a href="#array-generics">#</a> Mozilla JavaScript: Статические версии методов массива</b></h2><hr><br>
Выше мы рассматривали протокол итераторов. Вот только это не 
единственный стандарт обхода коллекций в JavaScript. Есть куда более 
простой, быстрый и древний. Это array-like объекты.<br>
<br>
Кроме массивов, в JavaScript много сущностей, подобных им, но при этом 
массивами не являющихся. Эти объекты, как и массивы, содержат длину <code>.length</code> и элементы по ключу [от 0 до <code>.length</code>), которые могут быть пропущены — тогда возникают «дырки». Они не содержат под собой <code>Array.prototype</code>, соответственно не имеют и методов массива. Это объект <code>arguments</code>, строки (формально — IE8+), типизированные массивы (массивы, но не содержат под собой <code>Array.prototype</code>), коллекции элементов DOM, jQuery объекты и т.д.<br>
<br>
Почти все методы прототипа массива — дженерики (как сообщает <a href="http://es5.javascript.ru/x15.4.html#x15.4.4.5">перевод спецификации</a> — «нарочито родовые» функции). Они не требуют, что бы объект, из контекста которого они запускались, был массивом. <a href="http://www.2ality.com/2012/02/concat-not-generic.html">Разве что <code>.concat</code> не совсем.</a> Думаю, многим знакомы такие конструкции:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.prototype.slice.call(<span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>);
<span class="hljs-comment"><span class="hljs-comment">// или</span></span>
[].slice.call(<span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>);
</code></pre><br>
Громоздко и невнятно.<br>
<br>
ECMAScript 6 добавляет метод <a href="#es6-array-from"># <code>Array.from</code></a>, с его помощью можно привести к массиву итерируемые и array-like объекты.<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.from(<span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>).slice(<span class="hljs-number"><span class="hljs-number">1</span></span>);
</code></pre><br>
Вроде удобно, но <a href="http://jsperf.com/array-methods-on-array-like">далеко не дёшево</a>
 — даже для самой простой операции мы вынуждены приводить весь объект к 
массиву, притом, в большинстве случаев, через довольно тяжелый протокол 
итераторов.<br>
<br>
В JavaScript от Mozilla, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/New_in_JavaScript/1.6">в версии языка 1.6</a> и, соответственно, в Firefox, еще в 2005 году, вместе с методами массива, позднее вошедшими в ECMAScript 5, были добавлены и <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array#Array_generic_methods">статические версии методов массива</a>. Ни в 5ю, ни в 6ю редакцию ECMAScript они не попали, хоть и присутствуют в ветке разработки <a href="http://wiki.ecmascript.org/doku.php?id=strawman:array_statics">Strawman</a>
 довольно давно, но я лично надеюсь на их появлении в одной из будущих 
версий ECMAScript. Добавим в библиотеку и их — реализуются элементарно, а
 так как они уже имеются в огнелисе — отнесем их в категорию костылей, а
 не велосипедов.<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.slice(<span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>);

<span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.join(<span class="hljs-string"><span class="hljs-string">'abcdef'</span></span>, <span class="hljs-string"><span class="hljs-string">'+'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'a+b+c+d+e+f'</span></span>

<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> form = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementsByClassName(<span class="hljs-string"><span class="hljs-string">'form__input'</span></span>);
<span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.reduce(form, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">memo, it</span></span></span><span class="hljs-function">)</span></span>{
  memo[it.name] = it.value;
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> memo; 
}, {}); <span class="hljs-comment"><span class="hljs-comment">// =&gt; например, {name: 'Вася', age: '42', sex: 'yes, please'}</span></span>
</code></pre><br>
<a name="schedule"></a><h2><b><a href="#schedule">#</a> Отложенное исполнение: setTimeout, setInterval, setImmediate</b></h2><hr><br>
<a name="timeout-interval"></a><h4><b><a href="#timeout-interval">#</a> setTimeout, setInterval</b></h4><br>
Пожалуй, начнем с привычных всем <code>setTimeout</code> и <code>setInterval</code>. Многие не знают, что по стандарту (<a href="http://www.w3.org/TR/html5/webappapis.html#timers">W3C</a>, <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#timers">WHATWG</a>)
 эти функции кроме коллбэка и времени задержки, принимают дополнительные
 аргументы, с какими запускается переданный коллбэк. Но тут, как обычно,
 проблема в IE. В IE9- <code>setTimeout</code> и <code>setInterval</code> принимают только 2 аргумента, это лечится оберткой в несколько строчек.<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Было:</span></span>
setTimeout(log.bind(<span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-number"><span class="hljs-number">42</span></span>), <span class="hljs-number"><span class="hljs-number">1000</span></span>);
<span class="hljs-comment"><span class="hljs-comment">// Стало:</span></span>
setTimeout(log, <span class="hljs-number"><span class="hljs-number">1000</span></span>, <span class="hljs-number"><span class="hljs-number">42</span></span>);
</code></pre><br>
<a name="immediate"></a><h4><b><a href="#immediate">#</a> setImmediate</b></h4><br>
JavaScript однопоточен и иногда это довольно неприятно. Любые длительные
 тяжелые вычисления на клиенте подвесят пользовательский интерфейс, а на
 сервере — обработка запросов. В этом случае спасает разбиение тяжелой 
задачи на лёгкие подзадачи, исполняемые асинхронно, между которыми может
 проходить ввод / вывод.<br>
<br>
Также в JavaScript (пока) не оптимизируется хвостовая рекурсия. Когда 
функция будет вызвана определённое число раз рекурсивно, будет 
сгенерирована ошибка <code>RangeError: Maximum call stack size exceeded</code>.
 Это число, в зависимости от платформы, варьирует от нескольких сотен до
 нескольких десятков тысяч. Асинхронный рекурсивный вызов спасает от 
переполнения стека. Правда, рекурсивный вызов обычно легко 
переписывается в обычный цикл, что предпочтительней. <br>
<br>
Для решения подобных проблем можно использовать <code>setTimeout</code> с минимальной задержкой, но получится очень неспешно. Минимальная задержка <code>setTimeout</code>
 по спецификации — 4 мс, а на некоторых платформах и того больше. Итого,
 максимум, ~250 рекурсивных вызовов в секунду в современных браузерах и,
 например, ~64 в IE8. Приходилось, да и приходится, велосипедить, так 
как есть способы сделать эффективное отложенное исполнение.<br>
<br>
Если на Node.js был <code>process.nextTick</code>, то на клиент помощь пришла откуда не ждали. В IE10 Microsoft добавил метод <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window.setImmediate">setImmediate</a>, устанавливающий задачу, выполняемую сразу после того, как отработает ввод / вывод, и предложил его для стандартизации <a href="https://dvcs.w3.org/hg/webperf/raw-file/tip/specs/setImmediate/Overview.html">W3C</a>. Позже он <a href="http://habrahabr.ru/post/172363/">появился и на Node.js</a>. FF и Chromium его добавлять не спешат. Популярен <a href="https://github.com/YuzuJS/setImmediate">такой</a> полифил.<br>
<br>
Способов реализации эффективного отложенного исполнения функций огромное
 количество. Для достижения максимального быстродействия на различных 
платформах нам придется использовать многие (аналогичны способам из 
упомянутого выше полифила). Это:<br>
<br>
<ul>
<li>Для старых версий Node.js — <code>process.nextTick</code></li>
<li>Для современных браузеров — <code>postMessage</code></li>
<li>Для WebWorker'ов — <code>MessageChannel</code></li>
<li>Для IE8- — <code>script.onreadystatechange</code></li>
<li>И уж если эти способы не помогли — <code>setTimeout</code> с минимальной задержкой</li>
</ul><br>
<pre><code class="javascript hljs">setImmediate(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">arg1, arg2</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(arg1, arg2); <span class="hljs-comment"><span class="hljs-comment">// =&gt; Сообщение будет выведено асинхронно с минимальной задержкой</span></span>
}, <span class="hljs-string"><span class="hljs-string">'Сообщение будет выведено асинхронно'</span></span>, <span class="hljs-string"><span class="hljs-string">'с минимальной задержкой'</span></span>);

clearImmediate(setImmediate(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Сообщение не будет выведено'</span></span>);
}));
</code></pre><br>
Кроме <code>setImmediate</code>, существует его более быстрая альтернатива — концепция <code>asap</code> (as soon as possible, <a href="https://github.com/kriskowal/asap">библиотека</a>)
 — по возможности, создаём microtask, что выполнится до любого ввода / 
вывода. Добавить такой глобальный метод в стандарт языка <a href="https://github.com/rwaldron/tc39-notes/blob/master/es6/2014-09/sept-25.md#510-globalasap-for-enqueuing-a-microtask">думают и в tc39</a>. Может и его стоит добавить в библиотеку?<br>
<br>
<a name="console"></a><h2><b><a href="#console">#</a> Консоль</b></h2><hr><br>
<a href="https://developer.mozilla.org/en-US/docs/Web/API/console">Консоль</a>
 — единственное универсальное средство вывода и отладки как в браузере, 
так и на сервере. При этом, консоль не является частью спецификации 
ECMAScript и вообще не стандартизована. Есть заброшенные <a href="https://github.com/DeveloperToolsWG/console-object">наброски спецификации</a>, фактическая реализация на всех платформах различается.<br>
<br>
<a name="console-cap"></a><a href="#console-cap"><b>#</b></a> В IE7- консоль отсутствует полностью. У некоторых браузеров «консоль Гейзенберга» — <code>console</code>
 определена только тогда, когда пользователь за ней наблюдает. Ну и, 
конечно, не все методы доступны на всех платформах. Свою консоль в стиле
 <a href="http://getfirebug.com/firebuglite">Firebug Lite</a> мы изобретать не будем, просто сделаем заглушки для методов, дабы можно было их использовать, не проверяя наличия.<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Было:</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.console &amp;&amp; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log)<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-number"><span class="hljs-number">42</span></span>);
<span class="hljs-comment"><span class="hljs-comment">// Стало:</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-number"><span class="hljs-number">42</span></span>);
</code></pre><br>
<a name="console-bind"></a><a href="#console-bind"><b>#</b></a> В Firefox и Chromium методы консоли должны быть запущены из контекста <code>console</code>, так что если нужно передать их в качестве коллбэка придется привязать — например, <a href="#es5-bind"># <code>console.log.bind(console)</code></a>. В IE, Firebug и на Node.js можно передавать, не привязывая, что гораздо удобней. Соответственно, привяжем методы к объекту <code>console</code>.<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Было:</span></span>
setTimeout(<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log.bind(<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>, <span class="hljs-number"><span class="hljs-number">42</span></span>), <span class="hljs-number"><span class="hljs-number">1000</span></span>);
[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>].forEach(<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log, <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>);
<span class="hljs-comment"><span class="hljs-comment">// Стало:</span></span>
setTimeout(<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log, <span class="hljs-number"><span class="hljs-number">1000</span></span>, <span class="hljs-number"><span class="hljs-number">42</span></span>);
[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>].forEach(<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log);
</code></pre><br>
Но есть здесь и одна проблема: на некоторых платформах, при вызове 
методов консоли выводится и строка, откуда был вызван метод. При 
переопределении методов консоли, этой строкой будет строка в <b>сore.js</b>. Если это для вас критично — можете собрать библиотеку без модуля консоли.<br>
<br>
<h4><b>Так как консоль не стандартизована, добавим немного отсебятины:</b></h4><br>
<a name="console-disable"></a><a href="#console-disable"><b>#</b></a> 
Возможность выключить вывод в консоль. Конечно, на продакшне вызовы 
методов консоли лучше не оставлять в коде, удаляя их либо ручками, либо 
используя <a href="http://www.elijahmanor.com/grunt-away-those-pesky-console-log-statements/">более продвинутые средства</a>, но это удобно и нужно далеко не всегда.<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.disable();
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.warn(<span class="hljs-string"><span class="hljs-string">'Консоль отключена, вы не увидите этого сообщения.'</span></span>);
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.enable();
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.warn(<span class="hljs-string"><span class="hljs-string">'Консоль снова включена.'</span></span>);
</code></pre><br>
Привязка контекста и возможность отключить консоль также присутствует, например, в <a href="http://habrahabr.ru/post/116852/">этой</a> библиотеке от <a href="https://habrahabr.ru/users/theshock/" class="user_link">TheShock</a>.<br>
<br>
<a name="II"></a><h1><b><a href="#II">#</a> Часть вторая: Велосипеды</b></h1><hr><blockquote>Вариантов ноль, вариантов нет.<br>
Хотелось полмира — хватило на велосипед.<br>
<i><b>— Петля пристрастия</b></i></blockquote><br>
Велосипеды, в контексте данной статьи / библиотеки — весь 
нестандартизованный функционал. Собственно, то, чего, по моему мнению, 
не хватает стандартной библиотеке языка, даже если она будет реализована
 согласно всем имеющимся на данный момент стандартам. Сюда же отнесём и 
то, что предлагают в ES7+, так как это может быть далеко не раз 
пересмотрено или вообще отклонено.<br>
<br>
<a name="classify"></a><h2><b><a href="#classify">#</a> Классификация данных</b></h2><hr><br>
<a name="is-object"></a><a href="#is-object"><b>#</b></a> Тут начнем совсем с банальщины. В JavaScript по спецификации ECMAScript 5 есть <a href="http://es5.javascript.ru/x8.html#x8">6 типов данных</a>: <code>Undefined, Null, Boolean, String, Number</code> и <code>Object</code>. ECMAScript 6 добавляет еще один тип данных — <a href="#es6-symbol"># <code>Symbol</code></a>. Для определения типа данных есть оператор <code>typeof</code>. Вот только работает он специфично. Так уж <a href="http://habrahabr.ru/post/200664/">исторически сложилось</a>, что <code>typeof null</code> возвращает <code>'object'</code> и <a href="http://wiki.ecmascript.org/doku.php?id=harmony:typeof_null">попытка исправить</a> это в Harmony успехом не увенчалась. Для типа <code>Object</code> <code>typeof</code> возвращает либо <code>'object'</code>, либо <code>'function'</code>, в зависимости от наличия внутреннего метода <code>[[Call]]</code>. Итого получаем, что оператор <code>typeof</code> возвращает именно тип данных только для примитивов, и то не всех.<br>
<br>
Если проверить, является ли переменная <code>null</code> просто, достаточно её с ним сравнить, то с <code>Object</code> придется либо каждый раз писать сотни кода, либо хелпер. Можно, конечно, сделать так — <code>Object(foo) === foo</code>, но данное решение <a href="http://jsperf.com/core-js-isobject">далеко не самое быстрое</a> — приводит примитив к объекту. В ранних черновиках ES6 присутствовал метод <code>Object.isObject</code>, но, видимо, из-за попытки исправить <code>typeof null</code>, был удален. А проверять, является ли переменная объектом, приходится постоянно. Так что <b>добавим хелпер <code>Object.isObject</code></b>, реализованный проще некуда (<a href="http://goo.gl/CIkM2P">песочница</a>):<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.isObject = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">it</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> it != <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> it == <span class="hljs-string"><span class="hljs-string">'object'</span></span> || <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> it == <span class="hljs-string"><span class="hljs-string">'function'</span></span>);
}
<span class="hljs-comment"><span class="hljs-comment">// ...</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> {};              <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'object'</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> <span class="hljs-built_in"><span class="hljs-built_in">isNaN</span></span>;           <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'function'</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>;            <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'object'</span></span>

<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.isObject({});    <span class="hljs-comment"><span class="hljs-comment">// =&gt; true</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.isObject(<span class="hljs-built_in"><span class="hljs-built_in">isNaN</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; true</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.isObject(<span class="hljs-literal"><span class="hljs-literal">null</span></span>);  <span class="hljs-comment"><span class="hljs-comment">// =&gt; false</span></span>
</code></pre><br>
<a name="classof"></a><a href="#classof"><b>#</b></a> А вот с классификацией объектов интересней. Оператор <code>instanceof</code> проверяет цепочку прототипов. Если создать объект из прототипа или установить объекту в качестве прототипа <code>Function.prototype</code>, это его не сделает функцией. Свойство инстанса <code>constructor</code> не может ничего гарантировать, а <code>constructor.name</code>
 мало того, что теряет всякий смысл при сжатии кода, еще и не 
поддерживается IE. Помочь с классификацией объекта может внутреннее 
свойство <code>[[Class]]</code>. Единственный способ выдрать его наружу — хорошо знакомая многим страшная конструкция <code>Object.prototype.toString.call(foo).slice(8, -1)</code>. <a href="http://goo.gl/2pbqnZ">Пример</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.prototype.toString.call(<span class="hljs-number"><span class="hljs-number">1</span></span>).slice(<span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">-1</span></span>);   <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'Number'</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.prototype.toString.call([]).slice(<span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">-1</span></span>);  <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'Array'</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.prototype.toString.call(<span class="hljs-regexp"><span class="hljs-regexp">/./</span></span>).slice(<span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">-1</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'RegExp'</span></span>
</code></pre><br>
На базе получения внутреннего класса большинство библиотек добавляет набор утилит по типу <a href="#es5-is-array"># <code>Array.isArray</code></a>: Object.is<i>Type</i> в <a href="http://sugarjs.com/api/Object/isType">Sugar</a>, _.is<i>Type</i> в <a href="http://underscorejs.org/#isArray">Undescore</a> и т.п.<br>
<br>
Мы поступим иначе — <b>один универсальный метод <code>Object.classof</code> для классификации данных</b>, похожий на оператор <code>typeof!</code> из <a href="http://livescript.net/#operators-object">LiveScript</a> (<a href="http://goo.gl/BxwFTQ">пример</a>).<br>
<br>
Вот только у <code>Object.prototype.toString.call(foo).slice(8, -1)</code> есть пара проблем:<br>
<ul>
<li>В старых IE, применимо к <code>null, undefined</code> и <code>arguments</code>, данная конструкция возвращает <code>"Object"</code>. Это легко лечится дополнительными проверками.</li>
<li>Что делать с инстансами конструкторов из ECMAScript 6, полифилы которых мы добавили в нашей библиотеке? Так же будут возвращать <code>"Object"</code>. Тут на помощь приходит <a href="http://people.mozilla.org/~jorendorff/es6-draft.html#sec-object.prototype.tostring">измененная логика работы</a> <code>Object#toString</code> в ECMAScript 6.</li>
</ul><br>
Внезапно, но в ECMAScript 6 вообще отсутствует такое внутреннее свойство объектов, как <code>[[Class]]</code>. <code>Object#toString</code> ES6, через проверку специальных внутренних свойств, возвращает принадлежность переменной к <code>Undefined, Null, Array, String, Arguments, Function, Error, Boolean, Number, Date</code> или <code>RegExp</code>, а у остальных ищет подсказку по <a href="#es6-symbol"># символу</a> <b><code>Symbol.toStringTag</code></b>. Если метод находит подсказку и она не является именем одного из встроенных «классов» — возвращает её, не находит — <code>Object</code>.<br>
<br>
Исправим логику работы <code>Object#toString</code>, благо благодаря <a href="#es5-keys"># одному противному, но веселому, багу</a> мы можем сделать это и в IE8-, не сломав при этом <code>for-in</code>. Ну и, конечно, реализуем данный подход в методе <code>Object.classof</code>. В качестве бонуса мы получаем возможность классификации инстансов пользовательских конструкторов. <a href="http://goo.gl/M7qIFd">Пример</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> classof = <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.classof;

classof(<span class="hljs-literal"><span class="hljs-literal">null</span></span>);                 <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'Null'</span></span>
classof(<span class="hljs-literal"><span class="hljs-literal">undefined</span></span>);            <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'Undefined'</span></span>
classof(<span class="hljs-number"><span class="hljs-number">1</span></span>);                    <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'Number'</span></span>
classof(<span class="hljs-literal"><span class="hljs-literal">true</span></span>);                 <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'Boolean'</span></span>
classof(<span class="hljs-string"><span class="hljs-string">'string'</span></span>);             <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'String'</span></span>
classof(<span class="hljs-built_in"><span class="hljs-built_in">Symbol</span></span>());             <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'Symbol'</span></span>

classof(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Number</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>));        <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'Number'</span></span>
classof(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span>(<span class="hljs-literal"><span class="hljs-literal">true</span></span>));    <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'Boolean'</span></span>
classof(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(<span class="hljs-string"><span class="hljs-string">'string'</span></span>)); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'String'</span></span>

<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fn   = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{}
  , list = (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>})(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>);

classof({});                   <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'Object'</span></span>
classof(fn);                   <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'Function'</span></span>
classof([]);                   <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'Array'</span></span>
classof(list);                 <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'Arguments'</span></span>
classof(<span class="hljs-regexp"><span class="hljs-regexp">/./</span></span>);                  <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'RegExp'</span></span>
classof(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">TypeError</span></span>);        <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'Error'</span></span>

classof(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Set</span></span>);              <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'Set'</span></span>
classof(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Map</span></span>);              <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'Map'</span></span>
classof(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">WeakSet</span></span>);          <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'WeakSet'</span></span>
classof(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">WeakMap</span></span>);          <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'WeakMap'</span></span>
classof(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(fn));      <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'Promise'</span></span>

classof([].values());          <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'Array Iterator'</span></span>
classof(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Set</span></span>().values());   <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'Set Iterator'</span></span>
classof(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Map</span></span>().values());   <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'Map Iterator'</span></span>

classof(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>);                 <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'Math'</span></span>
classof(<span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>);                 <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'JSON'</span></span>

<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Example</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{}
Example.prototype[<span class="hljs-built_in"><span class="hljs-built_in">Symbol</span></span>.toStringTag] = <span class="hljs-string"><span class="hljs-string">'Example'</span></span>;

classof(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Example);          <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'Example'</span></span>
</code></pre><br>
<a name="dict"></a><h2><b><a href="#dict">#</a> Словари</b></h2><hr><br>
В JavaScript объекты и словари (ассоциативные массивы) — одно. В этом 
есть как плюсы — это кажется очень удобным, не зря так распространён 
основанный на объектной системе JavaScript формат обмена данными <code>JSON</code>, так и минусы.<br>
<br>
Для словарей нет разницы между получением элемента по ключу и метода из 
прототипа, что, при наличии под объектом прототипа (а у объекта, 
заданного нотацией — фигурными скобками, это <code>Object.prototype</code>), ломает базовые операции над словарем. Для объектов же это ограничения на расширение <code>Object.prototype</code>.<br>
<br>
В ECMAScript 6 появился <a href="#es6-map"># уже упомянутый выше</a> новый вид коллекций ключ-значение — <code>Map</code>.
 Его быстродействие иногда даже выше, чем у объектов (само собой, не 
касается полифилов). Вот только ИМХО в большинстве случаев их не 
заменит. У <code>Map</code>, в отличии от словарей-объектов, отсутствует
 простая запись литералом, доступ к свойствам происходит через методы — 
не такой лаконичный. <code>Map</code>'ы далеки от любимого всеми <code>JSON</code> и не столь универсальны. Да и обычно в ключах словаря не требуется ничего, кроме строк.<br>
<br>
<ul>
<li><a href="#dict-and-object-prototype"># Проблема: <code>Object.prototype</code> и словари</a></li>
<li><a href="#dict-module"># Конструктор <code>Dict</code></a></li>
<li><a href="#dict-safe-crud"># Методы для безопасной работы со словарем, имеющим под собой прототип</a></li>
<li><a href="#dict-methods"># Методы для работы со словарем</a></li>
<li><a href="#dict-iter"># Итерация по словарю</a></li>
<li><a href="#dict-next"># Возможные перспективы</a></li>
</ul><br>
<a name="dict-and-object-prototype"></a><h4><b><a href="#dict-and-object-prototype">#</a> Проблема: Object.prototype и словари</b></h4><br>
В <code>Object.prototype</code>, как подсказывает <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/prototype">Mozilla Developer Network</a>, в зависимости от реализации, могут находиться:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.prototype.constructor();
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.prototype.hasOwnProperty();
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.prototype.isPrototypeOf();
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.prototype.propertyIsEnumerable();
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.prototype.toLocaleString();
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.prototype.toString();
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.prototype.valueOf();
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.prototype.__proto__;
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.prototype.__count__;
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.prototype.__parent__;
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.prototype.__noSuchMethod__;
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.prototype.__defineGetter__();
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.prototype.__defineSetter__();
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.prototype.__lookupGetter__();
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.prototype.__lookupSetter__();
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.prototype.eval();
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.prototype.toSource();
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.prototype.unwatch();
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.prototype.watch();
</code></pre><br>
Чем это нам может грозить?<br>
<br>
Предположим, у нас есть примитивный телефонный справочник, и пользователь имеет доступ к его API:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> phone = (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> db = {
    <span class="hljs-string"><span class="hljs-string">'Вася'</span></span>: <span class="hljs-string"><span class="hljs-string">'+7987654'</span></span>,
    <span class="hljs-string"><span class="hljs-string">'Петя'</span></span>: <span class="hljs-string"><span class="hljs-string">'+7654321'</span></span>
  };
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {
    has: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">)</span></span>{
      <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> name <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> db;
    },
    get: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">)</span></span>{
      <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> db[name];
    },
    set: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name, phone</span></span></span><span class="hljs-function">)</span></span>{
      db[name] = phone;
    },
    <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">)</span></span>{
      <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> db[name];
    }
  };
})();
</code></pre><br>
<a href="http://goo.gl/1fJAhL">Получаем</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(phone.has(<span class="hljs-string"><span class="hljs-string">'Вася'</span></span>));     <span class="hljs-comment"><span class="hljs-comment">// =&gt; true</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(phone.get(<span class="hljs-string"><span class="hljs-string">'Вася'</span></span>));     <span class="hljs-comment"><span class="hljs-comment">// =&gt; '+7987654'</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(phone.has(<span class="hljs-string"><span class="hljs-string">'Дима'</span></span>));     <span class="hljs-comment"><span class="hljs-comment">// =&gt; false</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(phone.get(<span class="hljs-string"><span class="hljs-string">'Дима'</span></span>));     <span class="hljs-comment"><span class="hljs-comment">// =&gt; undefined</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(phone.has(<span class="hljs-string"><span class="hljs-string">'toString'</span></span>)); <span class="hljs-comment"><span class="hljs-comment">// =&gt; true</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(phone.get(<span class="hljs-string"><span class="hljs-string">'toString'</span></span>)); <span class="hljs-comment"><span class="hljs-comment">// =&gt; function toString() { [native code] }</span></span>
</code></pre><br>
Свойство, при отсутствии, берется из цепочки прототипов, <code>in</code> аналогично проверяет его наличие. Давайте добавим / заменим <code>in</code> на метод <code>hasOwnProperty</code>, проверяющий наличие свойства в объекте без учета цепочки прототипов. <a href="http://goo.gl/IvQUWE">Получаем</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// ...</span></span>
    has: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">)</span></span>{
      <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> db.hasOwnProperty(name);
    },
    get: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">)</span></span>{
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(db.hasOwnProperty(name))<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> db[name];
    },
<span class="hljs-comment"><span class="hljs-comment">// ...</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(phone.get(<span class="hljs-string"><span class="hljs-string">'Вася'</span></span>));              <span class="hljs-comment"><span class="hljs-comment">// =&gt; '+7987654'</span></span>
phone.set(<span class="hljs-string"><span class="hljs-string">'hasOwnProperty'</span></span>, <span class="hljs-string"><span class="hljs-string">'+7666666'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// Добавляем нового "абонента"</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(phone.get(<span class="hljs-string"><span class="hljs-string">'Вася'</span></span>));              <span class="hljs-comment"><span class="hljs-comment">// TypeError: string is not a function</span></span>
</code></pre><br>
Уже довольно серьезно, особенно если этот «телефонный справочник» 
находится на серверной стороне. Методы прототипа можно перекрыть. 
Соответственно, нужно использовать метод <code>hasOwnProperty</code>, отвязанный от объекта. Получаем необходимость использования на каждый чих громоздких проверок. <a href="http://goo.gl/FEKzNd">Примерно такой трэш</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// ...</span></span>
    has: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">)</span></span>{
      <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.prototype.hasOwnProperty.call(db, name);
    },
    get: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">)</span></span>{
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.prototype.hasOwnProperty.call(db, name))<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> db[name];
    },
<span class="hljs-comment"><span class="hljs-comment">// ...</span></span>
</code></pre><br>
Для решения данной проблемы в языке пригодился бы <a href="http://wiki.ecmascript.org/doku.php?id=strawman:has_operator">оператор проверки</a>, является ли свойство собственным, похожий на <code>in</code>.<br>
<br>
Вы уже решили, что проблемы закончились? <a href="http://goo.gl/yZfzuz">Ничего подобного</a>:<br>
<br>
<pre><code class="javascript hljs">phone.set(<span class="hljs-string"><span class="hljs-string">'__proto__'</span></span>, <span class="hljs-string"><span class="hljs-string">'+7666666'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// Добавляем нового "абонента"</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(phone.get(<span class="hljs-string"><span class="hljs-string">'__proto__'</span></span>));    <span class="hljs-comment"><span class="hljs-comment">// =&gt; undefined</span></span>
</code></pre><br>
В <code>Object.prototype</code> есть еще и «магический» геттер / сеттер <code>__proto__</code>,
 установка примитива по этому ключу будет игнорироваться, а объекта — 
повредить, например, при обходе свойств. В старых движках были и другие 
«магические» свойства. Тут поможет разве что <code>Object.defineProperty</code> (<a href="http://goo.gl/qigN0B">песочникца</a>):<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// ...</span></span>
    set: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name, phone</span></span></span><span class="hljs-function">)</span></span>{
      <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.defineProperty(db, name, {
        enumerable  : <span class="hljs-literal"><span class="hljs-literal">true</span></span>,
        configurable: <span class="hljs-literal"><span class="hljs-literal">true</span></span>,
        writable    : <span class="hljs-literal"><span class="hljs-literal">true</span></span>,
        value       : phone
      });
    },
<span class="hljs-comment"><span class="hljs-comment">// ...</span></span>
</code></pre><br>
Про обход словарей особо говорить не будем — если всё не совсем плохо, 
словарь не содержит в прототипе перечесляемых свойств, при обходе 
словаря через <code>for-in</code> можно обойтись без проверки <code>hasOwnProperty</code>. Вот только баг с <a name="es5-keys"></a><a href="#es5-keys"># «неперечисляемыми перечисляемыми» свойствами</a> всё равно делает обход через <code>for-in</code> словарей, под которыми находится <code>Object.prototype</code>, неполноценным в старых IE.<br>
<br>
В ECMAScript 5 появился способ создания объекта без прототипа — <code>Object.create(null)</code>, с ним можно использовать реализацию методов, предложенную изначально (<a href="http://goo.gl/gz3ZBZ">песочница</a>):<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> phone = (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> db = <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.create(<span class="hljs-literal"><span class="hljs-literal">null</span></span>);
  <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.assign(db, {
    <span class="hljs-string"><span class="hljs-string">'Вася'</span></span>: <span class="hljs-string"><span class="hljs-string">'+7987654'</span></span>,
    <span class="hljs-string"><span class="hljs-string">'Петя'</span></span>: <span class="hljs-string"><span class="hljs-string">'+7654321'</span></span>
  });
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {
    has: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">)</span></span>{
      <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> name <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> db;
    },
    get: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">)</span></span>{
      <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> db[name];
    },
    set: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name, phone</span></span></span><span class="hljs-function">)</span></span>{
      db[name] = phone;
    },
    <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">)</span></span>{
      <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> db[name];
    }
  };
})();
</code></pre><br>
Всё замечательно, вот только его создание и инициализация, даже с <code>Object.assign</code>, не особо компактны.<br>
<br>
Так как у подобных словарей отсутствует прототип, отсутствуют и методы <code>toString</code> и <code>valueOf</code>. Чем это нам грозит?<br>
<ul>
<li>Не удастся привести к числу, например <code>+Object.create(null)</code>, или строке, <code>'' + Object.create(null)</code>, — <code>TypeError</code></li>
<li>Соответственно, не удастся сравнить объект алгоритмом абстрактного равенства, например, <code>==</code>, с примитивами — <code>TypeError</code></li>
</ul>Для кого как, а для меня это скорее плюс, чем минус.<br>
<br>
<a name="dict-module"></a><h4><b><a href="#dict-module">#</a> Конструктор <code>Dict</code></b></h4><br>
Итак, создание словаря через <code>Object.create(null)</code> и его заполнение куда более громоздко, чем при создании словаря через <code>{}</code>. Конечно, самым красивым решением было бы добавление в язык <a href="http://wiki.ecmascript.org/doku.php?id=strawman:dicts">литерала словаря</a>, но это, по крайней мере, в ближайшей перспективе, маловероятно. Отсутствует возможность инициализации литералом. Есть запись <code>{__proto__: null, foo: 'bar'}</code>, но поддерживается не везде, <a href="https://github.com/petkaantonov/bluebird/wiki/Optimization-killers#2-unsupported-syntax">на данный момент приводит к деоптимизации кода</a>, да и всё равно довольно громоздкая.<br>
<br>
Обсуждалось <a href="https://github.com/rwaldron/tc39-notes/blob/master/es6/2012-11/nov-29.md#collection-apis-review">одно довольно интересное решение</a> — сделать <b>«конструктор» <code>Dict</code> как сокращение <code>Object.create(null)</code></b>.
 Как оно сейчас поживает и поживает ли вообще, я не в курсе. Но почему 
бы не взять его, слегка расширив? Заодно получим пространство имен для 
методов для работы с объектами как словарями. Добавим возможность 
инициализации итератором <code>entries</code> или объектом без итератора, этакая версия <a href="#es6-array-from"># <code>Array.from</code></a> для словарей.<br>
<br>
Так как <code>Dict() instanceof Dict</code> работать не будет и <a href="#classof"># <code>Object.classof(Dict())</code></a> будет возвращать <code>'Object'</code>, добавим для идентификации словарей метод <code>Dict.isDict</code>.<br>
<br>
Примерно <a href="http://goo.gl/IuhgSc">вот так</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Dict</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dict = <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.create(<span class="hljs-literal"><span class="hljs-literal">null</span></span>);
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(props != <span class="hljs-literal"><span class="hljs-literal">null</span></span>){
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">Symbol</span></span>.iterator <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> props){
      <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> [key, val] <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> props)dict[key] = val;
    } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.assign(dict, props);
  }
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> dict;
}
Dict.prototype = <span class="hljs-literal"><span class="hljs-literal">null</span></span>;
Dict.isDict = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">it</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.isObject(it) &amp;&amp; <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.getPrototypeOf(it) === <span class="hljs-literal"><span class="hljs-literal">null</span></span>;
}

<span class="hljs-comment"><span class="hljs-comment">// ...</span></span>

<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> map = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Map</span></span>([[<span class="hljs-string"><span class="hljs-string">'a'</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>], [<span class="hljs-string"><span class="hljs-string">'b'</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>], [<span class="hljs-string"><span class="hljs-string">'c'</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>]]);

Dict();                                            <span class="hljs-comment"><span class="hljs-comment">// =&gt; {__proto__: null}</span></span>
Dict({a: <span class="hljs-number"><span class="hljs-number">1</span></span>, b: <span class="hljs-number"><span class="hljs-number">2</span></span>, c: <span class="hljs-number"><span class="hljs-number">3</span></span>});                          <span class="hljs-comment"><span class="hljs-comment">// =&gt; {__proto__: null, a: 1, b: 2, c: 3}</span></span>
Dict(map);                                         <span class="hljs-comment"><span class="hljs-comment">// =&gt; {__proto__: null, a: 1, b: 2, c: 3}</span></span>
Dict([<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>].entries());                         <span class="hljs-comment"><span class="hljs-comment">// =&gt; {__proto__: null, 0: 1, 1: 2, 2: 3}</span></span>
Dict((<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>([k, v] <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> map)<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(v % <span class="hljs-number"><span class="hljs-number">2</span></span>)[k + k, v * v])); <span class="hljs-comment"><span class="hljs-comment">// =&gt; {__proto__: null, aa: 1, cc: 9}</span></span>

Dict.isDict({});     <span class="hljs-comment"><span class="hljs-comment">// =&gt; false</span></span>
Dict.isDict(Dict()); <span class="hljs-comment"><span class="hljs-comment">// =&gt; true</span></span>
</code></pre><br>
<a name="dict-safe-crud"></a><h4><b><a href="#dict-safe-crud">#</a> Методы для безопасной работы со словарем, имеющим под собой прототип</b></h4><br>
На случай, если всё же придется работать с объектом, имеющим под собой 
прототип, как со словарем, добавим методы для безопасной работы с 
собственными свойствами.<br>
<br>
<b><code>Dict.has</code></b> — банально, статическая версия <code>hasOwnProperty</code>. В черновиках ECMAScript 6, в модуле <code>Reflect</code> — наборе заглушек для <code>Proxy</code>, до недавнего времени присутствовала статическая версия метода <code>hasOwnProperty</code> — метод <code>Reflect.hasOwn</code>. Однако в последних версиях черновика спецификации данный метод удалили.<br>
<br>
<b><code>Dict.get</code></b> — получение значения по ключу с проверкой, является ли свойство собственным. Не является — возвращаем <code>undefined</code>.<br>
<br>
<b><code>Dict.set</code></b> — метод для совсем уж параноиков. Позволяет установить свойство словаря, игнорирую сеттеры, такие, как <code>__proto__</code>. Использует <code>defineProperty</code>.<br>
<br>
Ну а оператор <code>delete</code> и так работает как надо.<br>
<br>
<a href="http://goo.gl/yXHvmR">Пример</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dict = {a: <span class="hljs-number"><span class="hljs-number">1</span></span>, b: <span class="hljs-number"><span class="hljs-number">2</span></span>, c: <span class="hljs-number"><span class="hljs-number">3</span></span>};

<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(Dict.has(dict, <span class="hljs-string"><span class="hljs-string">'a'</span></span>));         <span class="hljs-comment"><span class="hljs-comment">// =&gt; true</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(Dict.has(dict, <span class="hljs-string"><span class="hljs-string">'toString'</span></span>));  <span class="hljs-comment"><span class="hljs-comment">// =&gt; false</span></span>

<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(Dict.get(dict, <span class="hljs-string"><span class="hljs-string">'a'</span></span>));         <span class="hljs-comment"><span class="hljs-comment">// =&gt; 1</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(Dict.get(dict, <span class="hljs-string"><span class="hljs-string">'toString'</span></span>));  <span class="hljs-comment"><span class="hljs-comment">// =&gt; undefined</span></span>

Dict.set(dict, <span class="hljs-string"><span class="hljs-string">'__proto__'</span></span>, <span class="hljs-number"><span class="hljs-number">42</span></span>);
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(Dict.get(dict, <span class="hljs-string"><span class="hljs-string">'__proto__'</span></span>)); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 42</span></span>
</code></pre><br>
<a name="dict-methods"></a><h4><b><a href="#dict-methods">#</a> Методы для работы со словарем</b></h4><br>
Методы, добавленные ECMAScript 5 в прототип массива для его обхода (<code>forEach, map, some</code>
 и т.п.), очень удобны. Их статические аналоги для словарей присутствуют
 в практически всех фреймворках / библиотеках общего назначения. А вот 
подвижек с добавлением их в стандарт нет.<br>
<br>
Добавим их в рамках нашего модуля <code>Dict</code>. Тут всё просто, методы аналогичны статическим версиям методов массива. Это: <b><code>Dict.forEach, Dict.map, Dict.filter, Dict.some, Dict.every, Dict.find, Dict.findKey, Dict.keyOf, </code><a href="#array-contains"># <code>Dict.includes</code></a><code>, Dict.reduce, </code><a href="#array-turn"># <code>Dict.turn</code></a></b>. <code>Key</code> в названии соответствует <code>index</code>
 у методов массива. «Правые» версии и опциональный аргумент-индекс 
(пока?) отсутствуют, так как порядок обхода ключей объектов пока не 
везде одинаков. Перебираются только собственные перечисляемые элементы 
объекта. Эти методы — дженерики в том же плане, что и <code>Array.from</code> или <code>Array.of</code>. Например, <code>Dict.map(dict, fn)</code> вернет новый <code>Dict</code>, а <code>Dict.map.call(Object, dict, fn)</code> — новый <code>Object</code>. А в общем, всё примитивно, скучно и как везде (<a href="http://goo.gl/RkjUxu">песочница</a>):<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dict = {a: <span class="hljs-number"><span class="hljs-number">1</span></span>, b: <span class="hljs-number"><span class="hljs-number">2</span></span>, c: <span class="hljs-number"><span class="hljs-number">3</span></span>};
Dict.forEach(dict, <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log, <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>);
<span class="hljs-comment"><span class="hljs-comment">// =&gt; 1, 'a', {a: 1, b: 2, c: 3}</span></span>
<span class="hljs-comment"><span class="hljs-comment">// =&gt; 2, 'b', {a: 1, b: 2, c: 3}</span></span>
<span class="hljs-comment"><span class="hljs-comment">// =&gt; 3, 'c', {a: 1, b: 2, c: 3}</span></span>
Dict.map(dict, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">it</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> it * it;
}); <span class="hljs-comment"><span class="hljs-comment">// =&gt; {a: 1, b: 4, c: 9}</span></span>
Dict.filter(dict, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">it</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> it % <span class="hljs-number"><span class="hljs-number">2</span></span>;
}); <span class="hljs-comment"><span class="hljs-comment">// =&gt; {a: 1, c: 3}</span></span>
Dict.some(dict, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">it</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> it === <span class="hljs-number"><span class="hljs-number">2</span></span>;
}); <span class="hljs-comment"><span class="hljs-comment">// =&gt; true</span></span>
Dict.every(dict, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">it</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> it === <span class="hljs-number"><span class="hljs-number">2</span></span>;
}); <span class="hljs-comment"><span class="hljs-comment">// =&gt; false</span></span>
Dict.find(dict, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">it</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> it &gt; <span class="hljs-number"><span class="hljs-number">2</span></span>;
}); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 3</span></span>
Dict.find(dict, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">it</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> it &gt; <span class="hljs-number"><span class="hljs-number">4</span></span>;
}); <span class="hljs-comment"><span class="hljs-comment">// =&gt; undefined</span></span>
Dict.findKey(dict, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">it</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> it &gt; <span class="hljs-number"><span class="hljs-number">2</span></span>;
}); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'c'</span></span>
Dict.findKey(dict, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">it</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> it &gt; <span class="hljs-number"><span class="hljs-number">4</span></span>;
}); <span class="hljs-comment"><span class="hljs-comment">// =&gt; undefined</span></span>
Dict.keyOf(dict, <span class="hljs-number"><span class="hljs-number">2</span></span>);    <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'b'</span></span>
Dict.keyOf(dict, <span class="hljs-number"><span class="hljs-number">4</span></span>);    <span class="hljs-comment"><span class="hljs-comment">// =&gt; undefined</span></span>
Dict.includes(dict, <span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; true</span></span>
Dict.includes(dict, <span class="hljs-number"><span class="hljs-number">4</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; false</span></span>
Dict.reduce(dict, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">memo, it</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> memo + it;
});     <span class="hljs-comment"><span class="hljs-comment">// =&gt; 6</span></span>
Dict.reduce(dict, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">memo, it</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> memo + it;
}, <span class="hljs-string"><span class="hljs-string">''</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; '123'</span></span>
Dict.turn(dict, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">memo, it, key</span></span></span><span class="hljs-function">)</span></span>{
  memo[key + key] = it;
});     <span class="hljs-comment"><span class="hljs-comment">// =&gt; {aa: 1, bb: 2, cc: 3}</span></span>
Dict.turn(dict, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">memo, it, key</span></span></span><span class="hljs-function">)</span></span>{
  it % <span class="hljs-number"><span class="hljs-number">2</span></span> &amp;&amp; memo.push(key + it);
}, []); <span class="hljs-comment"><span class="hljs-comment">// =&gt; ['a1', 'c3']</span></span>
</code></pre><br>
<a name="chaining"></a><b><a href="#chaining">#</a></b> Что касается цепочек методов, <a href="#dict-and-object-prototype"># по вполне очевидной причине</a>, в рамках модуля <code>Dict</code> их нет, и не предвидятся. Спасением тут могут стать <a href="https://github.com/zenparsing/es-abstract-refs#examples">abstract references</a>. А вот в рамках <a href="#for"># <code>$for</code></a> и <a href="#es6-map"># <code>Map</code></a> вполне возможно и появятся.<br>
<br>
<a name="dict-iter"></a><h4><b><a href="#dict-iter">#</a> Итерация по словарю</b></h4><br>
Близится светлое ES6 будущее с <a href="#es6-iterators"># итераторами</a> и <a href="#es6-for-of"># циклом <code>for-of</code></a>.
 Вот только объектам как словарям от этого ни тепло, ни холодно — для 
них в ES6 итераторы не предусмотрены. Соответственно, нет простого 
способа перебрать их через <code>for-of</code>, инициализировать <a href="#es6-map"># <code>Map</code></a> словарем и т.п. Добавление методов <code>.keys, .values</code> и <code>.entries</code> в <code>Object.prototype</code> маловероятно — там и так достаточно мусора, см. описание предыдущей проблемы. Зато вполне вероятны два других сценария:<br>
<br>
Первый — добавление статических методов, возвращающих итератор, в пространство имён <code>Dict</code> — <code>Dict.{keys, values, entries}</code>. Но как уже писал, что с перспективой добавления этого модуля в стандарт мне неизвестно.<br>
<br>
Второй — <a href="https://github.com/rwaldron/tc39-notes/blob/master/es6/2014-04/apr-9.md#51-objectentries-objectvalues">добавление методов <code>Object.{values, entries}</code></a>, по типу <code>Object.keys</code>, возвращающих массив, а не итератор, и уже через итератор массива обходить объект.<br>
<br>
Что из этого появится — не знаю и гадать боюсь. Для получения массива 
значения словаря использовать довольно тяжелый протокол итераторов, как и
 использовать промежуточный массив для итерации по объекту не 
рационально. Так что, хоть это частично и дублирующий друг друга 
функционал, реализуем в нашей библиотеке оба набора методов. <a href="http://goo.gl/kKpVv2">Примеры</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dict = {a: <span class="hljs-number"><span class="hljs-number">1</span></span>, b: <span class="hljs-number"><span class="hljs-number">2</span></span>, c: <span class="hljs-number"><span class="hljs-number">3</span></span>};

<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.values(dict));  <span class="hljs-comment"><span class="hljs-comment">// =&gt; [1, 2, 3]</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.entries(dict)); <span class="hljs-comment"><span class="hljs-comment">// =&gt; [['a', 1], ['b', 2], ['c', 3]]</span></span>

<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> key <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> Dict.keys(dict))<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(key); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'a', 'b', 'c'</span></span>

<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> [key, val] <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> Dict.entries(dict)){
  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(key); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'a', 'b', 'c'</span></span>
  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(val); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 1, 2, 3</span></span>
}

$<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(Dict.values(dict)).of(<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 1, 2, 3</span></span>

<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Map</span></span>(Dict.entries(dict)); <span class="hljs-comment"><span class="hljs-comment">// =&gt; Map {a: 1, b: 2, c: 3}</span></span>

<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Map</span></span>((<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>([k, v] <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> Dict.entries(dict))<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(v % <span class="hljs-number"><span class="hljs-number">2</span></span>)[k + k, v * v])); <span class="hljs-comment"><span class="hljs-comment">// =&gt;  Map {aa: 1, cc: 9}</span></span>
</code></pre><br>
<a name="dict-next"></a><h4><b><a href="#dict-next">#</a> Возможные перспективы</b></h4><br>
Можно было бы зайти чуть дальше, сделав <code>Dict</code> не просто сокращением для <code>Object.create(null)</code>
 с возможностью инициализации итератором и объектом, а полноценным 
конструктором с прототипом, не содержащим ключей-строк, только <a href="#es6-symbol"># символы</a>. <a href="http://goo.gl/G4yDFL">Примерно так</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Dict</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> Dict))<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dict(props);
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(props != <span class="hljs-literal"><span class="hljs-literal">null</span></span>){
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">Symbol</span></span>.iterator <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> props){
      <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> [key, val] <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> props)<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[key] = val;
    } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.assign(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, props);
  }
}
Dict.prototype = <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.create(<span class="hljs-literal"><span class="hljs-literal">null</span></span>);
Dict.prototype[<span class="hljs-built_in"><span class="hljs-built_in">Symbol</span></span>.toStringTag] = <span class="hljs-string"><span class="hljs-string">'Dict'</span></span>;
Dict.prototype[<span class="hljs-built_in"><span class="hljs-built_in">Symbol</span></span>.iterator] = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Dict.entries(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>);
};
</code></pre><br>
Что бы это нам дало?<br>
<br>
<ul>
<li><code>new Dict instanceof Dict</code>.</li>
<li><code>for(var [key, value] of dict){...}, new Map(dict)</code> без необходимости получать итератор через <code>Dict.entries</code>.</li>
<li><a href="#classof"># <code>Object.classof(new Dict)</code></a> возвращал бы <code>'Dict'</code>, а не <code>'Object'</code>.</li>
</ul><br>
Однако, есть причины, как минимум, отложить внедрение этого подхода до 
момента, когда IE8- вымрет окончательно, а также Firefox полностью 
перейдет на протокол итераторов ECMAScript 6. А может и вообще не стоит —
 рискуем окончательно потерять совместимость со стандартом, когда / если
 модуль <code>Dict</code> туда попадёт.<br>
<br>
<a name="partial-application"></a><h2><b><a href="#partial-application">#</a> Частичное применение</b></h2><hr><br>
Пожалуй, одним из самых полезных нововведений в ECMAScript 5 был метод <a href="#es5-bind"># <code>Function#bind</code></a>. Вот только возможности <a href="https://ru.wikipedia.org/wiki/%D0%A7%D0%B0%D1%81%D1%82%D0%B8%D1%87%D0%BD%D0%BE%D0%B5_%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5">частичного применения</a> данный метод раскрывает далеко не полностью. В этой главе мы рассмотрим такие вещи, как:<br>
<br>
<ul>
<li><a href="#part"># Частичное применение без привязки контекста</a></li>
<li><a href="#placeholder"># Частичное применение произвольных аргументов</a></li>
<li><a href="#method-extraction"># Извлечение метода из объекта</a></li>
<li><a href="#only"># Ограничение количества аргументов</a></li>
</ul><br>
Можно было бы добавить <a href="http://ru.wikipedia.org/wiki/%CA%E0%F0%F0%E8%F0%EE%E2%E0%ED%E8%E5">каррирование</a>,
 но в JavaScript именно каррирование, а не частичное применение, 
требуется достаточно редко. Как и «правые» версии методов. Добавлю <a href="http://benalman.com/news/2012/09/partial-application-in-javascript/">ссылку</a> на годную (и так, пожалуй, хорошо известную) статью по теме.<br>
<br>
<a name="part"></a><h4><b><a href="#part">#</a> Частичное применение без привязки контекста</b></h4><br>
<code>Function#bind</code> совмещает в себе частичное применение и привязку контекста <code>this</code>. Последнее нужно далеко не всегда, и в этом случае привязываемый <code>this</code>
 не только «лишний» аргумент, что нужно писать. Если контекст, в котором
 должна запускаться частично применённая функция, заранее неизвестен, 
метод <code>Function#bind</code> неприменим. Например, если это метод прототипа (<a href="http://goo.gl/uj6s6f">песочница</a>):<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.prototype.compact = [].filter.bind(<span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.prototype, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">val</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> val != <span class="hljs-literal"><span class="hljs-literal">null</span></span>;
});

[<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>].compact(); <span class="hljs-comment"><span class="hljs-comment">// =&gt; [] - метод запускается в контексте Array.prototype, а не данного массива</span></span>

<span class="hljs-comment"><span class="hljs-comment">// Придется частично применять вручную:</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.prototype.compact = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.filter(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">val</span></span></span><span class="hljs-function">)</span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> val != <span class="hljs-literal"><span class="hljs-literal">null</span></span>;
  });
};

[<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>].compact(); <span class="hljs-comment"><span class="hljs-comment">// =&gt; [0, 1, 2];</span></span>
</code></pre><br>
Добавим метод частичного применения без привязки <code>this</code> — <code>Function#part</code> (<a href="http://goo.gl/l2UY0d">песочница</a>):<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.prototype.compact = [].filter.part(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">val</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> val != <span class="hljs-literal"><span class="hljs-literal">null</span></span>;
});

[<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>].compact(); <span class="hljs-comment"><span class="hljs-comment">// =&gt; [0, 1, 2];</span></span>

<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fn = <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log.part(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>);
fn(<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 1, 2, 3, 4</span></span>
</code></pre><br>
<a name="placeholder"></a><h4><b><a href="#placeholder">#</a> Частичное применение произвольных аргументов</b></h4><br>
Часто при частичном применении нужно передать произвольные аргументы — 
не, например, первые 2, а только второй и четвёртый или второй и третий.
 Тут <code>Function#bind</code> нам помочь не сможет — придется писать обертку вручную под каждый конкретный случай.<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fn1</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, c</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(a, <span class="hljs-number"><span class="hljs-number">2</span></span>, c, <span class="hljs-number"><span class="hljs-number">4</span></span>);
};
fn1(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 1, 2, 3, 4</span></span>

<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fn2</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">b, c</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-number"><span class="hljs-number">1</span></span>, b, c, <span class="hljs-number"><span class="hljs-number">4</span></span>);
};
fn2(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 1, 2, 3, 4</span></span>
</code></pre><br>
Для облегчения подобной задачи добавим плейсхолдер — объект, замещающий 
аргумент, что будет передан при вызове конечной функции. В качестве 
ссылки на плейсхолдер так и напрашивается глобальная переменная <code>_</code> (как, например, в <a href="http://livescript.net/#functions-partial">LiveScript</a>, <a href="http://goo.gl/EsYZ69">песочница</a>), однако, эту переменную используют библиотеки Undescore.js (кстати, в ней это тоже плейсхолдер для <code>_.partial</code>) и LoDash как свой неймспейс. Во избежание конфликтов с ними, создаём новый глобальный объект <code>_</code> только если таковой отсутствует, а во время работы используем глобальный объект <code>_</code>, что бы там ни лежало. В случае сборки без расширения нативных объектов, в качестве плейсхолдера используем объект <code>core._</code>. <a href="http://goo.gl/ykMnZf">Пример</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fn1 = <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log.part(_, <span class="hljs-number"><span class="hljs-number">2</span></span>, _, <span class="hljs-number"><span class="hljs-number">4</span></span>);
fn1(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>);    <span class="hljs-comment"><span class="hljs-comment">// =&gt; 1, 2, 3, 4</span></span>

<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fn2 = <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log.part(<span class="hljs-number"><span class="hljs-number">1</span></span>, _, _, <span class="hljs-number"><span class="hljs-number">4</span></span>);
fn2(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>);    <span class="hljs-comment"><span class="hljs-comment">// =&gt; 1, 2, 3, 4</span></span>

fn1(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 1, 2, 3, 4, 5</span></span>
fn1(<span class="hljs-number"><span class="hljs-number">1</span></span>);       <span class="hljs-comment"><span class="hljs-comment">// =&gt; 1, 2, undefined, 4</span></span>
</code></pre><br>
Также добавим метод <code>Function#by</code>, аналогичный <code>Function#bind</code>, но с возможностью использования плейсхолдера для аргументов. Можно было бы обернуть <code>Function#bind</code>,
 заставив работать с плейсхолдером, но это — нарушение спецификации, да и
 метод этот и так довольно тормозной почти во всех движках.<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fn = <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log.by(<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>, _, <span class="hljs-number"><span class="hljs-number">2</span></span>, _, <span class="hljs-number"><span class="hljs-number">4</span></span>);
fn(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 1, 2, 3, 4, 5</span></span>
</code></pre><br>
<a name="method-extraction"></a><h4><b><a href="#method-extraction">#</a> Извлечение метода из объекта</b></h4><br>
В большинстве случаев, например, при передаче коллбэка в функцию, метод 
нам нужно привязать именно к тому объекту, из которого его и получаем. И
 тут возникает проблема — <code>fn(foo.bar.baz.bind(foo.bar))</code>. Мы вынуждены писать <code>foo.bar</code> 2 раза, это явное нарушение принципа DRY. Надеюсь, в будущем от этой проблемы спасут <a href="https://github.com/zenparsing/es-abstract-refs">abstract references</a>, но предложенная реализация проблему <a href="https://github.com/zenparsing/es-abstract-refs/issues/5">не решает</a>. Пожалуй, самым вкусным и красивым решением было бы добавление в язык оператора доступа с сохранением контекста, аналогичного <a href="http://livescript.net/#property-access"><code>~</code> из LiveScript</a> — <code>fn(foo.bar~baz)</code> (<a href="http://goo.gl/58e0Dp">песочница</a>).<br>
<br>
Решений проблемы на базе библиотеки в голову приходит не много — разве 
что извлечение метода из объекта по ключу. Это либо статический метод, 
например, <code>_.bindKey</code> из <a href="http://lodash.com/docs#bindKey">LoDash</a>
 (но с ранним связыванием), однако он тоже довольно громоздкий и еще 
больше ухудшает читаемость, либо аналогичный по функционалу метод в <code>Object.prototype</code>, например, <code>Object#boundTo</code> из <a href="https://github.com/WebReflection/eddy#objectboundtomethod">Eddy.js</a>.<br>
<br>
Как бы это страшно ни звучало, мы добавим метод в <code>Object.prototype</code>. Рисковать, расширяя <code>Object.prototype</code> методом по короткому ключу-строке, мы, по крайней мере, пока, не будем — сложно избежать конфликтов, да и сломаем <code>for-in</code> в IE8-. Ранее в этой главе мы уже использовали глобальную переменную <code>_</code>. Дабы не плодить лишних сущностей и для краткости, применим её и здесь. Заменим у объекта <code>_</code> метод <code>toString</code> (соответственно, если использовать совместно с Undescore.js или LoDash — нужно подключать <b>core.js</b> после них). Он будет возвращать уникальный ключ-строку, аналогично <a href="#es6-symbol-polyfill"># ключу полифила символа</a>. Добавим по этому ключу метод в <code>Object.prototype</code>. За счет использования грязного хака с <a href="#es5-keys"># веселым багом</a>, <b>мы добавляем этот метод и в IE8-, при этом не сломав <code>for-in</code>.</b><br>
<br>
Итого, из примера, с которого начали, получим <code>fn(foo.bar[_]('baz'))</code> — далековато от идеала, но хоть от второго упоминания объекта избавились. Возвращаемый метод кэшируется. <a href="http://goo.gl/dQsSTi">Примеры</a>:<br>
<br>
<pre><code class="javascript hljs">[<span class="hljs-string"><span class="hljs-string">'foobar'</span></span>, <span class="hljs-string"><span class="hljs-string">'foobaz'</span></span>, <span class="hljs-string"><span class="hljs-string">'barbaz'</span></span>].filter(<span class="hljs-regexp"><span class="hljs-regexp">/bar/</span></span>[_](<span class="hljs-string"><span class="hljs-string">'test'</span></span>)); <span class="hljs-comment"><span class="hljs-comment">// =&gt; ['foobar', 'barbaz']</span></span>

<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> has = {}.hasOwnProperty[_](<span class="hljs-string"><span class="hljs-string">'call'</span></span>);

<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(has({key: <span class="hljs-number"><span class="hljs-number">42</span></span>}, <span class="hljs-string"><span class="hljs-string">'foo'</span></span>)); <span class="hljs-comment"><span class="hljs-comment">// =&gt; false</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(has({key: <span class="hljs-number"><span class="hljs-number">42</span></span>}, <span class="hljs-string"><span class="hljs-string">'key'</span></span>)); <span class="hljs-comment"><span class="hljs-comment">// =&gt; true</span></span>

<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> array = []
  , push  = array[_](<span class="hljs-string"><span class="hljs-string">'push'</span></span>);
push(<span class="hljs-number"><span class="hljs-number">1</span></span>);
push(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>);
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(array); <span class="hljs-comment"><span class="hljs-comment">// =&gt; [1, 2, 3];</span></span>
</code></pre><br>
По-хорошему, после отказа от поддержки IE8- библиотекой, метод стоит переименовать, а то страшновато это как-то :) <code>tie, boundTo, bindKey</code> или что-то в этом духе, подобрав наименее конфликтный ключ.<br>
<br>
Использование <code>Proxy</code> из ES6 здесь было бы куда симпатичней — обычный доступ к свойству вместо передачи ключа в метод — <code>fn(foo.bar[_].baz)</code>, но без <code>Proxy</code>
 подобное (геттер, обход объекта и привязка всех методов), серьёзно не 
теряя при этом в производительности, мы пока себе позволить не можем.<br>
<br>
<div class="spoiler"><b class="spoiler_title">Пример с Proxy, работает пока только в ночном огнелисе</b><div class="spoiler_text"><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> _ = <span class="hljs-built_in"><span class="hljs-built_in">Symbol</span></span>();
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.defineProperty(<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.prototype, _, {
  get: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Proxy</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, {
      apply: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">/* аналогично текущей логике [_] для обратной совместимости */</span></span> },
      get: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">context, name</span></span></span><span class="hljs-function">)</span></span>{
        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> context[name].bind(context);
      }
    });
  }
});

[<span class="hljs-string"><span class="hljs-string">'foobar'</span></span>, <span class="hljs-string"><span class="hljs-string">'foobaz'</span></span>, <span class="hljs-string"><span class="hljs-string">'barbaz'</span></span>].filter(<span class="hljs-regexp"><span class="hljs-regexp">/bar/</span></span>[_].test); <span class="hljs-comment"><span class="hljs-comment">// =&gt; ['foobar', 'barbaz']</span></span>

<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> has = {}.hasOwnProperty[_].call;

<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(has({key: <span class="hljs-number"><span class="hljs-number">42</span></span>}, <span class="hljs-string"><span class="hljs-string">'foo'</span></span>)); <span class="hljs-comment"><span class="hljs-comment">// =&gt; false</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(has({key: <span class="hljs-number"><span class="hljs-number">42</span></span>}, <span class="hljs-string"><span class="hljs-string">'key'</span></span>)); <span class="hljs-comment"><span class="hljs-comment">// =&gt; true</span></span>

<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> array = []
  , push  = array[_].push;
push(<span class="hljs-number"><span class="hljs-number">1</span></span>);
push(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>);
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(array); <span class="hljs-comment"><span class="hljs-comment">// =&gt; [1, 2, 3];</span></span>
</code></pre></div></div><br>
<a name="only"></a><h4><b><a href="#only">#</a> Ограничение количества аргументов</b></h4><br>
Проблема необязательных аргументов рассмотрена в <a href="http://habrahabr.ru/post/114737/">данной статье</a>. Пример в ней — <code>parseInt</code> — довольно невразумительный, никто не мешает приводить строки к числу, например, используя <code>Number</code>, что не ожидает дополнительных аргументов. Дело тут не в их «опасности», а в необходимости писать лишнюю обертку.<br>
<br>
Например, мы хотим вывести в консоль все элементы массива, только сами элементы и ничего больше:<br>
<br>
<pre><code class="javascript hljs">[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>].forEach(<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log);
<span class="hljs-comment"><span class="hljs-comment">// =&gt; 1 0 [1, 2, 3]</span></span>
<span class="hljs-comment"><span class="hljs-comment">// =&gt; 2 1 [1, 2, 3]</span></span>
<span class="hljs-comment"><span class="hljs-comment">// =&gt; 3 2 [1, 2, 3]</span></span>
</code></pre><br>
Метод <code>.forEach</code>, как и многие другие, передаёт коллбэку 
необязательные аргументы — индекс и сам массив. А нам они не нужны. Так 
что каждый раз коллбэк придется оборачивать в еще одну функцию:<br>
<br>
<pre><code class="javascript hljs">[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>].forEach(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">it</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(it);
}); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 1, 2, 3</span></span>
</code></pre><br>
В статье, упомянутой выше, для ограничения аргументов функций был предложен метод <code>Function#only</code>. Реализуем его вариант. Первый аргумент — максимальное число аргументов, второй, опциональный — контекст. <a href="http://goo.gl/EflCFz">Пример</a>:<br>
<br>
<pre><code class="javascript hljs">[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>].forEach(<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log.only(<span class="hljs-number"><span class="hljs-number">1</span></span>)); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 1, 2, 3</span></span>
</code></pre><br>
Конечно, если максимальное кол-во аргументов — 1, проще, если они 
доступны, обойтись стрелочными функциями из ES6 или кофеподобных языков,
 но если больше — уже проблематично.<br>
<br>
<a name="date-format"></a><h2><b><a href="#date-format">#</a> Форматирование даты</b></h2><hr><br>
Казалось бы, простая задача — форматирования даты, в JavaScript не такая
 уж и простая. Что делать, если нам нужно получить строку формата <b>«18.11.2014 06:07:25»</b>? <a href="http://goo.gl/duI0y0">Всё довольно страшно</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> date = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>;
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">lz2</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">it</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> it &gt; <span class="hljs-number"><span class="hljs-number">9</span></span> ? it : <span class="hljs-string"><span class="hljs-string">'0'</span></span> + it;
}
<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> format = [date.getDate(), date.getMonth() + <span class="hljs-number"><span class="hljs-number">1</span></span>, date.getFullYear()].map(lz2).join(<span class="hljs-string"><span class="hljs-string">'.'</span></span>) + <span class="hljs-string"><span class="hljs-string">' '</span></span> +
             [date.getHours(), date.getMinutes(), date.getSeconds()].map(lz2).join(<span class="hljs-string"><span class="hljs-string">':'</span></span>);
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(format); <span class="hljs-comment"><span class="hljs-comment">// =&gt; '18.11.2014 06:07:25 '</span></span>
</code></pre><br>
А что делать, если нужно получить, например, строку формата <b>«Вторник, 18 Ноября 2014 г., 6:07:25»</b>?<br>
<br>
В начале статьи был упомянут стандарт интернационализации <b>ECMA402</b>, <a href="http://norbertlindenberg.com/ecmascript/intl.html">спецификация</a>. Стандарт добавляет в JavaScript объект <b>Intl</b>, содержащий средства локализованного форматирования даты, чисел, сравнения строк. На базовом уровне <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl">Intl</a> рассмотрен в <a href="http://habrahabr.ru/post/218481/">этой статье</a>. Ко всему прочему, этот стандарт перегружает методы <code>Date#toLocaleString, Date#toLocaleDateString, Date#toLocaleTimeString</code>,
 добавляя в них 2 аргумента: локализация и опции формата. Используя их, 
строку, близкую к упомянутому выше формату, можно получить <a href="http://goo.gl/DHvgqd">так</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>().toLocaleString(<span class="hljs-string"><span class="hljs-string">'ru-RU'</span></span>, {
  weekday: <span class="hljs-string"><span class="hljs-string">'long'</span></span>,
  year:    <span class="hljs-string"><span class="hljs-string">'numeric'</span></span>,
  month:   <span class="hljs-string"><span class="hljs-string">'long'</span></span>,
  day:     <span class="hljs-string"><span class="hljs-string">'numeric'</span></span>,
  hour:    <span class="hljs-string"><span class="hljs-string">'numeric'</span></span>,
  minute:  <span class="hljs-string"><span class="hljs-string">'2-digit'</span></span>,
  second:  <span class="hljs-string"><span class="hljs-string">'2-digit'</span></span>
}); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'вторник, 18 ноября 2014 г., 6:07:25'</span></span>
</code></pre><br>
Громоздко, конечно, но лучше уж так, чем никак. Касательно поддержки 
стандарта — в целом, неплохо. Поддерживается Chrome, Opera, IE11, с 
недавних пор и Firefox. Но обычно нужна поддержка IE10-, Safari, 
мобильных платформ и чёрт еще знает чего. На этот случай есть <a href="https://github.com/andyearnshaw/Intl.js">полифил</a>. Но вот незадача — реализация данного функционала будет слишком много весить, даже без учета локалей. По этой причине <b>в core.js и отсутствует полифил ECMA402</b>.<br>
<br>
<a name="simple-date-format"></a><h4><b><a href="#simple-date-format">#</a> Добавим простое форматирование даты.</b></h4><br>
Что значит «простое»? Как часто вам нужна полноценная локализация или 
какие другие продвинутые средства работы с датой? Мне — не очень, обычно
 хочется простого удобного форматирования даты строкой формата. Ну а 
если нужны — никто не мешает подключить <b><a href="http://momentjs.com/">Moment.js</a></b> или полифил <code>Intl</code>. Здесь же весь модуль работы с датой — несколько десятков строк.<br>
<br>
Добавляем метод <code>Date#format</code> и его UTC версию <code>Date#formatUTC</code> (<a href="http://goo.gl/NMeGEy">песочница</a>):<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>().format(<span class="hljs-string"><span class="hljs-string">'W, D MM Y г., h:mm:ss'</span></span>, <span class="hljs-string"><span class="hljs-string">'ru'</span></span>);    <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'Вторник, 18 Ноября 2014 г., 6:07:25'</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>().formatUTC(<span class="hljs-string"><span class="hljs-string">'W, D MM Y г., h:mm:ss'</span></span>, <span class="hljs-string"><span class="hljs-string">'ru'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'Вторник, 18 Ноября 2014 г., 0:07:25'</span></span>
</code></pre><br>
Ради простоты и легкочитаемости строки формата, не будем заморачиваться экранированием обозначений. Пока доступен их минимум:<br>
<br>
<pre><code class="sql hljs">s  | Секунды             | 0-59
ss | Секунды, 2 цифры    | 00-59
m  | Минуты              | 0-59
mm | Минуты, 2 цифры     | 00-59
h  | Часы                | 0-23
hh | Часы, 2 цифры       | 00-23
D  | Дата                | 1-31
DD | Дата, 2 цифры       | 01-31
W  | День недели, строка | Вторник
N  | Месяц               | 1-12
NN | Месяц, 2 цифры      | 01-12
M  | Месяц, строка       | Ноябрь
MM | Месяца, строка      | Ноября
Y  | Год, полный         | 2014
YY | Год, 2 цифры        | 14
</code></pre><br>
Библиотека уже включает русскую (<code>ru</code>) и английскую (<code>en</code>) локали. Локаль задается либо методом <code>core.locale</code>, либо вторым аргументом методов <code>Date#format</code> и <code>Date#formatUTC</code> (<a href="http://goo.gl/BYG9XY">песочница</a>):<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>().format(<span class="hljs-string"><span class="hljs-string">'W, D MM Y'</span></span>, <span class="hljs-string"><span class="hljs-string">'ru'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'Вторник, 18 Ноября 2014'</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>().format(<span class="hljs-string"><span class="hljs-string">'W, D MM Y'</span></span>);       <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'Tuesday, 18 November 2014'</span></span>
core.locale(<span class="hljs-string"><span class="hljs-string">'ru'</span></span>);
<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>().format(<span class="hljs-string"><span class="hljs-string">'W, D MM Y'</span></span>);       <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'Вторник, 18 Ноября 2014'</span></span>
</code></pre><br>
Формат локали представлен ниже. В собственном коде можно ограничиться <code>core.addLocale</code>, но из-за возможности сборки библиотеки без расширения нативных объектов, универсальный модуль-локаль будет выглядеть так:<br>
<br>
<pre><code class="javascript hljs">(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> core != <span class="hljs-string"><span class="hljs-string">'undefined'</span></span> ? core : <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'core-js/library'</span></span>)).addLocale(<span class="hljs-string"><span class="hljs-string">'ru'</span></span>, {
  weekdays: <span class="hljs-string"><span class="hljs-string">'Воскресенье,Понедельник,Вторник,Среда,Четверг,Пятница,Суббота'</span></span>,
  months: <span class="hljs-string"><span class="hljs-string">'Январ:я|ь,Феврал:я|ь,Март:а|,Апрел:я|ь,Ма:я|й,Июн:я|ь,Июл:я|ь,Август:а|,Сентябр:я|ь,Октябр:я|ь,Ноябр:я|ь,Декабр:я|ь'</span></span>
});
</code></pre><br>
<a href="http://goo.gl/PVfVLd">Несколько примеров</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>().format(<span class="hljs-string"><span class="hljs-string">'DD.NN.YY'</span></span>);         <span class="hljs-comment"><span class="hljs-comment">// =&gt; '18.11.14'</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>().format(<span class="hljs-string"><span class="hljs-string">'hh:mm:ss'</span></span>);         <span class="hljs-comment"><span class="hljs-comment">// =&gt; '06:07:25'</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>().format(<span class="hljs-string"><span class="hljs-string">'DD.NN.Y hh:mm:ss'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; '18.11.2014 06:07:25'</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>().format(<span class="hljs-string"><span class="hljs-string">'W, D MM Y года'</span></span>);   <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'Вторник, 18 Ноября 2014 года'</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>().format(<span class="hljs-string"><span class="hljs-string">'D MM, h:mm'</span></span>);       <span class="hljs-comment"><span class="hljs-comment">// =&gt; '18 Ноября, 6:07'</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>().format(<span class="hljs-string"><span class="hljs-string">'M Y'</span></span>);              <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'Ноябрь 2014'</span></span>
</code></pre><br>
<a name="object"></a><h2><b><a href="#object">#</a> Объектное API</b></h2><hr><br>
<a name="object-define"></a><a href="#object-define"><b>#</b></a> <b>Первая проблема</b>:
 в ECMAScript 5 добавлена возможность объявить геттеры и сеттеры в 
литерале объекта. А вот добавить геттеры / сеттеры уже существующих 
объектов можно только с использованием <code>Object.defineProperty</code> / <code>Object.defineProperties</code>,
 что вынуждает передавать на каждое свойство полный (если не хочется 
таких дополнительных опций, как неперечисляемость или невозможность 
переопределить) объект дескриптора, а это громоздко.<br>
<br>
Кроме метода <a href="#es6-object-assign"># <code>Object.assign</code></a>, в ECMAScript 6 планировалось добавить метод <code>Object.mixin</code>,
 который копировал свойства объекта-источника в целевой объект с учетом 
дескрипторов. Кроме этого, метод должен был переназначать родителя 
методов объекта-источника, получаемого через ключевое слово <code>super</code>. Однако, его решили переработать и отложили добавление в стандарт.<br>
<br>
Добавим метод <code>Object.define</code>, работающий как описанный <code>Object.mixin</code>
 — копирующий свойства объекта-источника в цель с учетом дескрипторов, 
но не переопределяющий родителя, за отсутствием ключевого слова <code>super</code> в ECMAScript 5.<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Было:</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.defineProperty(target, <span class="hljs-string"><span class="hljs-string">'c'</span></span>, {
  enumerable: <span class="hljs-literal"><span class="hljs-literal">true</span></span>,
  configurable: <span class="hljs-literal"><span class="hljs-literal">true</span></span>,
  get: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.a + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.b;
  }
});

<span class="hljs-comment"><span class="hljs-comment">// Стало:</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.define(target, {
  get c(){
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.a + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.b;
  }
});
</code></pre><br>
<a name="object-make"></a><a href="#object-make"><b>#</b></a> <b>Вторая проблема</b>: в ECMAScript 5 также добавлена возможность создания объекта без использования конструктора, через <code>Object.create</code>. Было бы неплохо добавлять собственные свойства объекта при создании, но вторым аргументом <code>Object.create</code>, как и <code>Object.defineProperties</code>, принимает объект, содержащий объекты дескрипторов свойств, что страшно громоздко.<br>
<br>
Добавим метод <code>Object.make</code> — аналог <code>Object.create</code>,
 вторым аргументом ожидающий не объект дескрипторов, а простой объект, 
из которого копируются собственные свойства в создаваемый объект с 
учетом дескрипторов.<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Поверхностное копирование объекта с учетом прототипа и дескрипторов:</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> copy = <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.make(<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.getPrototypeOf(src), src);

<span class="hljs-comment"><span class="hljs-comment">// Пример с наследованием:</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Vector2D</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x, y</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.x = x;
  <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.y = y;
}
<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.define(Vector2D.prototype, {
  get xy(){
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.hypot(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.x, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.y);
  }
});
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Vector3D</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x, y, z</span></span></span><span class="hljs-function">)</span></span>{
  Vector2D.apply(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>);
  <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.z = z;
}
Vector3D.prototype = <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.make(Vector2D.prototype, {
  <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>: Vector3D,
  get xyz(){
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.hypot(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.x, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.y, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.z);
  }
});

<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> vector = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3D(<span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>);
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(vector.xy);  <span class="hljs-comment"><span class="hljs-comment">// =&gt; 15</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(vector.xyz); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 25</span></span>
vector.y++;
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(vector.xy);  <span class="hljs-comment"><span class="hljs-comment">// =&gt; 15.811388300841896</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(vector.xyz); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 25.495097567963924</span></span>
</code></pre><br>
В ECMAScript 7 предлагают добавить метод <a href="https://gist.github.com/WebReflection/9353781">Object.getOwnPropertyDescriptors</a>,
 возвращающий, как ясно из его названия, объект, содержащий все 
дескрипторы собственных свойств объекта. Идеальная пара для создания 
второго аргумента <code>Object.defineProperties</code> и <code>Object.create</code> и, в некоторой степени, альтернатива нашим <code>Object.make</code> и <code>Object.define</code>. Вот только слишком громоздкая.<br>
<br>
<a name="array"></a><h2><b><a href="#array">#</a> Массивы</b></h2><hr><br>
<a name="array-contains"></a><a href="#array-contains"><b>#</b></a> Метод <a href="https://github.com/domenic/Array.prototype.includes">Array#includes</a> (до недавнего времени — <code>Array#contains</code>, переименован из-за <a href="https://esdiscuss.org/topic/array-prototype-contains-solutions">бага MooTools</a>,
 пока доступен и по старому имени) планируется к добавлению в ECMAScript
 7. Он банально проверяет вхождение элемента в массив. В отличии от <code>Array#indexOf</code>, использует алгоритм сравнения <a href="#same-value-zero"># SameValueZero</a> и не игнорирует «дырки». Второй, опциональный, аргумент — стартовая позиция. <a href="http://goo.gl/2Gq4ma">Примеры</a>:<br>
<br>
<pre><code class="javascript hljs">[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>].includes(<span class="hljs-number"><span class="hljs-number">2</span></span>);        <span class="hljs-comment"><span class="hljs-comment">// =&gt; true</span></span>
[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>].includes(<span class="hljs-number"><span class="hljs-number">4</span></span>);        <span class="hljs-comment"><span class="hljs-comment">// =&gt; false</span></span>
[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>].includes(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>);     <span class="hljs-comment"><span class="hljs-comment">// =&gt; false</span></span>

[<span class="hljs-literal"><span class="hljs-literal">NaN</span></span>].indexOf(<span class="hljs-literal"><span class="hljs-literal">NaN</span></span>);           <span class="hljs-comment"><span class="hljs-comment">// =&gt; -1</span></span>
[<span class="hljs-literal"><span class="hljs-literal">NaN</span></span>].includes(<span class="hljs-literal"><span class="hljs-literal">NaN</span></span>);          <span class="hljs-comment"><span class="hljs-comment">// =&gt; true</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>).indexOf(<span class="hljs-literal"><span class="hljs-literal">undefined</span></span>);  <span class="hljs-comment"><span class="hljs-comment">// =&gt; -1</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>).includes(<span class="hljs-literal"><span class="hljs-literal">undefined</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; true</span></span>
</code></pre><br>
<a name="array-turn"></a><a href="#array-turn"><b>#</b></a> А вот метод <code>Array#turn</code> — плод моей больной фантазии. Хотя, как выяснилось, не уникальный — ему аналогичен метод <code>_.transform</code> из <a href="http://lodash.com/docs#transform">LoDash</a>. Это альтернатива методу <code>Array#reduce</code>
 для свёртки массива в произвольный объект-аккумулятор (по умолчанию — 
новый массив) без необходимости возвращать аккумулятор из коллбэка. 
Сигнатура метода и коллбэка аналогична <code>Array#reduce</code>. Можно прервать обход коллекции, вернув из коллбэка <code>false</code>. <a href="http://goo.gl/r3DbCT">Примеры</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Свёртка в словарь:</span></span>
[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>].reduce(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">memo, it</span></span></span><span class="hljs-function">)</span></span>{
  memo[<span class="hljs-string"><span class="hljs-string">'key'</span></span> + it] = !!(it % <span class="hljs-number"><span class="hljs-number">2</span></span>);
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> memo;
}, {}); <span class="hljs-comment"><span class="hljs-comment">// =&gt; {key1: true, key2: false, key3: true, key4: false, key5: true}</span></span>

[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>].turn(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">memo, it</span></span></span><span class="hljs-function">)</span></span>{
  memo[<span class="hljs-string"><span class="hljs-string">'key'</span></span> + it] = !!(it % <span class="hljs-number"><span class="hljs-number">2</span></span>);
}, {}); <span class="hljs-comment"><span class="hljs-comment">// =&gt; {key1: true, key2: false, key3: true, key4: false, key5: true}</span></span>

<span class="hljs-comment"><span class="hljs-comment">// filter + map + slice, делаем лишнюю работу:</span></span>
[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>].map(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">it</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> it * it;
}).filter(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">it</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> it % <span class="hljs-number"><span class="hljs-number">2</span></span>;
}).slice(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; [1, 9]</span></span>

[<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">7</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>, <span class="hljs-number"><span class="hljs-number">9</span></span>].turn(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">memo, it</span></span></span><span class="hljs-function">)</span></span>{
  it % <span class="hljs-number"><span class="hljs-number">2</span></span> &amp;&amp; memo.push(it * it);
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(memo.length == <span class="hljs-number"><span class="hljs-number">2</span></span>)<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>;
}); <span class="hljs-comment"><span class="hljs-comment">// =&gt; [1, 9]</span></span>
</code></pre><br>
<a name="num"></a><h2><b><a href="#num">#</a> Числа</b></h2><hr><br>
<a name="num-iter"></a><a href="#num-iter"><b>#</b></a> Помните <a href="#es6-iterators"># пример с итерируемыми числами</a>
 из главы про итераторы? Слишком вкусная и универсальная возможность, 
что бы отказываться от подобного в стандартной библиотеке. Очень краткий
 цикл, выполняемый заданное число раз, на базе <code>for-of</code>, простая генерация массива заданной длины через <a href="#es6-array-from"># <code>Array.from</code></a> (а может и <a href="#es6-spread"># spread</a>) и т.д. Так что добавим итератор чисел, хоть и не в такой примитивной реализации. <a href="http://goo.gl/yDD2oM">Примеры</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Классический цикл:</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">3</span></span>; i++)<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(i); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 0, 1, 2</span></span>

<span class="hljs-comment"><span class="hljs-comment">// for-of с итератором числа:</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>)<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(i); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 0, 1, 2</span></span>

<span class="hljs-comment"><span class="hljs-comment">// При отсутствии for-of, хелпер:</span></span>
$<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>).of(<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 0, 1, 2</span></span>

<span class="hljs-comment"><span class="hljs-comment">// Генерация массива заданной длины:</span></span>
<span class="hljs-comment"><span class="hljs-comment">// .map пропускает "дырки" в массиве</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>).map(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random); <span class="hljs-comment"><span class="hljs-comment">// =&gt; [undefined × 10]</span></span>

<span class="hljs-comment"><span class="hljs-comment">// ES5 костыль, пара вспомогательных массивов:</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.apply(<span class="hljs-literal"><span class="hljs-literal">undefined</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>)).map(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random); <span class="hljs-comment"><span class="hljs-comment">// =&gt; [0.9442228835541755, 0.8101077508181334, ...]</span></span>

<span class="hljs-comment"><span class="hljs-comment">// ES6 костыль, заполняем вспомогательный массив:</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>).fill(<span class="hljs-literal"><span class="hljs-literal">undefined</span></span>).map(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random); <span class="hljs-comment"><span class="hljs-comment">// =&gt; [0.5587614295072854, 0.009569905698299408, ...]</span></span>

<span class="hljs-comment"><span class="hljs-comment">// Number Iterator:</span></span>
<span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.from(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random); <span class="hljs-comment"><span class="hljs-comment">// =&gt; [0.9817775336559862, 0.02720663254149258, ...]</span></span>

<span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.from(<span class="hljs-number"><span class="hljs-number">10</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</span></span>

<span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.from(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">it</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> + it * it;
}, <span class="hljs-number"><span class="hljs-number">.42</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; [0.42, 1.42, 4.42, 9.42, 16.42, 25.42, 36.42, 49.42, 64.42, 81.42]</span></span>

<span class="hljs-comment"><span class="hljs-comment">// Comprehensions:</span></span>
[<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(i <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span>)<span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(i % <span class="hljs-number"><span class="hljs-number">2</span></span>)i * i]; <span class="hljs-comment"><span class="hljs-comment">// =&gt; [1, 9, 25, 49, 81]</span></span>

Dict((<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(i <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>)[<span class="hljs-string"><span class="hljs-string">'key'</span></span> + i, !(i % <span class="hljs-number"><span class="hljs-number">2</span></span>)])); <span class="hljs-comment"><span class="hljs-comment">// =&gt; {key0: true, key1: false, key2: true}</span></span>

$<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-number"><span class="hljs-number">10</span></span>).filter(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">i</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> i % <span class="hljs-number"><span class="hljs-number">2</span></span>;
}).array(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">i</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> i * i;
});  <span class="hljs-comment"><span class="hljs-comment">// =&gt; [1, 9, 25, 49, 81]</span></span>

Dict($<span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-number"><span class="hljs-number">3</span></span>).map(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">i</span></span></span><span class="hljs-function">)</span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [<span class="hljs-string"><span class="hljs-string">'key'</span></span> + i, !(i % <span class="hljs-number"><span class="hljs-number">2</span></span>)];
})); <span class="hljs-comment"><span class="hljs-comment">// =&gt; {key0: true, key1: false, key2: true}</span></span>
</code></pre><br>
<a name="num-math"></a><a href="#num-math"><b>#</b></a> Математические функции в <code>Number.prototype</code> — из разряда приятных мелочей. Точно также как в Sugar и MooTools, вынесем методы из объекта <code>Math</code> в <code>Number.prototype</code>.
 Тут и говорить особо нечего — контекст становится первым аргументом 
математической функции. Может и дублирует уже имеющийся, 
стандартизованный, функционал, но это довольно удобно :)<br>
<br>
Отдельной строкой упомянем метод <code>Number#random</code>. Он возвращает случайное число между числом-контекстом и переданным аргументом (по умолчанию — 0).<br>
<br>
<a href="http://goo.gl/06bs1k">Примеры</a>:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-number"><span class="hljs-number">3.</span></span>.pow(<span class="hljs-number"><span class="hljs-number">3</span></span>);           <span class="hljs-comment"><span class="hljs-comment">// =&gt; 27</span></span>
(<span class="hljs-number"><span class="hljs-number">-729</span></span>).abs().sqrt(); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 27</span></span>

<span class="hljs-number"><span class="hljs-number">10.</span></span>.random(<span class="hljs-number"><span class="hljs-number">20</span></span>);         <span class="hljs-comment"><span class="hljs-comment">// =&gt; Случайное число (10, 20), например, 16.818793776910752</span></span>
<span class="hljs-number"><span class="hljs-number">10.</span></span>.random(<span class="hljs-number"><span class="hljs-number">20</span></span>).floor(); <span class="hljs-comment"><span class="hljs-comment">// =&gt; Случайное целое [10, 19], например, 16</span></span>

<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> array = [<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>];
array[array.length.random().floor()]; <span class="hljs-comment"><span class="hljs-comment">// =&gt; Случайный элемент массива, например, 4</span></span>
</code></pre><br>
<a name="escape"></a><h2><b><a href="#escape">#</a> Экранирование спецсимволов</b></h2><hr><br>
<a name="escape-html"></a><a href="#escape-html"><b>#</b></a> Если я 
внезапно, под конец статьи, скажу, что JavaScript используется, в первую
 очередь, для работы с HTML, то великой тайны не открою. Для работы с 
HTML как на клиенте, так и на сервере нам требуется его экранировать. 
Кто-то может сказать, что это задача фреймворка или шаблонизатора. Вот 
только стоит ли для такой примитивной задачи их тянуть? Методы для 
экранирования HTML есть во всех стандартных библиотеках. В Sugar, 
Prototype, MooTools это методы <code>escapeHTML</code> и <code>unescapeHTML</code> в прототипе строки. Не будем нарушать данную традицию:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">'&lt;script&gt;doSomething();&lt;/script&gt;'</span></span>.escapeHTML(); <span class="hljs-comment"><span class="hljs-comment">// =&gt; '&amp;lt;script&amp;gt;doSomething();&amp;lt;/script&amp;gt;'</span></span>
<span class="hljs-string"><span class="hljs-string">'&amp;lt;script&amp;gt;doSomething();&amp;lt;/script&amp;gt;'</span></span>.unescapeHTML(); <span class="hljs-comment"><span class="hljs-comment">// =&gt; '&lt;script&gt;doSomething();&lt;/script&gt;'</span></span>
</code></pre><br>
<a name="escape-regexp"></a><a href="#escape-regexp"><b>#</b></a> Часто 
возникает необходимость создать регулярное выражение из пользовательских
 данных, а для корректной / безопасной работы нужно экранировать и их. 
Методы для этого есть в Sugar, Prototype, MooTools, где-то как 
статический метод <code>RegExp</code>, где-то метод <code>String.prototype</code>. Давно <a href="http://esdiscuss.org/topic/regexp-escape">обсуждается</a> добавление такого метода в ECMAScript. Надеюсь, мы дождемся этого, а пока реализуем <a href="https://gist.github.com/kangax/9698100">предложенный вариант</a> в нашей библиотеке:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">RegExp</span></span>.escape(<span class="hljs-string"><span class="hljs-string">'Привет -[]{}()*+?.,\\^$|'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; 'Привет \-\[\]\{\}\(\)\*\+\?\.\,\\\^\$\|'</span></span>
</code></pre><br>
<a name="end"></a><h2><b><a href="#end">#</a> Заключение</b></h2><hr><br>
Ну вот как-то так.<br>
<br>
Предвижу появление в комментариях всем известной картинки xkcd про 
стандарты, вот только почти всё в библиотеке максимально соответствует 
имеющимся, а альтернатив её, кроме солянки далеко не из пары библиотек и
 весом в сотни килобайт, я не вижу.<br>
<br>
Что касается планов на будущее библиотеки, они, в основном, раскиданы по
 тексту статьи. Еще нужно, конечно, оптимизировать производительность и 
лучше покрыть код тестами — с этим пока особо не заморачивался.<br>
<br>
Интересует ваше мнение о том, что я, возможно, пропустил и что можно реализовать лучше.<br>
<br>
<b>Да. И еще, раз подобным страдать начал — скучно мне. Ищу интересный проект с достойной з/п.</b></div>
      
<script class="js-mediator-script">!function(e){function t(t,n){if(!(n in e)){for(var r,a=e.document,i=a.scripts,o=i.length;o--;)if(-1!==i[o].src.indexOf(t)){r=i[o];break}if(!r){r=a.createElement("script"),r.type="text/javascript",r.async=!0,r.defer=!0,r.src=t,r.charset="UTF-8";var d=function(){var e=a.getElementsByTagName("script")[0];e.parentNode.insertBefore(r,e)};"[object Opera]"==e.opera?a.addEventListener?a.addEventListener("DOMContentLoaded",d,!1):e.attachEvent("onload",d):d()}}}t("//mediator.mail.ru/script/2820404/","_mediator")}(window);</script>
    </div>

    

    <dl class="post__tags">
      <dt class="post__tags-label">Метки:</dt>
      <dd class="post__tags-list">    <ul class="inline-list inline-list_fav-tags js-post-tags">
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/search/?q=%5BCore.js%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">Core.js</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/search/?q=%5BECMAScript%205%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">ECMAScript 5</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/search/?q=%5BECMAScript%206%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">ECMAScript 6</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/search/?q=%5BECMAScript%207%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">ECMAScript 7</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/search/?q=%5BHarmony%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">Harmony</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/search/?q=%5BStrawman%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">Strawman</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/search/?q=%5BMap%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">Map</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/search/?q=%5BSet%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">Set</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/search/?q=%5BWeakMap%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">WeakMap</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/search/?q=%5BWeakSet%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">WeakSet</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/search/?q=%5BPromise%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">Promise</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/search/?q=%5BSymbol%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">Symbol</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/search/?q=%5Bconsole%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">console</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/search/?q=%5BsetImmediate%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">setImmediate</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/search/?q=%5BDict%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">Dict</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/search/?q=%5B%D0%B8%D1%82%D0%B5%D1%80%D0%B0%D1%82%D0%BE%D1%80%D1%8B%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">итераторы</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/search/?q=%5Biterators%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">iterators</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/search/?q=%5B%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%B0%D1%8F%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B0%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">стандартная библиотека</a></li>
        <li class="inline-list__item inline-list__item_tag"><a href="https://habr.com/search/?q=%5Bstandard%20library%5D&amp;target_type=posts" rel="tag" class="inline-list__item-link post__tag  ">standard library</a></li>
    </ul>
    <button type="button" class="btn btn_outline_grey btn_mini hidden js-fav-edit-link" data-type="2" data-id="216997" onclick="show_edit_tags(this)">Добавить метки</button>
</dd>
    </dl>
  </div>
</article>


    <form action="/json/favorites/" method="post" class="form form_bordered form_favorites-tags hidden" id="edit_tags_form">
  <input name="action" value="add" type="hidden">
  <input name="ti" value="0" type="hidden">
  <input name="tt" value="0" type="hidden">

  <button type="button" class="btn form__close-btn" onclick="closeForm(this)" title="Закрыть"><svg class="icon-svg icon-svg_navbar-close-search" width="31" height="32" viewBox="0 0 31 32" aria-hidden="true" version="1.1" role="img"><path d="M26.67 0L15.217 11.448 3.77 0 0 3.77l11.447 11.45L0 26.666l3.77 3.77L15.218 18.99l11.45 11.448 3.772-3.77-11.448-11.45L30.44 3.772z"></path></svg>
</button>

  <fieldset class="form__fieldset">
    <legend class="form__legend">Пометьте публикацию своими метками</legend>
    <input name="tags_string" class="form__text-field" autocomplete="off" type="text">
    <span class="form__desc">Метки необходимо разделять запятой. Например: <i>php, javascript, адронный коллайдер, задача трех тел</i></span>
  </fieldset>

  <div class="form__footer">
    <button type="submit" class="btn btn_x-large btn_outline_blue" disabled="disabled">Сохранить</button>
  </div>
</form>

  </div>

  <div class="sidebar_right sidebar_content-area sticky_init" style="position: relative;">
      <!-- /235032688/HH/HH01_ATF_Poster -->
<div class="dfp-slot dfp-slot_top is_visible">
  <div class="dfp-slot__banner" id="div-gpt-hh-atf">
    <script>
      window.display_dfp_slot('div-gpt-hh-atf');
    </script>
  <div id="google_ads_iframe_/235032688/HH/HH01_ATF_Poster_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/235032688/HH/HH01_ATF_Poster_0" title="3rd party ad content" name="google_ads_iframe_/235032688/HH/HH01_ATF_Poster_0" scrolling="no" marginwidth="0" marginheight="0" style="border: 0px none; vertical-align: bottom;" srcdoc="" width="300" height="500" frameborder="0"></iframe></div></div>
  <div class="dfp-slot__placeholder">
  <span class="dfp-slot__placeholder-text">Ой, у вас баннер убежал!<br><br><a href="https://u.tmtm.ru/tmtalkadblock" class="btn btn_large btn_blue" target="_blank" rel=" noopener">Ну. И что?</a></span>
</div>
<a href="https://tmtm.ru/services/advertising/" target="_blank" class="dfp-slot__label" rel=" noopener">Реклама</a>

</div>

      

  <div style="height: 640px; left: auto; right: auto; top: auto; bottom: auto; position: static; display: block; vertical-align: baseline; box-sizing: border-box; margin: 0px; padding-left: 0px; padding-right: 0px; float: none; width: 300px; z-index: -1;"></div><div class="js-ad_sticky" style="position: absolute; left: 0px; width: 300px; bottom: -65132px; top: auto;">
    <div class="default-block">
      <div class="default-block__header">
        <span class="default-block__header-title">Читают сейчас</span>
      </div>

      <div class="default-block__content default-block__content_most-read" id="broadcast_most-read">
            <ul class="content-list content-list_most-read">
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/post/417715/" class="post-info__title" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'now', '1'); }">Прощай, Google Maps</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">63,7k</span>
                    </span>
                    <a href="https://habr.com/post/417715/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">108</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/company/pult/blog/417743/" class="post-info__title" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'now', '2'); }">Легендарные усилители – историческая анатомия трендов: “холодный” транзисторный звук</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">7,4k</span>
                    </span>
                    <a href="https://habr.com/company/pult/blog/417743/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">13</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/post/417745/" class="post-info__title" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'now', '3'); }">Личный опыт: Data Engineering на Upwork</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">7,4k</span>
                    </span>
                    <a href="https://habr.com/post/417745/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">38</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/post/417679/" class="post-info__title" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'now', '4'); }">Тяжкое наследие прошлого. Проблемы командной строки Windows</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">34,4k</span>
                    </span>
                    <a href="https://habr.com/post/417679/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">62</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/post/416941/" class="post-info__title" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'now', '5'); }">Теория счастья. Введение в мерфологию</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">4,4k</span>
                    </span>
                    <a href="https://habr.com/post/416941/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">33</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/post/417753/" class="post-info__title" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'now', '6'); }">Компрессия больших массивов простых чисел</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">1,9k</span>
                    </span>
                    <a href="https://habr.com/post/417753/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter post-info__meta-counter_small">5</span>
                    </a>
                  </div>
                </li>
            </ul>
      </div>
    </div>
  </div>

  </div>
</section>

<section class="column-wrapper column-wrapper_post-additionals">
  <div class="content_left">
    <div class="post-additionals">
        <ul class="post-stats post-stats_post js-user_" id="infopanel_post_216997">
        <li class="post-stats__item post-stats__item_voting-wjt">
          <div class="voting-wjt voting-wjt_post js-post-vote" data-id="216997" data-type="2">
            <button type="button" class="btn voting-wjt__button " data-action="plus" onclick="posts_vote(this);" title="Голосовать могут только зарегистрированные пользователи " disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

            <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг 87: ↑82 и ↓5">+77</span>

            <button type="button" class="btn voting-wjt__button " data-action="minus" onclick="posts_vote(this);" title="Голосовать могут только зарегистрированные пользователи  " disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
          </div>
        </li>

    <li class="post-stats__item post-stats__item_bookmark">
      <button type="button" class="btn bookmark-btn bookmark-btn_post" data-type="2" data-id="216997" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в закладки" onclick="posts_add_to_favorite(this);" disabled="disabled">
        <span class="btn_inner"><svg class="icon-svg_bookmark " width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg><span class="bookmark__counter js-favs_count" title="Количество пользователей, добавивших публикацию в закладки">600</span></span>
      </button>
    </li>

    <li class="post-stats__item post-stats__item_views">
      <div class="post-stats__views" title="Просмотры публикации">
        <svg class="icon-svg_views-count" width="21" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-stats__views-count">71,7k</span>
      </div>
    </li>

      <li class="post-stats__item post-stats__item_comments">
          <a href="https://habr.com/post/216997/#comments" class="post-stats__comments-link">
            <svg class="icon-svg_post-comments" width="16" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-stats__comments-count" title="Читать комментарии">40</span>
          </a>
      </li>





  </ul>

          <form action="/conversations/rock/" method="GET" class="form form_bordered form_admin-causes hidden" id="admin_causes">

    <input name="moderation" value="216997" type="hidden">

    <button type="button" class="btn form__close-btn" onclick="closeForm(this)"><svg class="icon-svg icon-svg_navbar-close-search" width="31" height="32" viewBox="0 0 31 32" aria-hidden="true" version="1.1" role="img"><path d="M26.67 0L15.217 11.448 3.77 0 0 3.77l11.447 11.45L0 26.666l3.77 3.77L15.218 18.99l11.45 11.448 3.772-3.77-11.448-11.45L30.44 3.772z"></path></svg>
</button>

    <fieldset class="form__fieldset form__fieldset_admin-causes">
      <legend class="form__legend">Выберите рекомендации для отправки автору:</legend>

      <div class="checkbox-group_columns">
        <label class="checkbox checkbox_custom checkbox_recommendation-form">
          <input class="form__input form__input_checkbox" name="id[]" value="1" type="checkbox">
          <span class="checkbox__label">Указан только блог</span>
        </label>

        <label class="checkbox checkbox_custom checkbox_recommendation-form">
          <input class="form__input form__input_checkbox" name="id[]" value="2" type="checkbox">
          <span class="checkbox__label">Орфографические ошибки</span>
        </label>

        <label class="checkbox checkbox_custom checkbox_recommendation-form">
          <input class="form__input form__input_checkbox" name="id[]" value="3" type="checkbox">
          <span class="checkbox__label">Пунктуационные ошибки</span>
        </label>

        <label class="checkbox checkbox_custom checkbox_recommendation-form">
          <input class="form__input form__input_checkbox" name="id[]" value="4" type="checkbox">
          <span class="checkbox__label">Отступы</span>
        </label>

        <label class="checkbox checkbox_custom checkbox_recommendation-form">
          <input class="form__input form__input_checkbox" name="id[]" value="5" type="checkbox">
          <span class="checkbox__label">Текст-простыня</span>
        </label>

        <label class="checkbox checkbox_custom checkbox_recommendation-form">
          <input class="form__input form__input_checkbox" name="id[]" value="6" type="checkbox">
          <span class="checkbox__label">Короткие предложения</span>
        </label>
        <label class="checkbox checkbox_custom checkbox_recommendation-form">
          <input class="form__input form__input_checkbox" name="id[]" value="7" type="checkbox">
          <span class="checkbox__label">Смайлики</span>
        </label>
        <label class="checkbox checkbox_custom checkbox_recommendation-form">
          <input class="form__input form__input_checkbox" name="id[]" value="8" type="checkbox">
          <span class="checkbox__label">Много форматирования</span>
        </label>
        <label class="checkbox checkbox_custom checkbox_recommendation-form">
          <input class="form__input form__input_checkbox" name="id[]" value="9" type="checkbox">
          <span class="checkbox__label">Картинки</span>
        </label>
        <label class="checkbox checkbox_custom checkbox_recommendation-form">
          <input class="form__input form__input_checkbox" name="id[]" value="10" type="checkbox">
          <span class="checkbox__label">Ссылки</span>
        </label>
        <label class="checkbox checkbox_custom checkbox_recommendation-form">
          <input class="form__input form__input_checkbox" name="id[]" value="11" type="checkbox">
          <span class="checkbox__label">Оформление кода</span>
        </label>
        <label class="checkbox checkbox_custom checkbox_recommendation-form">
          <input class="form__input form__input_checkbox" name="id[]" value="12" type="checkbox">
          <span class="checkbox__label">Рекламный характер</span>
        </label>
      </div>
    </fieldset>

    <div class="form__footer">
      <button type="submit" class="btn btn_x-large btn_outline_blue" disabled="disabled">Отправить</button>
    </div>
  </form>

        <form action="/json/complaints/add/" class="form form_bordered form_abuse hidden" method="post" id="abuse_form">
  <input name="tt" value="2" type="hidden">
  <input name="ti" value="216997" type="hidden">

  <button type="button" class="btn form__close-btn" onclick="closeForm(this)"><svg class="icon-svg icon-svg_navbar-close-search" width="31" height="32" viewBox="0 0 31 32" aria-hidden="true" version="1.1" role="img"><path d="M26.67 0L15.217 11.448 3.77 0 0 3.77l11.447 11.45L0 26.666l3.77 3.77L15.218 18.99l11.45 11.448 3.772-3.77-11.448-11.45L30.44 3.772z"></path></svg>
</button>

  <fieldset class="form__fieldset">
    <legend class="form__legend">Нарушение</legend>
    <input name="text" class="form__text-field" type="text">
    <span class="form__desc">Опишите суть нарушения</span>
  </fieldset>

  <div class="form__footer">
    <button type="submit" class="btn btn_x-large btn_outline_blue" disabled="disabled">Отправить</button>
  </div>
</form>


        <div class="author-panel author-panel_user">
          <div class="user-info">
    <div class="user-info__stats">
  <div class="media-obj media-obj_user-info">
    <a href="https://habr.com/users/rock/" class="media-obj__image" onclick="if (typeof ga === 'function') { ga('send', 'event', 'author_info_top', 'profile', 'rock');}">
        <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/4a0778fd67c81e90eae402d2ea40d49c.gif" class="media-obj__image-pic media-obj__image-pic_user" width="48" height="48">
    </a>

    <div class="media-obj__body media-obj__body_user-info">
          <a href="https://habr.com/info/help/karma/" class="user-info__stats-item stacked-counter" title="95 голосов">
            <div class="stacked-counter__value stacked-counter__value_green ">54,5</div>
            <div class="stacked-counter__label">Карма</div>
          </a>

        <a href="https://habr.com/info/help/karma/#rating" class="user-info__stats-item stacked-counter stacked-counter_rating" title="Рейтинг пользователя">
          <div class="stacked-counter__value stacked-counter__value_magenta">0,0</div>
          <div class="stacked-counter__label">Рейтинг</div>
        </a>

        <a href="https://habr.com/users/rock/subscription/followers/" class="user-info__stats-item stacked-counter stacked-counter_subscribers" title="Количество подписчиков">
          <div class="stacked-counter__value stacked-counter__value_blue">19</div>
          <div class="stacked-counter__label">Подписчики</div>
        </a>
    </div>
  </div>

</div>


  <div class="user-info__about">
    <div class="user-info__links">
      <a href="https://habr.com/users/rock/" class="user-info__fullname" onclick="if (typeof ga === 'function') { ga('send', 'event', 'author_info_top', 'profile', 'rock');}">Денис Пушкарев</a>&nbsp;<a href="https://habr.com/users/rock/" class="user-info__nickname user-info__nickname_doggy" onclick="if (typeof ga === 'function') { ga('send', 'event', 'author_info_top', 'profile', 'rock');}">rock</a>
      
    </div>

      <div class="user-info__specialization">JS</div>
  </div>

</div>

        </div>
        <div class="post-share">
  <span class="post-share__title">Поделиться публикацией</span>
  <ul class="post-share__buttons social-icons">
    <li class="social-icons__item social-icons__item_post">
      <a href="https://www.facebook.com/sharer/sharer.php?u=https://habr.com/post/216997/" class="social-icons__item-link social-icons__item-link_normal social-icons__item-link_facebook" title="Опубликовать ссылку в Facebook" onclick="window.open(this.href, 'Опубликовать ссылку в Facebook', 'width=640,height=436,toolbar=0,status=0'); return false">
        <svg class="icon-svg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="24" height="24" viewBox="0 0 24 24"><path d="M14.889 8.608h-1.65c-.195 0-.413.257-.413.6v1.192h2.063v1.698h-2.063v5.102h-1.948v-5.102h-1.766v-1.698h1.766v-1c0-1.434.995-2.6 2.361-2.6h1.65v1.808z"></path></svg>
      </a>
    </li>
    <li class="social-icons__item social-icons__item_post">
      <a href="https://twitter.com/intent/tweet?text=%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F+%D0%BE+%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9+%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5+JavaScript.+Core.js+https://habr.com/p/216997/+via+%40habr_com" class="social-icons__item-link social-icons__item-link_normal social-icons__item-link_twitter" title="Опубликовать ссылку в Twitter" onclick="window.open(this.href, 'Опубликовать ссылку в Twitter', 'width=800,height=300,resizable=yes,toolbar=0,status=0'); return false">
        <svg class="icon-svg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="24" height="24" viewBox="0 0 24 24"><path d="M17.414 8.642c-.398.177-.826.296-1.276.35.459-.275.811-.71.977-1.229-.43.254-.905.439-1.41.539-.405-.432-.982-.702-1.621-.702-1.227 0-2.222.994-2.222 2.222 0 .174.019.344.058.506-1.846-.093-3.484-.978-4.579-2.322-.191.328-.301.71-.301 1.117 0 .77.392 1.45.988 1.849-.363-.011-.706-.111-1.006-.278v.028c0 1.077.766 1.974 1.782 2.178-.187.051-.383.078-.586.078-.143 0-.282-.014-.418-.04.282.882 1.103 1.525 2.075 1.542-.76.596-1.718.951-2.759.951-.179 0-.356-.01-.53-.031.983.63 2.15.998 3.406.998 4.086 0 6.321-3.386 6.321-6.321l-.006-.287c.433-.314.81-.705 1.107-1.15z"></path></svg>
      </a>
    </li>
    <li class="social-icons__item social-icons__item_post">
      <a href="https://vk.com/share.php?url=https://habr.com/post/216997/" class="social-icons__item-link social-icons__item-link_normal social-icons__item-link_vkontakte" title="Опубликовать ссылку во ВКонтакте" onclick="window.open(this.href, 'Опубликовать ссылку во Вконтакте', 'width=800,height=300,toolbar=0,status=0'); return false">
        <svg class="icon-svg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="24" height="24" viewBox="0 0 24 24"><path d="M16.066 11.93s1.62-2.286 1.782-3.037c.054-.268-.064-.418-.343-.418h-1.406c-.322 0-.44.139-.537.343 0 0-.76 1.619-1.685 2.64-.297.33-.448.429-.612.429-.132 0-.193-.11-.193-.408v-2.607c0-.365-.043-.472-.343-.472h-2.254c-.172 0-.279.1-.279.236 0 .343.526.421.526 1.352v1.921c0 .386-.022.537-.204.537-.483 0-1.631-1.663-2.274-3.552-.129-.386-.268-.494-.633-.494h-1.406c-.204 0-.354.139-.354.343 0 .375.44 2.114 2.167 4.442 1.159 1.566 2.683 2.414 4.056 2.414.838 0 1.041-.139 1.041-.494v-1.202c0-.301.118-.429.29-.429.193 0 .534.062 1.33.848.945.901 1.01 1.276 1.525 1.276h1.578c.161 0 .311-.075.311-.343 0-.354-.462-.987-1.17-1.738-.29-.386-.762-.805-.912-.998-.215-.226-.151-.354-.001-.59z"></path></svg>
      </a>
    </li>
    <li class="social-icons__item social-icons__item_post">
      <a href="https://t.me/share/url?url=https://habr.com/post/216997/&amp;title=%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js" class="social-icons__item-link social-icons__item-link_normal social-icons__item-link_telegram" title="Поделиться ссылкой в Telegram" onclick="window.open(this.href, 'Поделиться ссылкой в Telegram', 'width=800,height=300,toolbar=0,status=0'); return false">
        <svg class="icon-svg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="24" height="24" viewBox="0 0 24 24"><path d="M17.17 7.621l-10.498 3.699c-.169.059-.206.205-.006.286l2.257.904 1.338.536 6.531-4.796s.189.057.125.126l-4.68 5.062-.27.299.356.192 2.962 1.594c.173.093.397.016.447-.199.058-.254 1.691-7.29 1.728-7.447.047-.204-.087-.328-.291-.256zm-6.922 8.637c0 .147.082.188.197.084l1.694-1.522-1.891-.978v2.416z"></path></svg>
      </a>
    </li>
    <li class="social-icons__item social-icons__item_post">
      <a href="https://getpocket.com/edit?url=https://habr.com/post/216997/&amp;title=%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js" class="social-icons__item-link social-icons__item-link_normal social-icons__item-link_pocket" title="Добавить ссылку в Pocket" target="_blank" rel=" noopener">
      </a>
    </li>
  </ul>
</div>

    </div>
      

    <div class="default-block default-block_content">
      <div class="default-block__header default-block__header_large">
        <span class="default-block__header-title default-block__header-title_large">Похожие публикации</span>
      </div>
      <div class="default-block__content">

        <ul class="content-list">
            <li class="content-list__item content-list__item_devided post-info">
              <span class="post-info__date"> 5 мая 2015 в 15:21</span>
              <a href="https://habr.com/post/257305/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'similar_posts', 'common', '1'); }">Реализация приватных полей с помощью WeakMap в JavaScript</a>

              <div class="post-info__meta">
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#arrow-bold"></use></svg>
                      <span class="post-info__meta-counter">+10</span>
                </span>
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">11,4k</span>
                </span>
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">87</span>
                </span>
                <a href="https://habr.com/post/257305#comments" class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">23</span>
                </a>
              </div>
            </li>
            <li class="content-list__item content-list__item_devided post-info">
              <span class="post-info__date">24 февраля 2014 в 11:08</span>
              <a href="https://habr.com/post/213455/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'similar_posts', 'common', '2'); }">Стрелочные функции (Arrow functions) в ECMAScript 6</a>

              <div class="post-info__meta">
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#arrow-bold"></use></svg>
                      <span class="post-info__meta-counter">+102</span>
                </span>
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">62,3k</span>
                </span>
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">224</span>
                </span>
                <a href="https://habr.com/post/213455#comments" class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">62</span>
                </a>
              </div>
            </li>
            <li class="content-list__item content-list__item_devided post-info">
              <span class="post-info__date">10 марта 2008 в 19:03</span>
              <a href="https://habr.com/post/21496/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'similar_posts', 'common', '3'); }">Реализации ECMAScript 4</a>

              <div class="post-info__meta">
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#arrow-bold"></use></svg>
                      <span class="post-info__meta-counter">+14</span>
                </span>
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">1,4k</span>
                </span>
                <span class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">11</span>
                </span>
                <a href="https://habr.com/post/21496#comments" class="post-info__meta-item">
                  <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">8</span>
                </a>
              </div>
            </li>
        </ul>

      </div>
    </div>

    <div class="default-block_content">
        

  <div class="promo-block promo-block_freelansim-tasks">
    <div class="promo-block__header promo-block__header_justify">
      <a href="http://freelansim.ru/" target="_blank" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_content=block_name&amp;utm_campaign=tasks_post" class="promo-block__title-link" rel=" noopener">Заказы</a>
      <a href="http://freelansim.ru/" target="_blank" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_content=block_logo&amp;utm_campaign=tasks_post" class="icon-svg_logo-freelansim" rel=" noopener"><svg class="icon-svg" width="141" height="24" viewBox="0 0 141 24" aria-hidden="true" aria-labelledby="title" version="1.1" role="img"><path d="M13.701 2.34h-.49v-1.639h-5.283v1.614h-.488c-3.84 0-7.434 2.421-7.434 7.069 0 4.402 3.4 7.067 7.434 7.067h.488v1.859h5.283v-1.834h.49c3.84 0 7.434-2.421 7.434-7.067 0-4.403-3.4-7.069-7.434-7.069zm-5.773 9.832h-.268c-1.784 0-2.788-1.199-2.788-2.763 0-1.516 1.002-2.788 2.788-2.788h.268v5.551zm5.553 0h-.27v-5.552h.27c1.786 0 2.788 1.272 2.788 2.788-.001 1.566-1.004 2.764-2.788 2.764zM30.549 5.714c-1.248 0-2.592.782-3.155 1.957v-1.59h-4.549v17.218h4.549v-6.579c.563 1.173 1.907 1.957 3.155 1.957 3.57 0 5.502-2.91 5.502-6.48 0-3.572-1.931-6.483-5.502-6.483zm-1.468 8.658c-.659 0-1.271-.318-1.687-.832v-2.715c.416-.49 1.028-.808 1.687-.808 1.173 0 2.177.953 2.177 2.177 0 1.175-1.002 2.177-2.177 2.177zM42.312 11.804v-5.723h-4.549v12.229h4.549l4.035-5.723v5.723h4.55v-12.229h-4.55zM54.661 10.753c0 3.155-.806 4.158-1.858 4.158h-.685v3.4h2.104c2.983 0 4.499-2.201 4.499-6.456v-1.859h2.764v8.314h4.549v-12.227h-11.372v4.672zM74.225 5.714c-2.348 0-4.523.661-6.188 1.957l2.152 2.568c1.125-.734 2.812-1.149 3.937-1.149 1.026 0 1.931.268 1.931 1.564v.367c-4.914 0-8.314.856-8.314 4.182 0 2.348 1.687 3.472 4.279 3.472 1.248 0 2.911-.685 4.035-1.957v1.59h4.549v-8.386c.001-3.57-3.545-4.207-6.381-4.207zm1.834 8.585c-.685.905-1.419 1.296-2.078 1.296-.929 0-1.199-.49-1.199-.954 0-1.149 1.468-1.566 3.277-1.566v1.224zM91.148 9.897h-4.036v-3.816h-4.547v12.229h4.547v-4.256h4.036v4.256h4.549v-12.229h-4.549zM104.377 10.019c1.125 0 1.54.123 2.665.709l1.907-3.301c-1.272-1.149-2.764-1.712-5.063-1.712-3.57 0-6.48 2.91-6.48 6.481 0 3.57 2.91 6.48 6.48 6.48 2.3 0 3.791-.562 5.063-1.711l-1.907-3.302c-1.125.611-1.54.709-2.665.709-1.272 0-2.421-.88-2.421-2.176s1.149-2.177 2.421-2.177zM114.965 11.804v-5.723h-4.549v12.229h4.549l4.035-5.723v5.723h4.55v-12.229h-4.55zM136.388 6.081l-3.056 4.451-3.032-4.451h-4.793v12.229h4.549v-6.505l2.469 3.669h1.615l2.493-3.719v6.555h4.55v-12.229z"></path></svg></a>
    </div>

    <div class="promo-block__content">
      <ul class="content-list content-list_promo">
          <li class="content-list__item content-list__item_promo">
            <a href="http://freelansim.ru/tasks/207459" class="promo-item" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_content=task&amp;utm_campaign=tasks_post">
  <div class="promo-item__wrap">
    <span class="promo-item__title promo-item__title_hovered">Сверстать простой одностраничник</span>
    <div class="promo-item__attrs">
      <span class="promo-item__attrs-item">10 откликов</span>
      <span class="promo-item__attrs-item">47 просмотров</span>
    </div>
  </div>

    <div class="promo-item__aside promo-item__aside_hovered">
      <div class="promo-item__amount promo-item__amount_rur">
        <span>1 000</span>
      </div>
      <span class="promo-item__per">за проект</span>
    </div>
</a>

          </li>
          <li class="content-list__item content-list__item_promo">
            <a href="http://freelansim.ru/tasks/207457" class="promo-item" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_content=task&amp;utm_campaign=tasks_post">
  <div class="promo-item__wrap">
    <span class="promo-item__title promo-item__title_hovered">Нарисовать 3В модель</span>
    <div class="promo-item__attrs">
      <span class="promo-item__attrs-item">5 откликов</span>
      <span class="promo-item__attrs-item">30 просмотров</span>
    </div>
  </div>

    <div class="promo-item__aside promo-item__aside_hovered">
      <div class="promo-item__amount promo-item__amount_rur">
        <span>10 000</span>
      </div>
      <span class="promo-item__per">за проект</span>
    </div>
</a>

          </li>
          <li class="content-list__item content-list__item_promo">
            <a href="http://freelansim.ru/tasks/207451" class="promo-item" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_content=task&amp;utm_campaign=tasks_post">
  <div class="promo-item__wrap">
    <span class="promo-item__title promo-item__title_hovered">Провести консультацию по Битрикс24 (коробочная версия)</span>
    <div class="promo-item__attrs">
      <span class="promo-item__attrs-item">4 отклика</span>
      <span class="promo-item__attrs-item">16 просмотров</span>
    </div>
  </div>

    <div class="promo-item__aside promo-item__aside_hovered">
      <div class="promo-item__amount promo-item__amount_rur">
        <span>3 000</span>
      </div>
      <span class="promo-item__per">за проект</span>
    </div>
</a>

          </li>
          <li class="content-list__item content-list__item_promo">
            <a href="http://freelansim.ru/tasks/207449" class="promo-item" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_content=task&amp;utm_campaign=tasks_post">
  <div class="promo-item__wrap">
    <span class="promo-item__title promo-item__title_hovered">Ищу frontend разработчика со знанием vue, vuex, graphQl, ES6 - 2</span>
    <div class="promo-item__attrs">
      <span class="promo-item__attrs-item">4 отклика</span>
      <span class="promo-item__attrs-item">27 просмотров</span>
    </div>
  </div>

    <div class="promo-item__aside promo-item__aside_hovered">
      <div class="promo-item__amount promo-item__amount_rur">
        <span>500</span>
      </div>
      <span class="promo-item__per">за час</span>
    </div>
</a>

          </li>
          <li class="content-list__item content-list__item_promo">
            <a href="http://freelansim.ru/tasks/207445" class="promo-item" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_content=task&amp;utm_campaign=tasks_post">
  <div class="promo-item__wrap">
    <span class="promo-item__title promo-item__title_hovered">Специалист по фронтенду на проект "Все сауны города"</span>
    <div class="promo-item__attrs">
      <span class="promo-item__attrs-item">3 отклика</span>
      <span class="promo-item__attrs-item">69 просмотров</span>
    </div>
  </div>

    <div class="promo-item__aside promo-item__aside_hovered">
      <div class="promo-item__amount promo-item__amount_rur">
        <span>10 000</span>
      </div>
      <span class="promo-item__per">за проект</span>
    </div>
</a>

          </li>
      </ul>
    </div>

    <div class="promo-block__footer">
      <a href="http://freelansim.ru/tasks/" class="promo-block__footer-link promo-block__footer-link_selected" data-utm="?utm_source=tm_habrahabr&amp;utm_medium=tm_block&amp;utm_content=tasks_all&amp;utm_campaign=tasks_post" target="_blank" rel=" noopener">Все заказы</a>

      <script type="text/javascript" src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/a_002"></script>
    </div>
  </div>


    </div>
    <!-- /235032688/HH/HH02_inpage_wide -->
<div class="dfp-slot">
  <div class="dfp-slot__banner dfp-slot__banner_wide" id="div-gpt-hh-inpage-wide">
    <script>
      window.display_dfp_slot('div-gpt-hh-inpage-wide');
    </script>
  <div id="google_ads_iframe_/235032688/HH/HH02_inpage_wide_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/235032688/HH/HH02_inpage_wide_0" title="3rd party ad content" name="google_ads_iframe_/235032688/HH/HH02_inpage_wide_0" scrolling="no" marginwidth="0" marginheight="0" style="border: 0px none; vertical-align: bottom;" srcdoc="" width="780" height="200" frameborder="0"></iframe></div></div>
  <div class="dfp-slot__placeholder">
  <span class="dfp-slot__placeholder-text">Ой, у вас баннер убежал!<br><br><a href="https://u.tmtm.ru/tmtalkadblock" class="btn btn_large btn_blue" target="_blank" rel=" noopener">Ну. И что?</a></span>
</div>
<a href="https://tmtm.ru/services/advertising/" target="_blank" class="dfp-slot__label" rel=" noopener">Реклама</a>

</div>

  </div>
  <div class="sidebar_right">
    <!-- /235032688/HH/HH03_inpage_Vertical -->
<div class="dfp-slot">
  <div class="dfp-slot__banner" id="div-gpt-hh-inpage-vertical">
    <script>
      window.display_dfp_slot('div-gpt-hh-inpage-vertical');
    </script>
  <div id="google_ads_iframe_/235032688/HH/HH03_inpage_Vertical_0__container__" style="border: 0pt none;"><iframe id="google_ads_iframe_/235032688/HH/HH03_inpage_Vertical_0" title="3rd party ad content" name="google_ads_iframe_/235032688/HH/HH03_inpage_Vertical_0" scrolling="no" marginwidth="0" marginheight="0" style="border: 0px none; vertical-align: bottom;" srcdoc="" width="300" height="600" frameborder="0"></iframe></div></div>
  <div class="dfp-slot__placeholder">
  <span class="dfp-slot__placeholder-text">Ой, у вас баннер убежал!<br><br><a href="https://u.tmtm.ru/tmtalkadblock" class="btn btn_large btn_blue" target="_blank" rel=" noopener">Ну. И что?</a></span>
</div>
<a href="https://tmtm.ru/services/advertising/" target="_blank" class="dfp-slot__label" rel=" noopener">Реклама</a>

</div>

  </div>
</section>

<section class="column-wrapper column-wrapper_comments js-comments-wrapper">
  <div class="content_left">
        <div class="comments-section" id="comments">
    <header class="comments-section__head">
      <span class="comments-section__head-title">Комментарии <strong class="comments-section__head-counter" id="comments_count">40</strong></span>
      
    </header>
    
    

    <ul class="content-list content-list_comments" id="comments-list">
        <li class="content-list__item content-list__item_comment js-comment " rel="8131883">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8131883">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8131883">
          <a href="https://habr.com/users/TheSteelRat/" class="user-info user-info_inline" data-user-login="TheSteelRat">
    <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/de383bf280395513dad12cd55d0f821a_small.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">TheSteelRat</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">18.11.14 в 15:26</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8131883" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8131883" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8131883" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8131883" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8131883" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Общий рейтинг 16: ↑3 и ↓13">–10</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-5">Вот что только люди не придумают лишь бы не пользоваться Dart (не воспринимайте эти слова всерьёз). <br>
<br>
Там, кстати, многое из вами перечисленного есть из коробки.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8131883">  <li class="content-list__item content-list__item_comment js-comment " rel="8131973">
    
    <span class="parent_id" data-parent_id="8131883"></span>
    <div class="comment" id="comment_8131973">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8131973">
          <a href="https://habr.com/users/aen/" class="user-info user-info_inline" data-user-login="aen">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">aen</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">18.11.14 в 16:06</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8131973" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8131973" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8131973" data-parent_id="8131883" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_8131883" class="icon_comment-arrow-up js-comment_parent" data-id="8131973" data-parent_id="8131883" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8131973" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8131973" data-parent_id="8131883" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8131973" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг 6: ↑6 и ↓0">+6</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Вот только dart не поддерживается браузерами «из коробки».</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_8131973">  <li class="content-list__item content-list__item_comment js-comment " rel="8131987">
    
    <span class="parent_id" data-parent_id="8131973"></span>
    <div class="comment" id="comment_8131987">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8131987">
          <a href="https://habr.com/users/TheSteelRat/" class="user-info user-info_inline" data-user-login="TheSteelRat">
    <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/de383bf280395513dad12cd55d0f821a_small.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">TheSteelRat</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">18.11.14 в 16:11</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8131987" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8131987" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8131987" data-parent_id="8131973" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_8131973" class="icon_comment-arrow-up js-comment_parent" data-id="8131987" data-parent_id="8131973" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8131987" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8131987" data-parent_id="8131973" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8131987" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Общий рейтинг 8: ↑1 и ↓7">–6</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-5">Как и CofeeScript с TypeScript-ом. Но это не мешает транслировать их в JS.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_8131987">  <li class="content-list__item content-list__item_comment js-comment " rel="8132037">
    
    <span class="parent_id" data-parent_id="8131987"></span>
    <div class="comment" id="comment_8132037">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8132037">
          <a href="https://habr.com/users/xGromMx/" class="user-info user-info_inline" data-user-login="xGromMx">
    <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/87d3ac3bc4c66d98ccb017e920560bec_small.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">xGromMx</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">18.11.14 в 16:30</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8132037" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8132037" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8132037" data-parent_id="8131987" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_8131987" class="icon_comment-arrow-up js-comment_parent" data-id="8132037" data-parent_id="8131987" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8132037" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8132037" data-parent_id="8131987" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8132037" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг 10: ↑9 и ↓1">+8</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Но то, во что транслируется Dart 
это совсем не то, во что Typescript + всегда можно юзать выше упомянутый
 проект 6to5. А вот сколько лишнего кода генерит Dart это просто ужасно.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_8132037">  <li class="content-list__item content-list__item_comment js-comment " rel="8132259">
    
    <span class="parent_id" data-parent_id="8132037"></span>
    <div class="comment" id="comment_8132259">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8132259">
          <a href="https://habr.com/users/TheSteelRat/" class="user-info user-info_inline" data-user-login="TheSteelRat">
    <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/de383bf280395513dad12cd55d0f821a_small.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">TheSteelRat</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">18.11.14 в 17:34</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8132259" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8132259" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8132259" data-parent_id="8132037" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_8132037" class="icon_comment-arrow-up js-comment_parent" data-id="8132259" data-parent_id="8132037" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8132259" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8132259" data-parent_id="8132037" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8132259" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Общий рейтинг 6: ↑2 и ↓4">–2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-2">Ну так и Dart не просто синтаксический сахар в отличие от TypeScript.<br>
<br>
За возможности приходится платить лишним кодом. Но всё зависит от 
размера приложения. Если вам надо пару десятков строк на клиенте 
написать, то Dart будет оверхедом. А если вам нужен толстый клиент по 
типу GMail, то с ростом количества клиентского кода вы перестанете 
замечать размер кода ядра Dart-а.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_8132259"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8132521">
    
    <span class="parent_id" data-parent_id="8131883"></span>
    <div class="comment" id="comment_8132521">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8132521">
          <a href="https://habr.com/users/StreetStrider/" class="user-info user-info_inline" data-user-login="StreetStrider">
    <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/8c00a7856dad71ff0df30530f4bf98bd_small.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">StreetStrider</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">18.11.14 в 19:05</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8132521" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8132521" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8132521" data-parent_id="8131883" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_8131883" class="icon_comment-arrow-up js-comment_parent" data-id="8132521" data-parent_id="8131883" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8132521" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8132521" data-parent_id="8131883" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8132521" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг 15: ↑13 и ↓2">+11</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Чего только люди не придумают, лишь бы не учить JS.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_8132521">  <li class="content-list__item content-list__item_comment js-comment " rel="8132733">
    
    <span class="parent_id" data-parent_id="8132521"></span>
    <div class="comment" id="comment_8132733">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8132733">
          <a href="https://habr.com/users/TheSteelRat/" class="user-info user-info_inline" data-user-login="TheSteelRat">
    <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/de383bf280395513dad12cd55d0f821a_small.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">TheSteelRat</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">18.11.14 в 20:33</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8132733" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8132733" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8132733" data-parent_id="8132521" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_8132521" class="icon_comment-arrow-up js-comment_parent" data-id="8132733" data-parent_id="8132521" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8132733" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8132733" data-parent_id="8132521" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8132733" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Общий рейтинг 3: ↑1 и ↓2">–1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-1">Одно другому не мешает.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_8132733"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8133095">
    
    <span class="parent_id" data-parent_id="8131883"></span>
    <div class="comment" id="comment_8133095">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8133095">
          <a href="https://habr.com/users/TheSteelRat/" class="user-info user-info_inline" data-user-login="TheSteelRat">
    <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/de383bf280395513dad12cd55d0f821a_small.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">TheSteelRat</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">19.11.14 в 00:43</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8133095" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8133095" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8133095" data-parent_id="8131883" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_8131883" class="icon_comment-arrow-up js-comment_parent" data-id="8133095" data-parent_id="8131883" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8133095" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8133095" data-parent_id="8131883" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8133095" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Общий рейтинг 3: ↑0 и ↓3">–3</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-3">Вы хоть обосновывайте за что минусуете и карму сливаете. Пока похоже на борьбу с инакомыслящими.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_8133095">  <li class="content-list__item content-list__item_comment js-comment " rel="8133099">
    
    <span class="parent_id" data-parent_id="8133095"></span>
    <div class="comment" id="comment_8133099">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8133099">
          <a href="https://habr.com/users/Borz/" class="user-info user-info_inline" data-user-login="Borz">
    <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ea26a3fc7215158df7b3faf3f26449b7_small.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Borz</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">19.11.14 в 00:47</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8133099" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8133099" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8133099" data-parent_id="8133095" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_8133095" class="icon_comment-arrow-up js-comment_parent" data-id="8133099" data-parent_id="8133095" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8133099" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8133099" data-parent_id="8133095" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8133099" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг 4: ↑4 и ↓0">+4</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">дело не в инакомыслии, а в том, как вы эту мыслю до публики доносите ;)</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_8133099">  <li class="content-list__item content-list__item_comment js-comment " rel="8133305">
    
    <span class="parent_id" data-parent_id="8133099"></span>
    <div class="comment" id="comment_8133305">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8133305">
          <a href="https://habr.com/users/TheSteelRat/" class="user-info user-info_inline" data-user-login="TheSteelRat">
    <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/de383bf280395513dad12cd55d0f821a_small.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">TheSteelRat</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">19.11.14 в 08:59</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8133305" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8133305" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8133305" data-parent_id="8133099" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_8133099" class="icon_comment-arrow-up js-comment_parent" data-id="8133305" data-parent_id="8133099" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8133305" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8133305" data-parent_id="8133099" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8133305" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Пожалуй вы правы. Стоило 
остановиться на первом комментарии и не продолжать дискуссию. И вставить
 всё-таки тег &lt;irony&gt;. Habr is so serious…</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_8133305"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8133289">
    
    <span class="parent_id" data-parent_id="8131883"></span>
    <div class="comment" id="comment_8133289">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8133289">
          <a href="https://habr.com/users/forgotten/" class="user-info user-info_inline" data-user-login="forgotten">
    <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/e5bc0012830293468f6f2290d67a72af_small.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">forgotten</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">19.11.14 в 08:29</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8133289" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8133289" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8133289" data-parent_id="8131883" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_8131883" class="icon_comment-arrow-up js-comment_parent" data-id="8133289" data-parent_id="8131883" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8133289" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8133289" data-parent_id="8131883" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8133289" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Общий рейтинг 2: ↑0 и ↓2">–2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-2">Я просто оставлю это здесь: <a href="http://benchmarksgame.alioth.debian.org/u32/benchmark.php?test=all&amp;lang=dart&amp;lang2=v8&amp;data=u32">benchmarksgame.alioth.debian.org/u32/benchmark.php?test=all&amp;lang=dart&amp;lang2=v8&amp;data=u32</a></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_8133289"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8132039">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8132039">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8132039">
          <a href="https://habr.com/users/Jabher/" class="user-info user-info_inline" data-user-login="Jabher">
    <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/29bce4a20e9d72a90e49a7c5fd7d8861_small.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Jabher</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">18.11.14 в 16:32</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8132039" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8132039" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8132039" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8132039" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8132039" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter  voting-wjt__counter_negative js-score" title="Общий рейтинг 12: ↑3 и ↓9">–6</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message comment__message_downgrade comment__message_downgrade-5"><img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/99efe07713174872fd5131daf89b2af5.png" alt="image"></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8132039">  <li class="content-list__item content-list__item_comment js-comment " rel="8132047">
    
    <span class="parent_id" data-parent_id="8132039"></span>
    <div class="comment" id="comment_8132047">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8132047">
          <a href="https://habr.com/users/Stepanow/" class="user-info user-info_inline" data-user-login="Stepanow">
    <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/c4e8db5df5ca716e26b8205780826c66_small.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Stepanow</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">18.11.14 в 16:35</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8132047" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8132047" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8132047" data-parent_id="8132039" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_8132039" class="icon_comment-arrow-up js-comment_parent" data-id="8132047" data-parent_id="8132039" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8132047" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8132047" data-parent_id="8132039" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8132047" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг 7: ↑7 и ↓0">+7</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Вы не дочитали до <a href="http://habrahabr.ru/post/216997/#end">#заключения</a>?</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_8132047">  <li class="content-list__item content-list__item_comment js-comment " rel="8133411">
    
    <span class="parent_id" data-parent_id="8132047"></span>
    <div class="comment" id="comment_8133411">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8133411">
          <a href="https://habr.com/users/Jabher/" class="user-info user-info_inline" data-user-login="Jabher">
    <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/29bce4a20e9d72a90e49a7c5fd7d8861_small.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Jabher</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">19.11.14 в 10:32</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8133411" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8133411" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8133411" data-parent_id="8132047" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_8132047" class="icon_comment-arrow-up js-comment_parent" data-id="8133411" data-parent_id="8132047" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8133411" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8133411" data-parent_id="8132047" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8133411" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг 2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">увы. посыпаю голову пеплом.<br>
<br>
извиняюсь, был напуган.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_8133411"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8132057">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8132057">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8132057">
          <a href="https://habr.com/users/Aetet/" class="user-info user-info_inline" data-user-login="Aetet">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Aetet</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">18.11.14 в 16:37</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8132057" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8132057" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8132057" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8132057" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8132057" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг 2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">:offtop<br>
А что за плагин для генерации статьи использовался? Я вижу 
markdown-подобную верстку, которая транслировалась в habra-разметку. Что
 за плагин?</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8132057">  <li class="content-list__item content-list__item_comment js-comment " rel="8132075">
    
    <span class="parent_id" data-parent_id="8132057"></span>
    <div class="comment" id="comment_8132075">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author  " rel="8132075">
          <a href="https://habr.com/users/rock/" class="user-info user-info_inline" data-user-login="rock">
    <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/4a0778fd67c81e90eae402d2ea40d49c_small.gif" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">rock</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">18.11.14 в 16:41</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8132075" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8132075" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8132075" data-parent_id="8132057" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_8132057" class="icon_comment-arrow-up js-comment_parent" data-id="8132075" data-parent_id="8132057" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8132075" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8132075" data-parent_id="8132057" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8132075" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг 3: ↑3 и ↓0">+3</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Никакого плагина — доступные теги + ctrl-c / ctrl-v :) Хотя к концу поднадоело, думал и правда что такое написать.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_8132075">  <li class="content-list__item content-list__item_comment js-comment " rel="8132137">
    
    <span class="parent_id" data-parent_id="8132075"></span>
    <div class="comment" id="comment_8132137">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8132137">
          <a href="https://habr.com/users/poxvuibr/" class="user-info user-info_inline" data-user-login="poxvuibr">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">poxvuibr</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">18.11.14 в 16:58</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8132137" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8132137" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8132137" data-parent_id="8132075" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_8132075" class="icon_comment-arrow-up js-comment_parent" data-id="8132137" data-parent_id="8132075" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8132137" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8132137" data-parent_id="8132075" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8132137" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг 1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Я вот пишу в markdown, конвертирую в html, потом руками правлю по необходимости. Тут тоже так?</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_8132137">  <li class="content-list__item content-list__item_comment js-comment " rel="8132179">
    
    <span class="parent_id" data-parent_id="8132137"></span>
    <div class="comment" id="comment_8132179">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author  " rel="8132179">
          <a href="https://habr.com/users/rock/" class="user-info user-info_inline" data-user-login="rock">
    <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/4a0778fd67c81e90eae402d2ea40d49c_small.gif" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">rock</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">18.11.14 в 17:07</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8132179" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8132179" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8132179" data-parent_id="8132137" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_8132137" class="icon_comment-arrow-up js-comment_parent" data-id="8132179" data-parent_id="8132137" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8132179" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8132179" data-parent_id="8132137" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8132179" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Нет, сразу html. Не особо напрягает.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_8132179">  <li class="content-list__item content-list__item_comment js-comment " rel="8132593">
    
    <span class="parent_id" data-parent_id="8132179"></span>
    <div class="comment" id="comment_8132593">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8132593">
          <a href="https://habr.com/users/Zenitchik/" class="user-info user-info_inline" data-user-login="Zenitchik">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Zenitchik</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">18.11.14 в 19:29</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8132593" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8132593" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8132593" data-parent_id="8132179" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_8132179" class="icon_comment-arrow-up js-comment_parent" data-id="8132593" data-parent_id="8132179" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8132593" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8132593" data-parent_id="8132179" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8132593" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг 2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">А я, когда припёрло, наскоро допилил node.js-ную реализацию шаблонизатора micro под свои нужды и собирал статью с её помощью.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-4" id="reply_comments_8132593">  <li class="content-list__item content-list__item_comment js-comment " rel="8135241">
    
    <span class="parent_id" data-parent_id="8132593"></span>
    <div class="comment" id="comment_8135241">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8135241">
          <a href="https://habr.com/users/BuranLcme/" class="user-info user-info_inline" data-user-login="BuranLcme">
    <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/dfffa0c30a9a10a35839c8ee9e275eab_small.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">BuranLcme</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">19.11.14 в 23:44</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8135241" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8135241" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8135241" data-parent_id="8132593" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_8132593" class="icon_comment-arrow-up js-comment_parent" data-id="8135241" data-parent_id="8132593" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8135241" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8135241" data-parent_id="8132593" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8135241" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Заделитесь, пожалуйста)</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-5" id="reply_comments_8135241">  <li class="content-list__item content-list__item_comment js-comment " rel="8136565">
    
    <span class="parent_id" data-parent_id="8135241"></span>
    <div class="comment" id="comment_8136565">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8136565">
          <a href="https://habr.com/users/Zenitchik/" class="user-info user-info_inline" data-user-login="Zenitchik">
    <svg class="default-image default-image_mini default-image_pink" width="24" height="24"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Zenitchik</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">20.11.14 в 15:40</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8136565" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8136565" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8136565" data-parent_id="8135241" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_8135241" class="icon_comment-arrow-up js-comment_parent" data-id="8136565" data-parent_id="8135241" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8136565" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8136565" data-parent_id="8135241" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8136565" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг 1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Да, знаете ли стыдно такую мелочь
 как достижение позиционировать. В общем-то наскороручная любительская 
поделка на десяток строк.<br>
Но если интересно:<br>
<pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fs = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'fs'</span></span>);
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tmpl</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">str</span></span></span><span class="hljs-function">)</span></span>{
      <span class="hljs-comment"><span class="hljs-comment">/* br */</span></span>
	  <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> funcBody = <span class="hljs-string"><span class="hljs-string">"var _buffer=[],print=function(){_buffer.push.apply(_buffer,arguments);};"</span></span> +
		<span class="hljs-string"><span class="hljs-string">"_buffer.push('"</span></span> +
        str
          .replace(<span class="hljs-regexp"><span class="hljs-regexp">/[\n]/g</span></span>, <span class="hljs-string"><span class="hljs-string">'/* br */'</span></span>)
		  .replace(<span class="hljs-regexp"><span class="hljs-regexp">/\\/g</span></span>, <span class="hljs-string"><span class="hljs-string">"\\\\"</span></span>)
          .replace(<span class="hljs-regexp"><span class="hljs-regexp">/[\r]/g</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>)
          .replace(<span class="hljs-regexp"><span class="hljs-regexp">/[\t]/g</span></span>, <span class="hljs-string"><span class="hljs-string">"  "</span></span>)
          .split(<span class="hljs-string"><span class="hljs-string">"&lt;%"</span></span>).join(<span class="hljs-string"><span class="hljs-string">"\t"</span></span>)
          .replace(<span class="hljs-regexp"><span class="hljs-regexp">/((^|%&gt;)[^\t]*)'/g</span></span>, <span class="hljs-string"><span class="hljs-string">"$1\r"</span></span>)
          .replace(<span class="hljs-regexp"><span class="hljs-regexp">/\t=(.*?)%&gt;/g</span></span>, <span class="hljs-string"><span class="hljs-string">"',$1,'"</span></span>)
          .split(<span class="hljs-string"><span class="hljs-string">"\t"</span></span>).join(<span class="hljs-string"><span class="hljs-string">"');"</span></span>)
          .split(<span class="hljs-string"><span class="hljs-string">"%&gt;"</span></span>).join(<span class="hljs-string"><span class="hljs-string">"_buffer.push('"</span></span>)
          .split(<span class="hljs-string"><span class="hljs-string">"\r"</span></span>).join(<span class="hljs-string"><span class="hljs-string">"\\'"</span></span>) 
      + <span class="hljs-string"><span class="hljs-string">"');return _buffer.join('');"</span></span>;
      
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> funcBody;
  };

<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> code = fs.readFileSync(<span class="hljs-string"><span class="hljs-string">'source.txt'</span></span>, {encoding:<span class="hljs-string"><span class="hljs-string">'UTF-8'</span></span>});
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'load ok'</span></span>);
<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fnBody = tmpl(code);
fs.writeFileSync(<span class="hljs-string"><span class="hljs-string">'function.js'</span></span>, fnBody);
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'convert ok'</span></span>);
<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fn = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Function</span></span>(fnBody);
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'compiled ok'</span></span>);
code = fn();
code = code.replace(<span class="hljs-regexp"><span class="hljs-regexp">/\/\*\sbr\s\*\//g</span></span>, <span class="hljs-string"><span class="hljs-string">"\n"</span></span>);
fs.writeFileSync(<span class="hljs-string"><span class="hljs-string">'result.txt'</span></span>, code);
<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'finish'</span></span>);
</code></pre><br>
<br>
Интерфейса не делал никакого, и как модуль тоже не оформлял. Для моих 
задач было достаточно запускать из командной строки и получать из одного
 файла другой.<br>
По коду можно видеть, что я скопипастил основной код из micro и слегка допилил.<br>
Файл function.js — это промежуточный вывод, он был мне нужен для отладки.<br>
<br>
Для генерации годно оформленных километровых таблиц мне этого хватило. И
 для проведения вычислительного эксперимента прямо во время сборки 
статьи — тоже.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-6" id="reply_comments_8136565"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8132197">
    
    <span class="parent_id" data-parent_id="8132137"></span>
    <div class="comment" id="comment_8132197">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8132197">
          <a href="https://habr.com/users/Aetet/" class="user-info user-info_inline" data-user-login="Aetet">
    <svg class="default-image default-image_mini default-image_green" width="24" height="24"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Aetet</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">18.11.14 в 17:12</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8132197" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8132197" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8132197" data-parent_id="8132137" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_8132137" class="icon_comment-arrow-up js-comment_parent" data-id="8132197" data-parent_id="8132137" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8132197" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8132197" data-parent_id="8132137" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8132197" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Такой тулзовиной?<br>
<a href="https://github.com/kriomant/markdown-habrahabr/blob/master/article.txt">github.com/kriomant/markdown-habrahabr/blob/master/article.txt</a></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-3" id="reply_comments_8132197"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8134647">
    
    <span class="parent_id" data-parent_id="8132057"></span>
    <div class="comment" id="comment_8134647">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8134647">
          <a href="https://habr.com/users/Delphinum/" class="user-info user-info_inline" data-user-login="Delphinum">
    <svg class="default-image default-image_mini default-image_lilac" width="24" height="24"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Delphinum</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">19.11.14 в 18:37</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8134647" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8134647" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8134647" data-parent_id="8132057" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_8132057" class="icon_comment-arrow-up js-comment_parent" data-id="8134647" data-parent_id="8132057" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8134647" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8134647" data-parent_id="8132057" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8134647" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Могу посоветовать Vim + UltiSnips + Vimperator.<br>
Делается примерно так:<br>
1. Устанавливаете фокус в окне ввода статьи<br>
2. Нажимаете Ctrl+i, открывается Vim<br>
3. Пишите статью с использованием заранее загатовленных сниппетов и всяческих плюшек Vim<br>
4. Нажимаете ZZ и то что напишите, попадет на хабр</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_8134647"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8132479">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8132479">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8132479">
          <a href="https://habr.com/users/StreetStrider/" class="user-info user-info_inline" data-user-login="StreetStrider">
    <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/8c00a7856dad71ff0df30530f4bf98bd_small.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">StreetStrider</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">18.11.14 в 18:52</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8132479" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8132479" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8132479" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8132479" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8132479" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>И тут возникает проблема — fn(foo.bar.baz.bind(foo.bar)). Мы вынуждены писать foo.bar 2 раза, это явное нарушение принципа DRY.</blockquote>
 Нарушение, действительно. Но с другой стороны, такое сложное обращение 
говорит о нарушении «закона Деметры». Проблема сложных биндов 
существует, но она не так остра, потому что решить её можно введя 
адекватные абстракции.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8132479"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8132495">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8132495">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8132495">
          <a href="https://habr.com/users/StreetStrider/" class="user-info user-info_inline" data-user-login="StreetStrider">
    <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/8c00a7856dad71ff0df30530f4bf98bd_small.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">StreetStrider</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">18.11.14 в 18:57</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8132495" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8132495" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8132495" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8132495" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8132495" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг 1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Почему вы использовали 
наименование Function#part вместо partial? Это ваше личное предпочтение,
 или для соответствия чему-то? В библиотеках обычно используется полный 
вариант.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8132495">  <li class="content-list__item content-list__item_comment js-comment " rel="8132611">
    
    <span class="parent_id" data-parent_id="8132495"></span>
    <div class="comment" id="comment_8132611">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author  " rel="8132611">
          <a href="https://habr.com/users/rock/" class="user-info user-info_inline" data-user-login="rock">
    <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/4a0778fd67c81e90eae402d2ea40d49c_small.gif" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">rock</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">18.11.14 в 19:38</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8132611" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8132611" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8132611" data-parent_id="8132495" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_8132495" class="icon_comment-arrow-up js-comment_parent" data-id="8132611" data-parent_id="8132495" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8132611" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8132611" data-parent_id="8132495" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8132611" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>такое сложное обращение говорит о нарушении «закона Деметры».</blockquote><br>
Возможно. Но это просто пример. Дело не в сложных биндингах, а в простом
 извлечении метода из контекста. Например, посмотрите на передачу метода
 <code>test</code> регулярного выражения как коллбэка. Хотя без <code>Proxy</code> или abstract references это выглядит довольно топорно.<br>
<br>
<blockquote>Почему вы использовали наименование Function#part вместо partial?</blockquote><br>
Личное предпочтение — чуть короче и вполне понятно. Тем более, никаких 
подвижек со стандартизацией подобного я не вижу. В Sugar это вообще <code>fill</code>.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_8132611"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8132619">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8132619">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8132619">
          <a href="https://habr.com/users/Mingun/" class="user-info user-info_inline" data-user-login="Mingun">
    <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/9130eb3ba6c60bf548a9f7ab4703e68e_small.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">Mingun</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">18.11.14 в 19:40</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8132619" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8132619" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8132619" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8132619" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8132619" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг 1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Кстати, если кто не знает, все ссылки на MDN по <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Array"><code>Array</code></a>, <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Object"><code>Object</code></a>, <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Number"><code>Number</code></a>, <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Intl"><code>Intl</code></a> и частично <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/String"><code>String</code></a> можно заменить на русскоязычные версии :).<br>
<br>
Насчёт поддержки стандарта интернационализации в Firefox: сейчас он 
поддерживается не полностью, либо это просто баг (хотя на странице 
документации и <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Intl#Browser_compatibility">сказано обратное</a>). Например, следующая конструкция вылетает с ошибкой <code>"Error: internal error while computing Intl data"</code> (проблема в свойстве <code>currencyDisplay</code>, отличном от значения <code>"symbol"</code>):<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Intl</span></span>.NumberFormat(<span class="hljs-string"><span class="hljs-string">'ru-RU'</span></span>, { style: <span class="hljs-string"><span class="hljs-string">'currency'</span></span>, currency: <span class="hljs-string"><span class="hljs-string">'RUB'</span></span>, currencyDisplay: <span class="hljs-string"><span class="hljs-string">'code'</span></span> }).format(<span class="hljs-number"><span class="hljs-number">123456.789</span></span>));
</code></pre><br>
Chrome в этом случае правильно выводит строку «123 456,79 RUB».</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8132619"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8132651">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8132651">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8132651">
          <a href="https://habr.com/users/igorshubovych/" class="user-info user-info_inline" data-user-login="igorshubovych">
    <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/a4f1785464a70ba48be587c8c70f3daa_small.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">igorshubovych</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">18.11.14 в 19:59</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8132651" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8132651" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8132651" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8132651" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8132651" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">А выложите еще на bower пожалуйста</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8132651">  <li class="content-list__item content-list__item_comment js-comment " rel="8132791">
    
    <span class="parent_id" data-parent_id="8132651"></span>
    <div class="comment" id="comment_8132791">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author  " rel="8132791">
          <a href="https://habr.com/users/rock/" class="user-info user-info_inline" data-user-login="rock">
    <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/4a0778fd67c81e90eae402d2ea40d49c_small.gif" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">rock</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">18.11.14 в 20:56</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8132791" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8132791" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8132791" data-parent_id="8132651" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_8132651" class="icon_comment-arrow-up js-comment_parent" data-id="8132791" data-parent_id="8132651" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8132791" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8132791" data-parent_id="8132651" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8132791" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Мдэ. А на bower имечко то занято… придётся ставить так:<br>
<br>
<pre><code class="bash hljs">bower install core.js
</code></pre></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_8132791">  <li class="content-list__item content-list__item_comment js-comment " rel="8134009">
    
    <span class="parent_id" data-parent_id="8132791"></span>
    <div class="comment" id="comment_8134009">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8134009">
          <a href="https://habr.com/users/dfuse/" class="user-info user-info_inline" data-user-login="dfuse">
    <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/a3cc283033e624e5a27e328f8d269296_small.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">dfuse</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">19.11.14 в 14:39</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8134009" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8134009" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8134009" data-parent_id="8132791" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_8132791" class="icon_comment-arrow-up js-comment_parent" data-id="8134009" data-parent_id="8132791" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8134009" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8134009" data-parent_id="8132791" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8134009" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Надо было такое выбрать, чтоб везде одинаково… запомнить не сложно, но OCD не дремлет.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-2" id="reply_comments_8134009"></ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8132697">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8132697">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8132697">
          <a href="https://habr.com/users/kalabro/" class="user-info user-info_inline" data-user-login="kalabro">
    <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/0afa8544da8184185e7ed5ea844f02cf_small.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">kalabro</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">18.11.14 в 20:20</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8132697" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8132697" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8132697" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8132697" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8132697" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг 3: ↑3 и ↓0">+3</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Вместо того, чтобы читать статью, залипла на сапёре на домашней страничке автора :(</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8132697"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8133329">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8133329">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8133329">
          <a href="https://habr.com/users/asavin/" class="user-info user-info_inline" data-user-login="asavin">
    <svg class="default-image default-image_mini default-image_blue" width="24" height="24"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#slug"></use></svg>
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">asavin</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">19.11.14 в 09:25</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8133329" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8133329" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8133329" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8133329" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8133329" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Эммм… Как-то я привык считать, 
что маленькие модули — это хорошо, а подобные библиотеки всё-в-одном — 
не очень. «Делайте что-то одно, но делайте это хорошо».</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8133329">  <li class="content-list__item content-list__item_comment js-comment " rel="8133377">
    
    <span class="parent_id" data-parent_id="8133329"></span>
    <div class="comment" id="comment_8133377">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author  " rel="8133377">
          <a href="https://habr.com/users/rock/" class="user-info user-info_inline" data-user-login="rock">
    <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/4a0778fd67c81e90eae402d2ea40d49c_small.gif" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">rock</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">19.11.14 в 10:10</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8133377" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8133377" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8133377" data-parent_id="8133329" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_8133329" class="icon_comment-arrow-up js-comment_parent" data-id="8133377" data-parent_id="8133329" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8133377" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8133377" data-parent_id="8133329" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8133377" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг 4: ↑3 и ↓1">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">«Маленькие модули» — это хорошо, 
но только не в качестве стандартной библиотеки. На каждое телодвижение 
придётся думать — а подключен ли, например, модуль проверки вхождения 
подстроки в строку?<br>
<br>
«Делать хорошо» в данном случае «маленьким библиотекам» мешает именно то, что они маленькие. Например, <code>Promise</code>.
 Обещания должны разрешаться асинхронно, для этого нужно эффективное 
отложенное исполнение, а это далеко не компактно. В итоге, во всех 
современных браузерах, кроме IE, native-promise-only использует только… <code>setTimeout</code>, разрешающий обещания через 4мс, а не сразу. Здесь же, в рамках модуля <code>setImmediate</code>, присутствует реализация эффективного отложенного исполнения другими способами, не имеющими ограничения в 4мс.<br>
<br>
На практике эти «маленькие модули» не такие уж и меленькие, солянка из 
таких библиотек во много раз превышает размер данной библиотеки. Эталон 
компактности и минималистичности — Undescore — всего раза в 1,5 легче 
core.js. es6-shim, что не включает в себя даже полифила символов и 
weak-коллекций, даже тяжелее. А core.js сама по себе модульная — никто 
не мешает собрать необходимый вам минимум функционала в пару килобайт.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_8133377"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8134001">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8134001">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8134001">
          <a href="https://habr.com/users/dfuse/" class="user-info user-info_inline" data-user-login="dfuse">
    <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/a3cc283033e624e5a27e328f8d269296_small.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">dfuse</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">19.11.14 в 14:38</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8134001" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8134001" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8134001" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8134001" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8134001" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><a href="http://habrahabr.ru/users/rock/" class="user_link">rock</a>,
 you rock. Респект за труд по созданию библиотеки и статьи. Безусловно 
приму к сведению и при возможность включу в какой-нибудь проект.<br>
<br>
В копилку — база полифиллов <a href="http://polyfills.io/">polyfills.io</a></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8134001"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8134083">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8134083">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8134083">
          <a href="https://habr.com/users/forgotten/" class="user-info user-info_inline" data-user-login="forgotten">
    <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/e5bc0012830293468f6f2290d67a72af_small.png" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">forgotten</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">19.11.14 в 15:00</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8134083" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8134083" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8134083" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8134083" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8134083" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг 7: ↑6 и ↓1">+5</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Это просто самая офигительная статья ever на этом простигосподи ресурсе.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8134083">  <li class="content-list__item content-list__item_comment js-comment " rel="8136245">
    
    <span class="parent_id" data-parent_id="8134083"></span>
    <div class="comment" id="comment_8136245">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8136245">
          <a href="https://habr.com/users/mihmig/" class="user-info user-info_inline" data-user-login="mihmig">
    <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/ef65eac207e7d57c7056b1b03c561622_small.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">mihmig</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">20.11.14 в 13:59</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8136245" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8136245" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8136245" data-parent_id="8134083" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_8134083" class="icon_comment-arrow-up js-comment_parent" data-id="8136245" data-parent_id="8134083" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8136245" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8136245" data-parent_id="8134083" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8136245" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг 1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Фундаментальный труд, я бы сказал.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_8136245"></ul>
  </li>
</ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8154219">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8154219">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8154219">
          <a href="https://habr.com/users/arXangel/" class="user-info user-info_inline" data-user-login="arXangel">
    <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/5d5b9c29480b4eff82e40bc1fe4f2958_small.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">arXangel</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">29.11.14 в 18:00</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8154219" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8154219" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8154219" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8154219" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8154219" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг 2: ↑2 и ↓0">+2</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Я вот очень благодарен автору, 
потому что, тут собрано столько всего и в одном месте, что и читать 
очень приятно, и другим людям давать как материал для изучения 
возможностей js тоже хорошо.<br>
<br>
Про библиотеку, если честно, то конечно хорошо, чтобы это было в 
стандартной части языка, а не отдельным файлом, который надо грузить, но
 то, что она маленькая — это очень хорошо и возможно, когда я буду 
писать новый проект, я попробую её вместо lo-dash и своих костылей, так 
как уж очень вкусно выглядит она.<br>
<br>
Спасибо за фундаментальный труд.</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8154219"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8229545">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8229545">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8229545">
          <a href="https://habr.com/users/CestLaVie/" class="user-info user-info_inline" data-user-login="CestLaVie">
    <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/29ad0e770f92ace44bb32ef532cf1ed8_small.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">CestLaVie</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">18.01.15 в 18:04</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8229545" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8229545" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8229545" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8229545" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8229545" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">В свете ES6-синтаксиса, комменты 
вида "// =&gt; [1, 2, 3]" читаются несколько двусмысленно, лучше 
придумать другую форму отображения рез-тов в комментах. А в остальном 
статья хороша!</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8229545"></ul>
  </li>
  <li class="content-list__item content-list__item_comment js-comment " rel="8308129">
    
    <span class="parent_id" data-parent_id="0"></span>
    <div class="comment" id="comment_8308129">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head   " rel="8308129">
          <a href="https://habr.com/users/CestLaVie/" class="user-info user-info_inline" data-user-login="CestLaVie">
    <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/29ad0e770f92ace44bb32ef532cf1ed8_small.jpg" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">CestLaVie</span>
</a>

          <svg class="icon_comment-edit" title="Комментарий был изменен" width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#pencil"></use></svg>
          <time class="comment__date-time comment__date-time_published">02.03.15 в 14:03</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8308129" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8308129" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>


  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8308129" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8308129" data-parent_id="0" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8308129" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter   js-score" title="Общий рейтинг 0: ↑0 и ↓0">0</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message "><blockquote>Метод Object.create 
создает объект из прототипа. Передав null, можно создать объект без 
прототипа, что сделать на базе ECMAScript 3 невозможно. Приходится 
использовать лютый трэш на базе iframe.</blockquote><br>
Очень хочется узнать подробности — что имеется в виду. Дело в том, что у меня тоже не получается сделать корректно:<br>
<br>
<pre><code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.create = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">prototype, descriptors</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> === <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span> || <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> === <span class="hljs-string"><span class="hljs-string">'undefined'</span></span>)
        <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> prototype) {
            <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'object'</span></span>:
            <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'function'</span></span>:
                <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> <span class="hljs-comment"><span class="hljs-comment">/** @type * */</span></span> result = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> create(create.prototype = prototype);
                <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> descriptors === <span class="hljs-string"><span class="hljs-string">'undefined'</span></span>) ? result: <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.defineProperties(result, descriptors);
            <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>:
                <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">TypeError</span></span>(<span class="hljs-string"><span class="hljs-string">'Object prototype may only be an Object or null: '</span></span> + prototype);
        }
    <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>
        <span class="hljs-comment"><span class="hljs-comment">/* Если происходит внутренний вызов функции как конструктора - удаляем ссылку на прототип, что бы не
         * делать этого в основном коде (что бы его этим не захламлять). */</span></span>
        create.prototype = <span class="hljs-literal"><span class="hljs-literal">null</span></span>;
};

<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.defineProperty(<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>, <span class="hljs-string"><span class="hljs-string">'create'</span></span>, {enumerable: <span class="hljs-literal"><span class="hljs-literal">false</span></span>});

<span class="hljs-comment"><span class="hljs-comment">/** @test */</span></span>
(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">t</span></span></span><span class="hljs-function">)</span></span>{[
        [<span class="hljs-string"><span class="hljs-string">'создание объекта'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
            <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> p = <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.create({z:<span class="hljs-number"><span class="hljs-number">0</span></span>}, {
                    x: { value: <span class="hljs-number"><span class="hljs-number">1</span></span>, writable: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, enumerable:<span class="hljs-literal"><span class="hljs-literal">true</span></span>, configurable: <span class="hljs-literal"><span class="hljs-literal">true</span></span>},
                    y: { value: <span class="hljs-number"><span class="hljs-number">2</span></span>, writable: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, enumerable:<span class="hljs-literal"><span class="hljs-literal">true</span></span>, configurable: <span class="hljs-literal"><span class="hljs-literal">true</span></span>}
            });
            <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> p.hasOwnProperty(<span class="hljs-string"><span class="hljs-string">'x'</span></span>) &amp;&amp; p.x === <span class="hljs-number"><span class="hljs-number">1</span></span> &amp;&amp; p.hasOwnProperty(<span class="hljs-string"><span class="hljs-string">'y'</span></span>) &amp;&amp; p.y === <span class="hljs-number"><span class="hljs-number">2</span></span> &amp;&amp;
                   !p.hasOwnProperty(<span class="hljs-string"><span class="hljs-string">'z'</span></span>) &amp;&amp; (<span class="hljs-string"><span class="hljs-string">'z'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> p) &amp;&amp; p.z === <span class="hljs-number"><span class="hljs-number">0</span></span>;}],
        [<span class="hljs-string"><span class="hljs-string">'создание объекта без свойств'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
            <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> p = <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.create({z:<span class="hljs-number"><span class="hljs-number">0</span></span>});
            <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> !p.hasOwnProperty(<span class="hljs-string"><span class="hljs-string">'z'</span></span>) &amp;&amp; (<span class="hljs-string"><span class="hljs-string">'z'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> p) &amp;&amp; p.z === <span class="hljs-number"><span class="hljs-number">0</span></span>;}],
        [<span class="hljs-string"><span class="hljs-string">'создание объекта без прототипа'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{
            <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.getPrototypeOf(<span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.create(<span class="hljs-literal"><span class="hljs-literal">null</span></span>)) === <span class="hljs-literal"><span class="hljs-literal">null</span></span>;}]
    ].forEach(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">p</span></span></span><span class="hljs-function">)</span></span>{<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Object.create: тест на '</span></span>+p[<span class="hljs-number"><span class="hljs-number">0</span></span>]+<span class="hljs-string"><span class="hljs-string">' '</span></span>+(t(p[<span class="hljs-number"><span class="hljs-number">1</span></span>])?<span class="hljs-string"><span class="hljs-string">''</span></span>:
                                   <span class="hljs-string"><span class="hljs-string">'НЕ (!!!) '</span></span>)+<span class="hljs-string"><span class="hljs-string">'пройден'</span></span>);});})(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">t</span></span></span><span class="hljs-function">)</span></span>{<span class="hljs-keyword"><span class="hljs-keyword">try</span></span>{<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> t()}<span class="hljs-keyword"><span class="hljs-keyword">catch</span></span>(e){<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>;}});</code></pre><br>
Третий тест слетает везде, в т.ч. на Chrom`е… :(((</div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-0" id="reply_comments_8308129">  <li class="content-list__item content-list__item_comment js-comment " rel="8308225">
    
    <span class="parent_id" data-parent_id="8308129"></span>
    <div class="comment" id="comment_8308225">
        <span class="comment__folding-dotholder"></span>
        <div class="comment__head comment__head_topic-author  " rel="8308225">
          <a href="https://habr.com/users/rock/" class="user-info user-info_inline" data-user-login="rock">
    <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/4a0778fd67c81e90eae402d2ea40d49c_small.gif" class="user-info__image-pic user-info__image-pic_small" width="24" height="24">
  <span class="user-info__nickname user-info__nickname_small user-info__nickname_comment">rock</span>
</a>

          
          <time class="comment__date-time comment__date-time_published">02.03.15 в 14:29</time>
          <ul class="inline-list inline-list_comment-nav">
  <li class="inline-list__item inline-list__item_comment-nav">
    <a href="#comment_8308225" class="icon_comment-anchor" title="Ссылка на комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#anchor"></use></svg></a>
  </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#" class="icon_comment-bookmark " onclick="return comments_add_to_favorite(this)" data-type="3" data-id="8308225" data-action="add" title="Только зарегистрированные пользователи могут добавлять публикации в избранное" disabled=""><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg></a>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <span class="icon_comment-branch js-comment_tree" data-id="8308225" data-parent_id="8308129" title="Показать ветку комментариев"><svg width="8" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#tree"></use></svg></span>
    </li>

    <li class="inline-list__item inline-list__item_comment-nav">
      <a href="#comment_8308129" class="icon_comment-arrow-up js-comment_parent" data-id="8308225" data-parent_id="8308129" title="Показать предыдущий комментарий"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
    </li>

  <li class="inline-list__item inline-list__item_comment-nav hidden js-comment_children">
    <a href="#comment_8308225" class="icon_comment-arrow-down js-comment_parent back_to_children" data-id="8308225" data-parent_id="8308129" title="Вернуться к ответу"><svg width="12" height="12"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#rounded-arrow"></use></svg></a>
  </li>
</ul>

            <div class="voting-wjt voting-wjt_comments js-comment-vote" data-id="8308225" data-post-target="216997" data-type="3">
    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="plus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-up" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>

    <span class="voting-wjt__counter voting-wjt__counter_positive  js-score" title="Общий рейтинг 1: ↑1 и ↓0">+1</span>

    <button type="button" class="btn voting-wjt__button voting-wjt__button_small " data-action="minus" onclick="comment_vote(this);" title="Голосовать могут только зарегистрированные пользователи" disabled="disabled"><svg class="icon-svg_arrow-down" width="10" height="16"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#vote-arrow"></use></svg></button>
  </div>

        </div>

        <div class="comment__message ">Нельзя просто так взять и подставить <code>null</code>
 в качестве прототипа конструктора. iframe имеет своё собственное 
окружение, включая стандартные конструкторы. Так что создаём iframe, 
удаляем из его <code>Object.prototype</code> все свойства и когда нам нужно создать объект (якобы) без прототипа — создаём инстанс <code>Object</code> из iframe. Получаем объект без свойств в прототипе и не являющийся инстансом <code>Object</code> текущего окружения. <a href="https://github.com/zloirock/core-js/blob/master/src/es5.js#L55-L73">Всегда можно посмотреть код на GitHub'е :)</a></div>

        <div class="comment__footer">
</div>

        <div class="comment__reply-form js-form_placeholder"></div>
    </div>

    <ul class="content-list content-list_nested-comments content-list_nested-comments-1" id="reply_comments_8308225"></ul>
  </li>
</ul>
  </li>

      
    </ul>
    <div class="js-form_placeholder">
              <p class="for_users_only_msg">Только&nbsp;<a href="https://habr.com/info/help/registration/">полноправные пользователи</a> могут оставлять комментарии. <a href="https://habr.com/auth/login/">Войдите</a>, пожалуйста.</p>

    </div>
  </div>


  </div>

  <div class="sidebar_right sidebar_comments js-sidebar_right" style="position: relative;">
        

  <div style="height: 604px; left: auto; right: auto; top: auto; bottom: auto; position: static; display: block; vertical-align: baseline; box-sizing: border-box; margin: 0px; padding-left: 0px; padding-right: 0px; float: none; width: 300px; z-index: -1;"></div><div class="js-ad_sticky_comments sticky" style="position: fixed; left: 924.5px; width: 300px; bottom: auto; top: 20px;">
    <div class="default-block">
      <div class="default-block__header">
        <span class="default-block__header-title">Что обсуждают</span>
      </div>

      <div class="default-block__content default-block__content_most-comments" id="broadcast_tabs_comments">
        <ul class="toggle-menu toggle-menu_most-comments">
          <li class="toggle-menu__item">
            <a href="#broadcast_comments_now" class="toggle-menu__item-link active">Сейчас</a>
          </li>
          <li class="toggle-menu__item">
            <a href="#broadcast_comments_yesterday" class="toggle-menu__item-link">Вчера</a>
          </li>
          <li class="toggle-menu__item">
            <a href="#broadcast_comments_week" class="toggle-menu__item-link">Неделя</a>
          </li>
        </ul>

          <div class="tabs__content" id="broadcast_comments_now" style="display: block;">
              <ul class="content-list content-list_most-comments">
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/post/417679/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'now'); }" class="post-info__title">Тяжкое наследие прошлого. Проблемы командной строки Windows</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">34,4k</span>
                    </span>
                    <a href="https://habr.com/post/417679/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">62</span>
                    </a>
                  </div>
                </li>
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/post/417655/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'now'); }" class="post-info__title">Справочная: госкорпорация «Роскосмос» и ее работа</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">10,2k</span>
                    </span>
                    <a href="https://habr.com/post/417655/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">59</span>
                    </a>
                  </div>
                </li>
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/post/416687/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'now'); }" class="post-info__title">СХД QSAN в качестве конкурента продукции брендам Tier 1</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">1,9k</span>
                    </span>
                    <a href="https://habr.com/post/416687/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">31</span>
                    </a>
                  </div>
                </li>
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/post/417717/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'now'); }" class="post-info__title">Какой была Земля, когда на ней было так же жарко, как нам обещают в 2100 году?</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">3,2k</span>
                    </span>
                    <a href="https://habr.com/post/417717/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">15</span>
                    </a>
                  </div>
                </li>
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/post/417745/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'now'); }" class="post-info__title">Личный опыт: Data Engineering на Upwork</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">7,4k</span>
                    </span>
                    <a href="https://habr.com/post/417745/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">38</span>
                    </a>
                  </div>
                </li>
            </ul>
        </div>
          <div class="tabs__content" id="broadcast_comments_yesterday" style="display: none;">
              <ul class="content-list content-list_most-comments">
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/post/417699/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'yesterday'); }" class="post-info__title">Western Digital закрывает ещё один завод по производству HDD из-за снижения спроса</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">25k</span>
                    </span>
                    <a href="https://habr.com/post/417699/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">141</span>
                    </a>
                  </div>
                </li>
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/post/417715/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'yesterday'); }" class="post-info__title">Прощай, Google Maps</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">63,7k</span>
                    </span>
                    <a href="https://habr.com/post/417715/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">108</span>
                    </a>
                  </div>
                </li>
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/post/417679/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'yesterday'); }" class="post-info__title">Тяжкое наследие прошлого. Проблемы командной строки Windows</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">34,4k</span>
                    </span>
                    <a href="https://habr.com/post/417679/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">62</span>
                    </a>
                  </div>
                </li>
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/post/417745/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'yesterday'); }" class="post-info__title">Личный опыт: Data Engineering на Upwork</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">7,4k</span>
                    </span>
                    <a href="https://habr.com/post/417745/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">38</span>
                    </a>
                  </div>
                </li>
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/post/416941/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'yesterday'); }" class="post-info__title">Теория счастья. Введение в мерфологию</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">4,4k</span>
                    </span>
                    <a href="https://habr.com/post/416941/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">33</span>
                    </a>
                  </div>
                </li>
            </ul>
        </div>
          <div class="tabs__content" id="broadcast_comments_week" style="display: none;">
              <ul class="content-list content-list_most-comments">
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/post/417227/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'week'); }" class="post-info__title">Что случилось с парадоксом Ферми</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">34,5k</span>
                    </span>
                    <a href="https://habr.com/post/417227/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">670</span>
                    </a>
                  </div>
                </li>
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/post/417431/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'week'); }" class="post-info__title">Антисобеседования</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">83,3k</span>
                    </span>
                    <a href="https://habr.com/post/417431/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">568</span>
                    </a>
                  </div>
                </li>
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/post/417543/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'week'); }" class="post-info__title">Студента китайского вуза чуть не отчислили из-за низкого «социального рейтинга» его отца</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">53,2k</span>
                    </span>
                    <a href="https://habr.com/post/417543/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">348</span>
                    </a>
                  </div>
                </li>
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/post/417161/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'week'); }" class="post-info__title">Burger King: тайная слежка, ложь, хищение банковских карт. Продолжение</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">53,5k</span>
                    </span>
                    <a href="https://habr.com/post/417161/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">326</span>
                    </a>
                  </div>
                </li>
                  <li class="content-list__item content-list__item_devided post-info">
                    <a href="https://habr.com/post/417229/" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'discussions', 'week'); }" class="post-info__title">Несколько причин забыть PascalABC.Net</a>

                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">9,1k</span>
                    </span>
                    <a href="https://habr.com/post/417229/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">311</span>
                    </a>
                  </div>
                </li>
            </ul>
        </div>
    </div>
  </div>

  </div>
</div></section>

<script>
  window._yaparams = {'hubs':[], 'flows':[] };
  // hubs to GA
  _yaparams['hubs'].push('webdev (Разработка веб-сайтов)');
  _yaparams['hubs'].push('nodejs (Node.JS)');
  _yaparams['hubs'].push('javascript (JavaScript)');
  _yaparams['flows'].push('develop (Разработка)');
</script>


        </div>
      </div>

        <div class="layout__row layout__row_promo-blocks">
          <div class="layout__cell">
            <section class="column-wrapper column-wrapper_bottom column-wrapper_bordered">
  <div class="content_left">
    

  <div class="default-block default-block_content">
    <div class="default-block__header default-block__header_large">
      <span class="default-block__header-title default-block__header-title_large">Самое читаемое</span>
    </div>
    <div class="default-block__content default-block__content_most-read" id="broadcast_tabs_posts">
      <ul class="toggle-menu toggle-menu__most-read">
        <li class="toggle-menu__item"><a href="#broadcast_posts_today" class="toggle-menu__item-link active">Сутки</a></li>
        <li class="toggle-menu__item"><a href="#broadcast_posts_week" class="toggle-menu__item-link">Неделя</a></li>
        <li class="toggle-menu__item"><a href="#broadcast_posts_month" class="toggle-menu__item-link">Месяц</a></li>
      </ul>

        <div class="tabs__content tabs__content_reading" id="broadcast_posts_today" style="display: block;">
            <ul class="content-list content-list_most-read">
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/post/417715/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'today'); }">Прощай, Google Maps</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+95</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">63,7k</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">84</span>
                    </span>
                    <a href="https://habr.com/post/417715/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">108</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/post/417679/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'today'); }">Тяжкое наследие прошлого. Проблемы командной строки Windows</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+89</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">34,4k</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">130</span>
                    </span>
                    <a href="https://habr.com/post/417679/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">62</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/company/whalesburg/blog/417705/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'today'); }">Как производитель видеокарты влияет на доходность GPU-майнинга</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+9</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">12,3k</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">17</span>
                    </span>
                    <a href="https://habr.com/company/whalesburg/blog/417705/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">24</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/post/417699/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'today'); }">Western Digital закрывает ещё один завод по производству HDD из-за снижения спроса</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+19</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">25k</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">18</span>
                    </span>
                    <a href="https://habr.com/post/417699/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">141</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/company/pult/blog/417743/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'today'); }">Легендарные усилители – историческая анатомия трендов: “холодный” транзисторный звук</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+12</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">7,4k</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">20</span>
                    </span>
                    <a href="https://habr.com/company/pult/blog/417743/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">13</span>
                    </a>
                  </div>
                </li>
            </ul>
        </div>
        <div class="tabs__content tabs__content_reading" id="broadcast_posts_week" style="display: none;">
            <ul class="content-list content-list_most-read">
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/post/417219/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'week'); }">Забудьте про Бургер Кинг! Есть утечка документов куда опаснее</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+84</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">106k</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">82</span>
                    </span>
                    <a href="https://habr.com/post/417219/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">235</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/post/417431/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'week'); }">Антисобеседования</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+191</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">83,3k</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">302</span>
                    </span>
                    <a href="https://habr.com/post/417431/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">568</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/post/417533/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'week'); }">Блокнот в Windows получил первое значимое обновление за два десятилетия</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+74</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">64,4k</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">27</span>
                    </span>
                    <a href="https://habr.com/post/417533/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">167</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/post/417715/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'week'); }">Прощай, Google Maps</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+95</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">63,7k</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">84</span>
                    </span>
                    <a href="https://habr.com/post/417715/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">108</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/post/417161/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'week'); }">Burger King: тайная слежка, ложь, хищение банковских карт. Продолжение</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+176</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">53,5k</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">55</span>
                    </span>
                    <a href="https://habr.com/post/417161/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">326</span>
                    </a>
                  </div>
                </li>
            </ul>
        </div>
        <div class="tabs__content tabs__content_reading" id="broadcast_posts_month" style="display: none;">
            <ul class="content-list content-list_most-read">
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/company/lamptest/blog/415613/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'month'); }">Почему не стоит покупать светодиодные люстры</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+112</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">202k</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">57</span>
                    </span>
                    <a href="https://habr.com/company/lamptest/blog/415613/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">250</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/post/416919/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'month'); }">Burger King и тайная запись экрана вашего телефона</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+177</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">134k</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">81</span>
                    </span>
                    <a href="https://habr.com/post/416919/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">470</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/post/417219/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'month'); }">Забудьте про Бургер Кинг! Есть утечка документов куда опаснее</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+84</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">106k</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">82</span>
                    </span>
                    <a href="https://habr.com/post/417219/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">235</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/post/416519/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'month'); }">Неужели в самом деле все ГЛОНАССы погорели?</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+131</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">104k</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">71</span>
                    </span>
                    <a href="https://habr.com/post/416519/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">301</span>
                    </a>
                  </div>
                </li>
                <li class="content-list__item content-list__item_devided post-info">
                  <a href="https://habr.com/post/417047/" class="post-info__title post-info__title_large" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'most_read', 'month'); }">Создатель Питона: я устал, я ухожу</a>
                  <div class="post-info__meta">
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_rating" width="11" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#arrow-bold"></use></svg><span class="post-info__meta-counter">+135</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_views" width="16" height="9"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#eye"></use></svg><span class="post-info__meta-counter">101k</span>
                    </span>
                    <span class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_bookmark-mini" width="8" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#book"></use></svg><span class="post-info__meta-counter">88</span>
                    </span>
                    <a href="https://habr.com/post/417047/#comments" class="post-info__meta-item">
                      <svg class="post-info__meta-icon icon-svg_comments" width="14" height="13"><use xlink:href="https://habr.com/images/1532088568/common-svg-sprite.svg#comment"></use></svg><span class="post-info__meta-counter">291</span>
                    </a>
                  </div>
                </li>
            </ul>
        </div>
    </div>
  </div>

  </div>
  <div class="sidebar_right">
    <div class="default-block">
  <div class="default-block__header">
    <div class="default-block__header-title">Мегапосты</div>
      <a href="https://tmtm.ru/megapost" class="default-block__header-link" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'megapost_promo', 'order'); }">Разместить</a>
  </div>
  <div class="default-block__content">
    <ul class="megapost-teasers megapost-teasers_sidebar">
        <li class="megapost-teasers__item megapost-teasers__item_sidebar teaser">
          <a href="https://u.tmtm.ru/9GoTT" class="teaser__image" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'megapost_promo', 'article_pic'); }">
            <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/478f02dcace08951b4e8b8eca5c6aaed.jpg" class="teaser__image-pic">
          </a>
          <div class="teaser__body">
            <a href="https://u.tmtm.ru/9GoTT" class="teaser__body-title" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'megapost_promo', 'article_title'); }">Вам Тройка: банковские технологии улучшают транспортную систему</a>
          </div>
        </li>
        <li class="megapost-teasers__item megapost-teasers__item_sidebar teaser">
          <a href="https://u.tmtm.ru/gAkOw" class="teaser__image" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'megapost_promo', 'article_pic'); }">
            <img src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/4e2487138f97c74c9119a8caa32a1b7f.jpg" class="teaser__image-pic">
          </a>
          <div class="teaser__body">
            <a href="https://u.tmtm.ru/gAkOw" class="teaser__body-title" onclick="if (typeof ga === 'function') { ga('send', 'event', 'tm_block', 'megapost_promo', 'article_title'); }">Выживший: монолог очередного страдальца с IT-форума №1</a>
          </div>
        </li>
    </ul>
  </div>
</div>

  </div>
</section>

          </div>
        </div>

      <div class="layout__row layout__row_footer-links">
        <div class="layout__cell">
          <div class="footer-grid footer-grid_menu">
  <div class="footer-grid__item footer-block">
    <h3 class="footer-block__title">
      Аккаунт
    </h3>
    <div class="footer-block__content">
      <ul class="footer-menu">
          <li class="footer-menu__item">
            <a href="https://habr.com/auth/login/" class="footer-menu__item-link">Войти</a>
          </li>
          <li class="footer-menu__item">
            <a href="https://habr.com/auth/register/" class="footer-menu__item-link">Регистрация</a>
          </li>
      </ul>
    </div>
  </div>

  <div class="footer-grid__item footer-block">
    <h3 class="footer-block__title">Разделы</h3>
    <div class="footer-block__content">
      <ul class="footer-menu">
        <li class="footer-menu__item">
          <a href="https://habr.com/posts/top/" class="footer-menu__item-link">Публикации</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://habr.com/hubs/" class="footer-menu__item-link">Хабы</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://habr.com/companies/" class="footer-menu__item-link">Компании</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://habr.com/users/" class="footer-menu__item-link">Пользователи</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://habr.com/sandbox/" class="footer-menu__item-link">Песочница</a>
        </li>
      </ul>
    </div>
  </div>

  <div class="footer-grid__item footer-block">
    <h3 class="footer-block__title">Информация</h3>
    <div class="footer-block__content">
      <ul class="footer-menu">
        <li class="footer-menu__item">
          <a href="https://habr.com/info/help/rules/" class="footer-menu__item-link">Правила</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://habr.com/info/help/" class="footer-menu__item-link">Помощь</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://habr.com/info/topics/madskillz/" class="footer-menu__item-link">Документация</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://id.tmtm.ru/info/agreement/" class="footer-menu__item-link">Соглашение</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://id.tmtm.ru/info/confidential/" class="footer-menu__item-link">Конфиденциальность</a>
        </li>
      </ul>
    </div>
  </div>

  <div class="footer-grid__item footer-block">
    <h3 class="footer-block__title">Услуги</h3>
    <div class="footer-block__content">
      <ul class="footer-menu">
        <li class="footer-menu__item">
          <a href="https://tmtm.ru/services/advertising/" target="_blank" class="footer-menu__item-link" rel=" noopener">Реклама</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://tmtm.ru/services/corpblog/" target="_blank" class="footer-menu__item-link" rel=" noopener">Тарифы</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://tmtm.ru/services/content/" target="_blank" class="footer-menu__item-link" rel=" noopener">Контент</a>
        </li>
        <li class="footer-menu__item">
          <a href="https://tmtm.ru/workshops/" target="_blank" class="footer-menu__item-link" rel=" noopener">Семинары</a>
        </li>
      </ul>
    </div>
  </div>

  <div class="footer-grid__item footer-grid__item_300 footer-block">
    <h3 class="footer-block__title">Приложения</h3>
    <div class="footer-block__content footer-block__content_apps">
      <a href="https://appmetrica.yandex.com/serve/240693928167260216?utm_source=HH_desktop&amp;utm_medium=button&amp;utm_campaign=appiOS" class="footer-menu__app" target="_blank" onclick="if (  typeof ga === 'function') { ga('send', 'event', 'footer', 'links', 'ios_app'); }" rel=" noopener"><svg class="icon-svg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="140" height="40" viewBox="0 0 140 40"><path fill="#fff" d="M0 0h140v40h-140z"></path><path d="M139.387 35.99c0 2.215-1.794 4.01-4.014 4.01h-131.354c-2.218 0-4.019-1.794-4.019-4.01v-31.975c0-2.214 1.801-4.015 4.019-4.015h131.353c2.22 0 4.014 1.801 4.014 4.015l.001 31.975z"></path><path fill="#fff" d="M30.609 19.78c-.03-3.374 2.763-5.016 2.89-5.092-1.582-2.306-4.034-2.621-4.895-2.647-2.059-.217-4.057 1.232-5.106 1.232-1.07 0-2.685-1.211-4.426-1.176-2.24.035-4.336 1.332-5.486 3.346-2.372 4.107-.603 10.142 1.67 13.462 1.137 1.626 2.465 3.441 4.204 3.377 1.701-.07 2.337-1.085 4.39-1.085 2.034 0 2.631 1.085 4.404 1.044 1.826-.029 2.975-1.633 4.072-3.274 1.314-1.863 1.841-3.699 1.862-3.793-.041-.013-3.544-1.35-3.579-5.394zM27.259 9.858c.915-1.144 1.541-2.701 1.367-4.281-1.324.059-2.981.916-3.934 2.035-.844.986-1.598 2.603-1.403 4.123 1.488.111 3.015-.751 3.97-1.877zM55.229 32.05h-2.378l-1.302-4.092h-4.527l-1.241 4.092h-2.315l4.485-13.932h2.77l4.508 13.932zm-4.072-5.809l-1.178-3.638c-.125-.372-.358-1.247-.702-2.625h-.042c-.137.593-.358 1.468-.662 2.625l-1.157 3.638h3.741zM66.763 26.903c0 1.709-.462 3.059-1.385 4.05-.827.883-1.854 1.323-3.08 1.323-1.323 0-2.274-.475-2.853-1.426h-.042v5.292h-2.232v-10.831c0-1.074-.028-2.177-.083-3.307h1.963l.125 1.592h.042c.744-1.2 1.874-1.799 3.39-1.799 1.185 0 2.174.468 2.966 1.405.793.938 1.189 2.172 1.189 3.701zm-2.274.082c0-.978-.22-1.784-.662-2.418-.483-.662-1.131-.992-1.943-.992-.551 0-1.051.184-1.498.548-.448.366-.741.845-.878 1.437-.069.276-.104.503-.104.68v1.675c0 .731.224 1.347.672 1.851s1.03.755 1.746.755c.841 0 1.495-.325 1.963-.972.47-.648.704-1.503.704-2.564zM78.318 26.903c0 1.709-.462 3.059-1.386 4.05-.826.883-1.853 1.323-3.079 1.323-1.323 0-2.274-.475-2.852-1.426h-.042v5.292h-2.232v-10.831c0-1.074-.028-2.177-.083-3.307h1.963l.125 1.592h.042c.743-1.2 1.873-1.799 3.39-1.799 1.184 0 2.173.468 2.967 1.405.79.938 1.187 2.172 1.187 3.701zm-2.274.082c0-.978-.221-1.784-.663-2.418-.483-.662-1.129-.992-1.942-.992-.552 0-1.051.184-1.499.548-.448.366-.74.845-.877 1.437-.068.276-.104.503-.104.68v1.675c0 .731.224 1.347.67 1.851.448.503 1.03.755 1.748.755.841 0 1.495-.325 1.963-.972.469-.648.704-1.503.704-2.564zM91.236 28.143c0 1.185-.411 2.149-1.237 2.894-.908.813-2.171 1.22-3.795 1.22-1.499 0-2.701-.289-3.611-.868l.517-1.86c.98.593 2.055.89 3.227.89.841 0 1.495-.191 1.965-.57.468-.379.701-.888.701-1.522 0-.565-.193-1.042-.579-1.428-.384-.386-1.026-.745-1.922-1.077-2.439-.91-3.658-2.242-3.658-3.995 0-1.145.427-2.084 1.282-2.815.852-.732 1.989-1.097 3.411-1.097 1.268 0 2.321.221 3.162.662l-.558 1.82c-.785-.427-1.673-.641-2.666-.641-.785 0-1.399.194-1.838.579-.372.344-.558.764-.558 1.262 0 .551.213 1.006.64 1.364.372.331 1.047.689 2.027 1.075 1.199.483 2.079 1.047 2.646 1.694.563.642.844 1.45.844 2.413zM98.616 23.679h-2.46v4.878c0 1.241.433 1.86 1.302 1.86.399 0 .73-.035.991-.104l.062 1.695c-.44.164-1.019.247-1.736.247-.881 0-1.57-.269-2.068-.806-.495-.538-.744-1.441-.744-2.708v-5.064h-1.466v-1.675h1.466v-1.839l2.192-.662v2.501h2.46l.001 1.677zM109.716 26.944c0 1.544-.442 2.812-1.323 3.803-.924 1.021-2.151 1.53-3.681 1.53-1.474 0-2.648-.489-3.523-1.467s-1.313-2.212-1.313-3.7c0-1.557.45-2.832 1.354-3.823.901-.992 2.118-1.489 3.647-1.489 1.474 0 2.66.489 3.555 1.468.857.95 1.284 2.176 1.284 3.678zm-2.315.072c0-.927-.198-1.721-.599-2.384-.468-.802-1.137-1.202-2.004-1.202-.897 0-1.579.401-2.047 1.202-.401.664-.599 1.471-.599 2.426 0 .927.198 1.721.599 2.383.483.802 1.157 1.202 2.027 1.202.852 0 1.521-.408 2.004-1.223.411-.675.619-1.478.619-2.404zM116.971 23.967c-.221-.041-.456-.062-.704-.062-.785 0-1.392.296-1.82.89-.372.523-.558 1.185-.558 1.984v5.271h-2.231l.021-6.882c0-1.158-.028-2.212-.084-3.163h1.944l.082 1.922h.062c.236-.661.607-1.192 1.116-1.591.497-.359 1.034-.538 1.613-.538.206 0 .393.015.558.041l.001 2.128zM126.954 26.552c0 .4-.026.737-.082 1.012h-6.696c.026.992.35 1.751.972 2.275.564.468 1.294.702 2.19.702.991 0 1.896-.158 2.709-.475l.35 1.549c-.951.415-2.073.621-3.368.621-1.558 0-2.781-.459-3.67-1.375s-1.333-2.146-1.333-3.689c0-1.515.414-2.776 1.242-3.782.867-1.074 2.038-1.611 3.512-1.611 1.448 0 2.544.537 3.288 1.611.589.853.886 1.908.886 3.162zm-2.129-.579c.015-.662-.131-1.233-.433-1.716-.386-.621-.98-.931-1.779-.931-.73 0-1.323.303-1.777.91-.372.483-.593 1.062-.661 1.736l4.649.001zM44.529 6.682c.238-.142.506-.262.807-.36s.654-.148 1.062-.148c.656 0 1.174.156 1.553.467s.568.731.568 1.259c0 .42-.127.772-.38 1.056s-.578.474-.97.568v.03c.217.035.422.093.615.178s.363.198.508.34c.146.142.261.308.345.498.084.189.127.399.127.63 0 .379-.076.697-.229.955s-.352.467-.599.63c-.246.162-.522.28-.827.35s-.609.107-.914.107c-.326 0-.647-.035-.965-.102s-.612-.179-.884-.335l.274-.843c.176.088.403.173.68.254.277.082.558.121.843.121.467 0 .828-.105 1.081-.314.253-.21.381-.491.381-.843 0-.238-.051-.431-.153-.584-.103-.153-.235-.272-.397-.361-.162-.088-.343-.149-.543-.182s-.398-.051-.594-.051h-.457v-.831h.457c.209 0 .404-.026.584-.082.179-.053.335-.13.467-.228s.236-.216.31-.351c.073-.135.111-.288.111-.457 0-.305-.109-.543-.326-.716s-.508-.26-.873-.26c-.25 0-.501.041-.752.121-.25.082-.474.17-.671.264l-.239-.78zM53.251 13.131l-.081-.568h-.03c-.331.453-.811.68-1.442.68-.224 0-.426-.038-.609-.112s-.342-.176-.477-.305c-.136-.129-.24-.281-.315-.457-.074-.176-.111-.37-.111-.579 0-.616.25-1.078.752-1.386s1.211-.462 2.133-.462v-.091c0-.65-.341-.975-1.024-.975-.487 0-.916.122-1.287.365l-.223-.72c.453-.284 1.018-.426 1.693-.426 1.291 0 1.937.68 1.937 2.041v1.817c0 .508.024.9.071 1.178h-.986zm-.152-2.457c-.612 0-1.069.077-1.368.233s-.449.41-.449.762c0 .258.07.45.211.579s.32.193.536.193c.141 0 .275-.025.404-.076.128-.05.24-.12.337-.208.098-.088.177-.195.239-.32.061-.126.09-.259.09-.401v-.762zM59.457 8.196v.904h-2.052v4.032h-1.096v-4.936h3.148zM65.732 10.603c0 .393-.054.752-.162 1.076-.109.326-.259.603-.452.832-.193.23-.423.41-.69.538-.268.129-.563.194-.889.194-.65 0-1.117-.233-1.402-.7h-.021v2.599h-1.097v-5.321l-.01-.798-.029-.828h.964l.062.782h.021c.365-.588.92-.884 1.666-.884.29 0 .56.061.807.182.247.122.462.293.645.513s.327.484.431.793c.103.309.156.649.156 1.022zm-1.116.041c0-.244-.029-.469-.087-.675s-.142-.382-.253-.528-.247-.261-.406-.345c-.159-.085-.337-.127-.534-.127-.155 0-.308.035-.457.102-.15.067-.28.159-.39.274-.112.115-.201.254-.269.417s-.103.335-.103.518v.823c0 .182.028.352.087.508s.138.291.243.406.23.205.376.269c.146.065.306.096.482.096.414 0 .735-.157.965-.472.229-.316.346-.739.346-1.266zM71.624 8.196l-1.25 3.422c-.297.812-.587 1.477-.868 1.995s-.55.895-.807 1.133c-.379.338-.782.545-1.209.619l-.264-.923c.284-.074.555-.22.812-.437s.463-.487.62-.812l.081-.223-.061-.233-1.788-4.54h1.208l.935 2.752.142.437.153.538h.021l.111-.411.162-.574.833-2.742 1.168-.001zM73.523 10.247h.507c.372 0 .661-.067.863-.203s.305-.302.305-.498c0-.203-.086-.365-.26-.487-.172-.121-.411-.183-.716-.183-.197 0-.395.032-.593.096-.2.065-.384.144-.554.239l-.284-.71c.284-.155.566-.262.849-.319.281-.058.562-.087.847-.087.225 0 .45.022.676.066.225.044.427.118.603.223s.321.242.431.411c.112.17.168.379.168.63 0 .156-.03.293-.092.411-.06.118-.141.223-.243.314s-.215.166-.339.223c-.125.058-.253.101-.38.128v.03c.161.021.319.062.472.122.152.061.288.14.411.239.12.098.219.217.294.355.073.139.11.296.11.472 0 .291-.069.535-.213.731-.141.197-.323.352-.544.467-.219.115-.462.198-.726.249s-.521.076-.771.076c-.305 0-.607-.032-.903-.096-.298-.065-.566-.164-.804-.299l.286-.721c.176.095.376.175.603.239s.459.096.695.096c.372 0 .659-.072.858-.218.198-.146.298-.327.298-.543 0-.142-.032-.262-.101-.36-.068-.098-.163-.178-.284-.239-.122-.061-.264-.104-.427-.127-.161-.024-.339-.036-.528-.036h-.517v-.691zM79.381 8.196v1.746c0 .4-.006.759-.021 1.076l-.051 1.005.021.02.38-.757.382-.757 1.219-2.336h1.421v4.935h-1.036v-1.746c0-.365.01-.731.026-1.096l.055-1.108h-.051c-.114.305-.229.568-.345.793l-.343.691-.626 1.219c-.206.406-.425.823-.654 1.249h-1.421v-4.934h1.044zM88.521 8.196v.904h-1.502v4.032h-1.079v-4.032h-1.493v-.904h4.074zM94.115 10.43l-.01.269-.03.228h-3.29c.015.467.161.828.442 1.081s.652.381 1.112.381c.481 0 .924-.077 1.331-.233l.172.762c-.468.203-1.019.305-1.656.305-.384 0-.73-.06-1.034-.178-.305-.118-.562-.286-.773-.503-.208-.217-.371-.477-.483-.782-.11-.305-.165-.646-.165-1.025s.055-.73.165-1.051c.112-.321.27-.601.472-.838.204-.238.45-.423.736-.559.288-.135.609-.203.961-.203.311 0 .593.055.849.168.253.111.47.27.648.477.18.206.317.454.411.741s.142.609.142.96zm-1.047-.283c0-.386-.092-.699-.278-.939s-.455-.361-.807-.361c-.319 0-.588.121-.811.365s-.352.555-.386.935h2.282zM98.534 8.237c.197-.033.446-.061.751-.082s.616-.03.935-.03c.202 0 .431.013.685.036s.497.077.726.162c.231.085.423.211.579.381s.236.399.236.69c0 .15-.028.284-.082.401-.055.118-.127.222-.219.31s-.197.161-.315.218c-.118.058-.241.101-.371.127l.01.03c.358.061.65.189.873.386s.335.467.335.812c0 .345-.096.62-.284.823-.191.203-.423.356-.701.457s-.571.166-.879.194c-.307.026-.583.041-.826.041-.272 0-.538-.006-.798-.021l-.654-.041v-4.894zm1.056 1.97h.558c.17 0 .331-.012.483-.036.153-.023.286-.061.401-.111.116-.051.204-.118.27-.203.064-.085.096-.187.096-.31 0-.223-.092-.387-.281-.492-.186-.105-.478-.157-.877-.157l-.3.01-.35.03v1.269zm0 2.183l.339.03.321.01c.15 0 .3-.009.456-.03.155-.02.298-.059.427-.116s.231-.134.309-.232c.077-.097.118-.227.118-.388 0-.283-.127-.477-.376-.585-.251-.108-.588-.161-1.017-.161h-.577v1.472z"></path></svg></a>

      <a href="https://appmetrica.yandex.com/serve/745097116363323173?id=ru.habrahabr&amp;utm_source=HH_desktop&amp;utm_medium=button&amp;utm_campaign=appAndroid" class="footer-menu__app" target="_blank" onclick="if (typeof ga === 'function') { ga('send', 'event', 'footer', 'links', 'android_app'); }" rel=" noopener"><svg class="icon-svg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="135" height="40" viewBox="0 0 135 40"><path d="M130 40h-125c-2.75 0-5-2.25-5-5v-30c0-2.75 2.25-5 5-5h125c2.75 0 5 2.25 5 5v30c0 2.75-2.25 5-5 5z"></path><path fill="#fff" d="M68.136 21.752c-2.352 0-4.269 1.788-4.269 4.253 0 2.449 1.917 4.253 4.269 4.253 2.352 0 4.269-1.804 4.269-4.253 0-2.465-1.917-4.253-4.269-4.253zm0 6.83c-1.289 0-2.401-1.063-2.401-2.578 0-1.531 1.112-2.578 2.401-2.578 1.289 0 2.4 1.047 2.4 2.578 0 1.515-1.111 2.578-2.4 2.578zm-9.314-6.83c-2.352 0-4.269 1.788-4.269 4.253 0 2.449 1.917 4.253 4.269 4.253 2.352 0 4.269-1.804 4.269-4.253.001-2.465-1.916-4.253-4.269-4.253zm0 6.83c-1.289 0-2.4-1.063-2.4-2.578 0-1.531 1.112-2.578 2.4-2.578 1.289 0 2.4 1.047 2.4 2.578.001 1.515-1.111 2.578-2.4 2.578zm-11.078-5.525v1.804h4.318c-.129 1.015-.467 1.756-.983 2.272-.628.628-1.611 1.321-3.335 1.321-2.658 0-4.736-2.143-4.736-4.801s2.078-4.801 4.736-4.801c1.434 0 2.481.564 3.254 1.289l1.273-1.273c-1.079-1.031-2.513-1.82-4.527-1.82-3.641 0-6.702 2.964-6.702 6.605 0 3.641 3.061 6.605 6.702 6.605 1.966 0 3.448-.644 4.608-1.853 1.192-1.192 1.563-2.868 1.563-4.221 0-.419-.032-.806-.097-1.128h-6.074zm45.308 1.401c-.354-.95-1.434-2.706-3.641-2.706-2.191 0-4.011 1.724-4.011 4.253 0 2.384 1.804 4.253 4.221 4.253 1.949 0 3.077-1.192 3.544-1.885l-1.45-.967c-.483.709-1.144 1.176-2.094 1.176-.951 0-1.627-.435-2.062-1.289l5.687-2.352-.194-.483zm-5.8 1.418c-.048-1.643 1.273-2.481 2.223-2.481.741 0 1.369.371 1.579.902l-3.802 1.579zm-4.623 4.124h1.869v-12.501h-1.869v12.501zm-3.062-7.298h-.064c-.419-.499-1.224-.951-2.239-.951-2.127 0-4.076 1.869-4.076 4.269 0 2.384 1.949 4.237 4.076 4.237 1.015 0 1.82-.451 2.239-.967h.064v.612c0 1.627-.87 2.497-2.272 2.497-1.144 0-1.853-.822-2.143-1.514l-1.627.677c.467 1.128 1.708 2.513 3.77 2.513 2.191 0 4.044-1.289 4.044-4.43v-7.636h-1.772v.693zm-2.142 5.88c-1.289 0-2.368-1.079-2.368-2.562 0-1.498 1.079-2.594 2.368-2.594 1.273 0 2.272 1.096 2.272 2.594-.001 1.483-.999 2.562-2.272 2.562zm24.381-11.083h-4.471v12.501h1.865v-4.736h2.606c2.068 0 4.101-1.497 4.101-3.882s-2.033-3.883-4.101-3.883zm.048 6.025h-2.654v-4.285h2.654c1.395 0 2.187 1.155 2.187 2.143 0 .968-.792 2.142-2.187 2.142zm11.532-1.795c-1.351 0-2.75.595-3.329 1.914l1.657.692c.354-.692 1.013-.917 1.705-.917.965 0 1.946.579 1.962 1.608v.129c-.338-.193-1.062-.483-1.946-.483-1.785 0-3.603.981-3.603 2.815 0 1.673 1.464 2.75 3.104 2.75 1.255 0 1.946-.563 2.38-1.222h.064v.965h1.801v-4.793c0-2.22-1.656-3.458-3.795-3.458zm-.225 6.851c-.611 0-1.464-.306-1.464-1.062 0-.965 1.062-1.335 1.978-1.335.82 0 1.206.177 1.705.418-.145 1.159-1.142 1.979-2.219 1.979zm10.582-6.578l-2.139 5.42h-.064l-2.219-5.42h-2.01l3.329 7.575-1.898 4.214h1.946l5.131-11.789h-2.076zm-16.807 7.998h1.866v-12.501h-1.866v12.501z"></path><linearGradient id="a" gradientUnits="userSpaceOnUse" x1="21.8" y1="33.29" x2="5.017" y2="16.508" gradientTransform="matrix(1 0 0 -1 0 42)"><stop offset="0" stop-color="#00A0FF"></stop><stop offset=".007" stop-color="#00A1FF"></stop><stop offset=".26" stop-color="#00BEFF"></stop><stop offset=".512" stop-color="#00D2FF"></stop><stop offset=".76" stop-color="#00DFFF"></stop><stop offset="1" stop-color="#00E3FF"></stop></linearGradient><path fill="url(#a)" d="M10.435 7.538c-.291.308-.463.786-.463 1.405v22.116c0 .62.172 1.097.463 1.405l.074.072 12.389-12.389v-.292l-12.389-12.39-.074.073z"></path><linearGradient id="b" gradientUnits="userSpaceOnUse" x1="33.834" y1="21.999" x2="9.637" y2="21.999" gradientTransform="matrix(1 0 0 -1 0 42)"><stop offset="0" stop-color="#FFE000"></stop><stop offset=".409" stop-color="#FFBD00"></stop><stop offset=".775" stop-color="#FFA500"></stop><stop offset="1" stop-color="#FF9C00"></stop></linearGradient><path fill="url(#b)" d="M27.028 24.278l-4.129-4.131v-.292l4.13-4.13.093.053 4.893 2.78c1.398.794 1.398 2.093 0 2.888l-4.893 2.78-.094.052z"></path><linearGradient id="c" gradientUnits="userSpaceOnUse" x1="24.827" y1="19.704" x2="2.069" y2="-3.054" gradientTransform="matrix(1 0 0 -1 0 42)"><stop offset="0" stop-color="#FF3A44"></stop><stop offset="1" stop-color="#C31162"></stop></linearGradient><path fill="url(#c)" d="M27.122 24.225l-4.224-4.224-12.463 12.463c.461.488 1.221.548 2.078.061l14.609-8.3"></path><linearGradient id="d" gradientUnits="userSpaceOnUse" x1="7.297" y1="41.824" x2="17.46" y2="31.661" gradientTransform="matrix(1 0 0 -1 0 42)"><stop offset="0" stop-color="#32A071"></stop><stop offset=".069" stop-color="#2DA771"></stop><stop offset=".476" stop-color="#15CF74"></stop><stop offset=".801" stop-color="#06E775"></stop><stop offset="1" stop-color="#00F076"></stop></linearGradient><path fill="url(#d)" d="M27.122 15.777l-14.608-8.3c-.857-.487-1.617-.426-2.078.061l12.463 12.463 4.223-4.224z"></path><path opacity=".2" enable-background="new" d="M27.029 24.132l-14.515 8.247c-.812.461-1.538.431-2.004.011l-.075.075.074.072c.466.42 1.192.451 2.004-.011l14.608-8.3-.092-.094z"></path><path opacity=".12" enable-background="new" d="M10.435 32.318c-.291-.308-.463-.786-.463-1.405v.146c0 .619.172 1.097.463 1.405l.075-.075-.075-.071zM32.015 21.299l-4.986 2.833.093.093 4.893-2.78c.699-.397 1.048-.92 1.048-1.443-.059.473-.415.937-1.048 1.297z"></path><path opacity=".25" fill="#fff" enable-background="new" d="M12.514 7.623l19.501 11.08c.634.36.989.824 1.048 1.298 0-.523-.349-1.047-1.048-1.444l-19.501-11.08c-1.398-.794-2.541-.135-2.541 1.466v.147c0-1.601 1.143-2.261 2.541-1.467z"></path><g fill="#fff" stroke="#fff" stroke-width=".2" stroke-miterlimit="10"><path d="M42.114 14.273h-.737v-2.011h.587c.519-.447.773-1.212.763-2.296v-2.966h4.006v5.263h.67v2.011h-.737v-1.274h-4.551v1.273zm1.383-4.306c.012.949-.179 1.715-.569 2.296h3.033v-4.526h-2.464v2.23zM53.415 12.225c-.59.607-1.323.909-2.2.909-.877 0-1.61-.303-2.199-.909-.59-.606-.884-1.348-.884-2.225s.294-1.619.884-2.225c.589-.607 1.322-.91 2.199-.91.872 0 1.604.305 2.196.914.592.609.888 1.349.888 2.221-.001.877-.296 1.619-.884 2.225zm-3.831-.503c.444.45.987.674 1.63.674.642 0 1.187-.225 1.63-.674.444-.45.667-1.024.667-1.722s-.223-1.273-.667-1.722c-.443-.45-.987-.674-1.63-.674-.643 0-1.186.225-1.63.674-.443.45-.666 1.024-.666 1.722s.223 1.273.666 1.722zM58.179 13.134c-.883 0-1.623-.299-2.221-.896-.598-.598-.896-1.344-.896-2.238s.298-1.64.896-2.237c.598-.598 1.338-.897 2.221-.897.904 0 1.64.327 2.204.981l-.537.52c-.407-.509-.964-.763-1.667-.763-.654 0-1.206.221-1.655.662-.45.441-.675 1.02-.675 1.734s.225 1.293.675 1.734c.449.441 1.001.662 1.655.662.721 0 1.335-.29 1.844-.871l.536.536c-.274.33-.617.591-1.031.783-.413.194-.863.29-1.349.29zM63.677 13h-.771v-5.263h-1.676v-.737h4.123v.737h-1.676v5.263zM70.646 7l-2.271 5.061c-.313.715-.779 1.072-1.399 1.072-.185 0-.383-.044-.596-.134l.201-.712c.129.073.263.109.402.109.179 0 .317-.035.415-.104.098-.07.188-.197.272-.381l.218-.478-2.017-4.433h.905l1.483 3.444h.033l1.449-3.444h.905zM71.52 13v-6h4.341v6h-.771v-5.263h-2.8v5.263h-.77zM77.234 13v-6h.771v2.572h3v-2.572h.771v6h-.771v-2.707h-3v2.707h-.771zM88.058 12.225c-.59.607-1.323.909-2.2.909-.877 0-1.61-.303-2.199-.909-.59-.606-.884-1.348-.884-2.225s.294-1.619.884-2.225c.589-.607 1.322-.91 2.199-.91.872 0 1.604.305 2.196.914.592.609.888 1.349.888 2.221-.001.877-.296 1.619-.884 2.225zm-3.83-.503c.444.45.987.674 1.63.674s1.187-.225 1.63-.674c.444-.45.667-1.024.667-1.722s-.223-1.273-.667-1.722c-.443-.45-.987-.674-1.63-.674s-1.186.225-1.63.674c-.443.45-.666 1.024-.666 1.722s.222 1.273.666 1.722zM92.094 13v-6h2.17c.47 0 .876.155 1.22.465.344.311.516.7.516 1.169 0 .285-.074.537-.223.754-.147.218-.345.383-.591.495v.033c.296.101.539.274.729.519.189.246.285.531.285.855 0 .492-.181.899-.541 1.223-.36.325-.786.487-1.278.487h-2.287zm.77-3.428h1.399c.291 0 .524-.096.7-.289.176-.192.264-.403.264-.632s-.085-.439-.256-.628c-.17-.19-.395-.285-.674-.285h-1.434v1.834zm0 2.691h1.551c.296 0 .536-.104.721-.311.185-.206.276-.433.276-.679 0-.246-.095-.47-.285-.674-.189-.204-.438-.306-.746-.306h-1.517v1.97z"></path></g></svg></a>
    </div>
  </div>
</div>

        </div>
      </div>

      <div class="layout__row layout__row_footer">
        <div class="layout__cell">
          <div class="footer-grid footer">
  <div class="footer-grid__item footer-grid__item_copyright">
    <span class="footer__logo"><svg class="icon-svg icon-svg_tmtm" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="32" height="32" viewBox="0 0 32 32"><path fill="#b12b51" d="M0 0v32h23.637l4.175-4.189-4.175 4.175v-8.358h8.358l-4.184 4.184 4.189-4.184v-23.628h-32zm14.653 14.148h-2.088v5.127h-2.106v-5.127h-2.089v-1.423h6.282v1.423zm8.977 1.852v3.275h-2.048v-4.065l-1.487 2.683h-.922l-1.487-2.683v4.065h-1.989v-6.55h2.28l1.686 2.975 1.686-2.975h2.281v3.275z"></path><path fill="#fff" d="M8.37 14.148h2.088v5.127h2.106v-5.127h2.089v-1.423h-6.283zM22.264 12.725h-.915l-1.686 2.975-1.686-2.975h-2.28v6.55h1.989v-4.065l1.487 2.683h.922l1.487-2.683v4.065h2.048v-6.55h-.649z"></path><path fill="#dc82a0" d="M23.637 23.628v8.358l8.358-8.358z"></path></svg></span>
    <span class="footer__copyright">© 2006 – 2018 «<a href="https://tmtm.ru/" class="footer__link">TM</a>»</span>
  </div>
  <div class="footer-grid__item footer-grid__item_link">
      <a href="https://habr.com/info/about/" class="footer__link">О сайте</a>
  </div>
  <div class="footer-grid__item footer-grid__item_link">
    <a href="https://habr.com/feedback/" class="footer__link">Служба поддержки</a>
  </div>
  <div class="footer-grid__item footer-grid__item_link">
      <a href="https://m.habr.com/post/216997/?mobile=yes" class="footer__link">Мобильная версия</a>
  </div>

  <div class="footer-grid__item footer-grid__item_social">
    <ul class="social-icons">
      <li class="social-icons__item">
        <a href="https://twitter.com/habr_com" class="social-icons__item-link social-icons__item-link_normal social-icons__item-link_twitter" target="_blank" onclick="if (typeof ga === 'function') { ga('send', 'event', 'footer', 'Social_icons', 'twitter'); }" rel=" noopener">
          <svg class="icon-svg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="24" height="24" viewBox="0 0 24 24"><path d="M17.414 8.642c-.398.177-.826.296-1.276.35.459-.275.811-.71.977-1.229-.43.254-.905.439-1.41.539-.405-.432-.982-.702-1.621-.702-1.227 0-2.222.994-2.222 2.222 0 .174.019.344.058.506-1.846-.093-3.484-.978-4.579-2.322-.191.328-.301.71-.301 1.117 0 .77.392 1.45.988 1.849-.363-.011-.706-.111-1.006-.278v.028c0 1.077.766 1.974 1.782 2.178-.187.051-.383.078-.586.078-.143 0-.282-.014-.418-.04.282.882 1.103 1.525 2.075 1.542-.76.596-1.718.951-2.759.951-.179 0-.356-.01-.53-.031.983.63 2.15.998 3.406.998 4.086 0 6.321-3.386 6.321-6.321l-.006-.287c.433-.314.81-.705 1.107-1.15z"></path></svg>
        </a>
      </li>
      <li class="social-icons__item">
        <a href="https://www.facebook.com/habrahabr.ru" class="social-icons__item-link social-icons__item-link_normal social-icons__item-link_facebook" target="_blank" onclick="if (typeof ga === 'function') { ga('send', 'event', 'footer', 'Social_icons', 'facebook'); }" rel=" noopener">
          <svg class="icon-svg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="24" height="24" viewBox="0 0 24 24"><path d="M14.889 8.608h-1.65c-.195 0-.413.257-.413.6v1.192h2.063v1.698h-2.063v5.102h-1.948v-5.102h-1.766v-1.698h1.766v-1c0-1.434.995-2.6 2.361-2.6h1.65v1.808z"></path></svg>
        </a>
      </li>
      <li class="social-icons__item">
        <a href="https://vk.com/habr" class="social-icons__item-link social-icons__item-link_normal social-icons__item-link_vkontakte" target="_blank" onclick="if (typeof ga === 'function') { ga('send', 'event', 'footer', 'Social_icons', 'vkontakte'); }" rel=" noopener">
          <svg class="icon-svg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="24" height="24" viewBox="0 0 24 24"><path d="M16.066 11.93s1.62-2.286 1.782-3.037c.054-.268-.064-.418-.343-.418h-1.406c-.322 0-.44.139-.537.343 0 0-.76 1.619-1.685 2.64-.297.33-.448.429-.612.429-.132 0-.193-.11-.193-.408v-2.607c0-.365-.043-.472-.343-.472h-2.254c-.172 0-.279.1-.279.236 0 .343.526.421.526 1.352v1.921c0 .386-.022.537-.204.537-.483 0-1.631-1.663-2.274-3.552-.129-.386-.268-.494-.633-.494h-1.406c-.204 0-.354.139-.354.343 0 .375.44 2.114 2.167 4.442 1.159 1.566 2.683 2.414 4.056 2.414.838 0 1.041-.139 1.041-.494v-1.202c0-.301.118-.429.29-.429.193 0 .534.062 1.33.848.945.901 1.01 1.276 1.525 1.276h1.578c.161 0 .311-.075.311-.343 0-.354-.462-.987-1.17-1.738-.29-.386-.762-.805-.912-.998-.215-.226-.151-.354-.001-.59z"></path></svg>
        </a>
      </li>
      <li class="social-icons__item">
        <a href="https://telegram.me/habr_com" class="social-icons__item-link social-icons__item-link_normal social-icons__item-link_telegram" target="_blank" onclick="if (typeof ga === 'function') { ga('send', 'event', 'footer', 'Social_icons', 'telegram'); }" rel=" noopener">
          <svg class="icon-svg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="24" height="24" viewBox="0 0 24 24"><path d="M17.17 7.621l-10.498 3.699c-.169.059-.206.205-.006.286l2.257.904 1.338.536 6.531-4.796s.189.057.125.126l-4.68 5.062-.27.299.356.192 2.962 1.594c.173.093.397.016.447-.199.058-.254 1.691-7.29 1.728-7.447.047-.204-.087-.328-.291-.256zm-6.922 8.637c0 .147.082.188.197.084l1.694-1.522-1.891-.978v2.416z"></path></svg>
        </a>
      </li>
      <li class="social-icons__item">
        <a href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" class="social-icons__item-link social-icons__item-link_normal social-icons__item-link_youtube" target="_blank" onclick="if (typeof ga === 'function') { ga('send', 'event', 'footer', 'Social_icons', 'youtube'); }" rel=" noopener">
          <svg class="icon-svg" aria-hidden="true" aria-labelledby="title" version="1.1" role="img" width="32" height="32" viewBox="0 0 32 32"><path d="M3.2 0h25.6c1.767 0 3.2 1.433 3.2 3.2v25.6c0 1.767-1.433 3.2-3.2 3.2h-25.6c-1.767 0-3.2-1.433-3.2-3.2v-25.6c0-1.767 1.433-3.2 3.2-3.2zm18.133 16l-10.667-5.333v10.667l10.667-5.333z"></path></svg>

        </a>
      </li>
    </ul>
  </div>
</div>

        </div>
      </div>

      <a href="#" class="layout__elevator" id="scroll_to_top" title="Наверх" onclick="if (typeof ga === 'function') { ga('send', 'event', 'navigation_button', 'down'); }">
        <svg class="icon-svg icon-svg_scroll-up" width="32" height="32" viewBox="0 0 32 32" aria-hidden="true" version="1.1" role="img"><path d="M16 0C7.164 0 0 7.164 0 16s7.164 16 16 16 16-7.164 16-16S24.836 0 16 0zm8.412 19.523c-.517.512-1.355.512-1.872 0L16 13.516l-6.54 6.01c-.518.51-1.356.51-1.873 0-.516-.513-.517-1.343 0-1.855l7.476-7.326c.517-.512 1.356-.512 1.873 0l7.476 7.327c.516.513.516 1.342 0 1.854z"></path></svg>
      </a>
    </div>


    <script type="text/javascript">
  // global vars
  var g_base_url = 'habr.com';
  var g_base_fullurl = 'https://habr.com/';
  var g_tmid_fullurl = 'https://id.tmtm.ru/';
  var g_is_guest = false;
  var g_show_xpanel = false;
  var g_is_enableShortcuts = '1'

</script>

    <script src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/vendors.js"></script>
    <script src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/main.js"></script>
      <script type="text/x-mathjax-config;executed=true">
  MathJax.Hub.Config({
    showProcessingMessages: false,
    showMathMenu: true,
    tex2jax: {
      inlineMath: [['$inline$','$inline$']],
      displayMath: [['$$display$$','$$display$$']],
      processEscapes: true
    },
    MathMenu: {
      showRenderer: true,
      showContext:  true
    }
  });

  MathJax.Extension.Img2jax = {
    PreProcess: function (element) {
      var hasMath = false;
      var images = element.querySelectorAll('[data-tex]');
      for (var i = images.length - 1; i >= 0; i--) {
        var img = images[i];
        var tex = img.alt.replace(/(\r\n|\n|\r)/gm, " ");
        if (tex && tex[0] === '$'){
          var script = document.createElement("script"); script.type = "math/tex";
          hasMath = true;
          if (img.getAttribute('data-tex') == "display"){script.type += ";mode=display"}
          MathJax.HTML.setScript(script, tex.substring(1,tex.length-1));
          img.parentNode.replaceChild(script,img);
        }
      }
    }
  };

  MathJax.Hub.Register.PreProcessor(["PreProcess", MathJax.Extension.Img2jax]);
</script>

<script type="text/javascript" src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/MathJax.js">
</script>

  <script type="text/javascript" src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/highlight.js"></script>


      <script src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/check-login.js"></script>

      <script type="text/javascript" src="%D0%A0%D0%B0%D0%B7%D0%BC%D1%8B%D1%88%D0%BB%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%BE%20%D1%81%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D0%BE%D0%B9%20%D0%B1%D0%B8%D0%B1%D0%BB%D0%B8%D0%BE%D1%82%D0%B5%D0%BA%D0%B5%20JavaScript.%20Core.js%20_%20%D0%A5%D0%B0%D0%B1%D1%80_files/a_003"></script>

    
<!-- Yandex.Metrika counter -->
<script type="text/javascript">
(function (d, w, c) {
    (w[c] = w[c] || []).push(function() {
        try {
            if (typeof (_yaparams) != 'undefined') {
                w.yaCounter24049213 = new Ya.Metrika({id:24049213,
                    webvisor:true,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true,
                    params:_yaparams});
            } else {
                w.yaCounter24049213 = new Ya.Metrika({id:24049213,
                    webvisor:true,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true});
            }

        } catch(e) { }
    });

    var n = d.getElementsByTagName("script")[0],
        s = d.createElement("script"),
        f = function () { n.parentNode.insertBefore(s, n); };
    s.type = "text/javascript";
    s.async = true;
    s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

    if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
    } else { f(); }
})(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="//mc.yandex.ru/watch/24049213" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->

    
    
  

<div id="AutocompleteContainter_3029d" style="position: absolute; z-index: 9999; top: 2px; left: 0px;"><div class="autocomplete-w1"><div class="autocomplete" id="Autocomplete_3029d" style="display: none; width: 300px; max-height: 400px;"></div></div></div><div id="AutocompleteContainter_c5e81" style="position: absolute; z-index: 9999; top: 38px; left: 0px;"><div class="autocomplete-w1"><div class="autocomplete" id="Autocomplete_c5e81" style="display: none; width: 300px; max-height: 400px;"></div></div></div></body></html>